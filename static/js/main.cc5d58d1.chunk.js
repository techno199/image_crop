(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{177:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(69),o=a.n(i),c=(a(77),a(2)),s=a(3),l=a(6),p=a(4),g=a(7),h=(a(78),a(5)),u=a.n(h),m=a(12),f=a(10),d=a.n(f),b=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.classes,r=e.className,i=Object(m.a)(e,["children","classes","className"]);return n.a.createElement("div",Object.assign({className:d()([a.root,r])},i),n.a.createElement(n.a.Fragment,null,t))}}]),t}(r.Component),v=u()({root:{backgroundColor:"#fff",borderRadius:4,color:"#000",boxShadow:"0px 1px 3px 0px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 2px 1px -1px rgba(0,0,0,0.12)"}})(b);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function O(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var y=n.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),x=n.a.createElement("path",{d:"M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"}),j=function(e){var t=e.svgRef,a=O(e,["svgRef"]);return n.a.createElement("svg",w({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),y,x)},k=n.a.forwardRef(function(e,t){return n.a.createElement(j,w({svgRef:t},e))});a.p;function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function C(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var S=n.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),N=n.a.createElement("path",{d:"M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"}),R=function(e){var t=e.svgRef,a=C(e,["svgRef"]);return n.a.createElement("svg",E({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),S,N)},D=n.a.forwardRef(function(e,t){return n.a.createElement(R,E({svgRef:t},e))}),I=(a.p,function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.children,r=e.className,i=Object(m.a)(e,["classes","children","className"]);return n.a.createElement("button",Object.assign({className:d()([t.root,r])},i),a)}}]),t}(r.Component)),W=u()({root:{outline:"none",padding:"7px 16px 8px",backgroundColor:"#5181b8",color:"#fff",minWidth:170,borderRadius:4,fontSize:12.5,display:"flex",justifyContent:"center",border:"none","&:hover":{backgroundColor:"#5b88bd"},"&:active":{backgroundColor:"#4872a3",paddingTop:8,paddingBottom:7}}})(I),z="BOX",B="TAG",M={NW:"NW",N:"N",NE:"NE",W:"W",E:"E",SW:"SW",S:"S",SE:"SE"},T=604,A=200,H=100,P=a(11),L=a(17),F=a.n(L),U=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).areaRef=n.a.createRef(),a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.top,a=e.left,r=e.width,i=e.height,o=e.classes,c=e.connectDragPreview,s=e.connectDragSource,l=e.className,p=e.src,g=e.imgWidth,h=e.imgHeight,u=Object(m.a)(e,["top","left","width","height","classes","connectDragPreview","connectDragSource","className","src","imgWidth","imgHeight"]),f={top:t,left:a,width:r,height:i},b={width:g,height:h,marginTop:-t,marginLeft:-a};return c(Object(L.getEmptyImage)()),s(n.a.createElement("div",Object.assign({style:f,className:d()([o.root,l]),ref:this.areaRef},u),n.a.createElement("div",{className:o.imgWrap},n.a.createElement("img",{style:b,src:p})),this.props.children))}}]),t}(r.Component),V=Object(P.DragSource)(z,{beginDrag:function(e,t,a){var r=a.areaRef.current.getBoundingClientRect();return{top:r.top,right:r.right,left:r.left,bottom:r.bottom,width:e.width,height:e.height}}},function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview()}})(U),$=u()({root:{position:"absolute",cursor:"move"},imgWrap:{overflow:"hidden",position:"absolute",top:0,left:0,right:0,bottom:0}})(V),J={root:{width:10,height:10,backgroundColor:"#f2f2f2",opacity:.3,position:"absolute",transition:".1s"},nw:{top:-5,left:-5,cursor:"nw-resize"},n:{top:-5,left:"calc(50% - ".concat(5,"px)"),cursor:"n-resize"},ne:{top:-5,left:"calc(100% - ".concat(5,"px)"),cursor:"ne-resize"},e:{top:"calc(50% - ".concat(5,"px)"),left:"calc(100% - ".concat(5,"px)"),cursor:"e-resize"},se:{top:"calc(100% - ".concat(5,"px)"),left:"calc(100% - ".concat(5,"px)"),cursor:"se-resize"},s:{top:"calc(100% - ".concat(5,"px)"),left:"calc(50% - ".concat(5,"px)"),cursor:"s-resize"},sw:{top:"calc(100% - ".concat(5,"px)"),left:-5,cursor:"sw-resize"},w:{top:"calc(50% - ".concat(5,"px)"),left:-5,cursor:"w-resize"}},X=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={tagName:""},a.componentDidMount=function(){switch(a.props.type){case M.NW:a.setState({tagName:a.props.classes.nw});break;case M.N:a.setState({tagName:a.props.classes.n});break;case M.NE:a.setState({tagName:a.props.classes.ne});break;case M.E:a.setState({tagName:a.props.classes.e});break;case M.SE:a.setState({tagName:a.props.classes.se});break;case M.S:a.setState({tagName:a.props.classes.s});break;case M.SW:a.setState({tagName:a.props.classes.sw});break;case M.W:a.setState({tagName:a.props.classes.w})}},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.connectDragSource,r=t.connectDragPreview,i=t.classes,o=t.isHighlighted;return r(Object(L.getEmptyImage)()),o&&(e={opacity:.7}),a(n.a.createElement("div",{className:d()([i.root,this.state.tagName]),style:e}))}}]),t}(r.Component),G=Object(P.DragSource)(B,{beginDrag:function(e){return{type:e.type}}},function(e){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview()}})(X),Y=u()(J)(G),q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).shouldComponentUpdate=function(e){return a.props.width!==e.width||a.props.height!==e.height||a.props.isDragging!==e.isDragging},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.classes,e.className,e.width,e.height,e.connectDragSource,e.isDragging),a=Object(m.a)(e,["classes","className","width","height","connectDragSource","isDragging"]),r=Object.keys(M).map(function(e){return M[e]});return n.a.createElement("div",a,r.map(function(e){return n.a.createElement(Y,{key:e,type:e,isHighlighted:t})}))}}]),t}(r.Component),K=u()({})(q),Q=function(e,t,a,r,n){var i={max:Math.min(e,t+a/(1/1.5)),min:Math.max(t+a/1,t+H)},o=n.y;return n.y>i.max?o=i.max:n.y<i.min&&(o=i.min),t+r-o},Z=function(e,t,a,r,n){var i={max:Math.min(e,t+1*a),min:Math.max(t+a*(1/1.5),t+H)},o=n.x;return n.x>i.max?o=i.max:n.x<i.min&&(o=i.min),t+r-o},_=function(e,t,a,r){var n={max:Math.max(0,e+t-1*a),min:Math.min(e+t-a*(1/1.5),e+t-H)},i=r.x;return r.x<n.max?i=n.max:r.x>n.min&&(i=n.min),e-i},ee=function(e,t,a,r){var n={max:Math.max(0,e+t-a/(1/1.5)),min:Math.min(e+t-a/1,e+t-H)},i=r.y;return r.y<n.max?i=n.max:r.y>n.min&&(i=n.min),e-i},te=Object(P.DropTarget)([z,B],{hover:function(e,t){if(e.rect)switch(t.getItemType()){case z:!function(e,t){var a=e.rect,r=t.getItem(),n=e.width,i=e.height,o=t.getInitialClientOffset(),c=t.getClientOffset(),s=c.x-a.left,l=c.y-a.top,p={left:s-(o.x-r.left),right:s+(r.right-o.x),top:l-(o.y-r.top),bottom:l+(r.bottom-o.y)},g=p.left;p.left<0?g=0:p.right>n&&(g=n-r.width-1);var h=p.top;p.top<0?h=0:p.bottom>i&&(h=i-r.height-1),e.onAreaUpdate({top:h,left:g})}(e,t);break;case B:!function(e,t){var a=e.areaTop,r=e.areaLeft,n=e.areaHeight,i=e.areaWidth,o=e.width,c=e.onAreaUpdate,s=e.height,l=e.rect,p=t.getItem().type,g=t.getClientOffset(),h={x:g.x-l.left,y:g.y-l.top};switch(p){case M.NW:c({top:a-ee(a,n,i,h),left:r-_(r,i,n,h),width:i+_(r,i,n,h),height:n+ee(a,n,i,h)});break;case M.N:c({top:a-ee(a,n,i,h),height:n+ee(a,n,i,h)});break;case M.NE:c({top:a-ee(a,n,i,h),width:i-Z(o,r,n,i,h),height:n+ee(a,n,i,h)});break;case M.E:c({width:i-Z(o,r,n,i,h)});break;case M.SE:c({width:i-Z(o,r,n,i,h),height:n-Q(s,a,i,n,h)});break;case M.S:c({height:n-Q(s,a,i,n,h)});break;case M.SW:c({left:r-_(r,i,n,h),height:n-Q(s,a,i,n,h),width:i+_(r,i,n,h)});case M.W:c({left:r-_(r,i,n,h),width:i+_(r,i,n,h)})}}(e,t)}}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})(function(e){var t=e.classes,a=e.width,i=e.height,o=e.rotationDegree,c=e.imgSrc,s=e.areaTop,l=e.areaLeft,p=e.areaWidth,g=e.areaHeight,h=e.onRectUpdate,u=e.connectDropTarget,m=e.isOver,f=e.onFadedSpaceClick,d=Object(r.useRef)(null),b=Object(r.useCallback)(function(e){var t=d.current.getBoundingClientRect();f&&f({x:e.clientX-t.left,y:e.clientY-t.top})});Object(r.useEffect)(function(){return function(){var e;d.current&&(e=d.current.getBoundingClientRect(),h&&h(e))}},[d.current]);var v={transform:"rotate(".concat(o,"deg)"),width:a,height:i},w={width:a,height:i};return u(n.a.createElement("div",{style:v},n.a.createElement("img",{style:w,className:t.img,src:c,ref:d,alt:"Preview"}),n.a.createElement("div",{className:t.imgFade,onClick:b}),n.a.createElement($,{className:t.area,top:s,left:l,width:p,height:g,imgWidth:a,imgHeight:i,src:c},n.a.createElement(K,{width:p,height:g,isDragging:m}))))}),ae=u()({img:{userSelect:"none"},imgFade:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"#000",opacity:.7,cursor:"crosshair"}})(te),re=a(39),ne=a.n(re),ie=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={isImgSelected:!1,imgSrc:null,imgRotationDegree:0,imgRect:null,resizedImageWidth:null,resizedImageHeight:null,area:{top:0,left:0,width:A,height:A}},a.fileInputRef=n.a.createRef(),a.imgRef=n.a.createRef(),a.reader=new FileReader,a.image=new Image,a.componentDidMount=function(){a.reader.addEventListener("load",function(){a.image.src=a.reader.result},!1),a.image.onload=function(e){var t=a.image.width,r=a.image.height;if(t/r<=.25||t/r>=3)alert("Image aspect ration must follow next formula: 0.25 < ratio < 3");else if(t<A||r<A)alert("Image must be at least 200x200px");else{var n,i=t,o=r;r>T&&(o=T,i=t/(n=r/T)),i>T&&(n=i/T,i=T,o/=n);var c=o/2-A/2,s=i/2-A/2;a.setState({area:ne()(a.state.area,{top:{$set:c},left:{$set:s}}),resizedImageWidth:i,resizedImageHeight:o,imgSrc:a.image.src,isImgSelected:!0})}}},a.componentWillUpdate=function(){},a.handleSelectedImageChange=function(e){var t=a.fileInputRef.current.files[0];t&&a.reader.readAsDataURL(t)},a.handleSelectFileClick=function(e){a.fileInputRef.current&&a.fileInputRef.current.click()},a.handleRotateClick=function(e){return function(){a.setState(function(t){return{imgRotationDegree:t.imgRotationDegree+e}})}},a.updateArea=function(e){a.setState({area:ne()(a.state.area,{$merge:e})})},a.handleFadedSpaceClick=function(e){var t=e.x,r=e.y,n=a.state,i=n.resizedImageHeight,o=n.resizedImageWidth,c=r-H/2;c<0?c=0:c>i-H&&(c=i-H);var s=t-H/2;s<0?s=0:s>o-H&&(s=o-H),a.updateArea({top:c,left:s,width:H,height:H})},a.handleCropperRectUpdate=function(e){a.setState({imgRect:e})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.title,r=this.state,i=r.isImgSelected,o=r.imgSrc,c=r.imgRotationDegree,s=r.area,l=r.resizedImageHeight,p=r.resizedImageWidth,g=r.imgRect,h=0;this.imgRef.current&&(Boolean(c/90%2)&&(h=Math.abs(this.imgRef.current.clientWidth-this.imgRef.current.clientHeight)));var u={margin:"".concat(h/2+35,"px auto"),width:p,height:l};return n.a.createElement(v,{className:t.root},n.a.createElement("div",{className:t.title},a),n.a.createElement("div",{className:t.cropWrap},i?n.a.createElement("div",null,n.a.createElement("div",{className:t.descriptionWrap},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"),n.a.createElement("div",{className:t.outerImage,style:u},n.a.createElement(ae,{height:l,width:p,areaTop:s.top,areaLeft:s.left,areaHeight:s.height,areaWidth:s.width,imgSrc:o,rotationDegree:c,onRectUpdate:this.handleCropperRectUpdate,rect:g,onAreaUpdate:this.updateArea,onFadedSpaceClick:this.handleFadedSpaceClick}),n.a.createElement("div",{className:t.rotationButtons},n.a.createElement(k,{className:t.rotateClockwise,onClick:this.handleRotateClick(-90)}),n.a.createElement(D,{className:t.rotateAntiClockwise,onClick:this.handleRotateClick(90)}))),n.a.createElement("div",{className:t.bottomLine}),n.a.createElement("div",{className:t.bottomButtonWrap},n.a.createElement(W,{className:t.saveButton},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))):n.a.createElement("div",null,n.a.createElement(W,{onClick:this.handleSelectFileClick},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b"),n.a.createElement("input",{ref:this.fileInputRef,className:t.input,type:"file",onChange:this.handleSelectedImageChange}))))}}]),t}(r.Component),oe=u()({root:{width:654,display:"flex",flexFlow:"column"},title:{minHeight:54,paddingLeft:25,paddingRight:25,display:"flex",alignItems:"center",borderBottom:"1px solid #86838357",backgroundColor:"#f2f5f7",borderTopLeftRadius:4,borderTopRightRadius:4},descriptionWrap:{display:"flex",justifyContent:"center",marginBottom:35},cropWrap:{padding:"32px 20px 20px",display:"flex",justifyContent:"center"},outerImage:{position:"relative"},rotateClockwise:{fill:"#ffffff99",position:"absolute",bottom:5,right:24,cursor:"pointer","&:hover":{fill:"#fff"}},rotateAntiClockwise:{extend:"rotateClockwise",right:0},rotationButtons:{position:"absolute",right:0,bottom:0},previewImage:{userSelect:"none"},input:{display:"none"},bottomLine:{borderBottom:"1px solid #86838357"},saveButton:{marginTop:8},bottomButtonWrap:{marginTop:20,display:"flex",justifyContent:"center"},imgFade:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"#000",opacity:.7},area:{}})(ie),ce=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).backgroundRef=n.a.createRef(),a.handleOuterClick=function(e){e.target===a.backgroundRef.current&&a.props.onOuterClick&&a.props.onOuterClick(e)},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.children;return e.open&&n.a.createElement("div",{ref:this.backgroundRef,className:t.root,onMouseDown:this.handleOuterClick},a)}}]),t}(r.Component),se=u()({root:{position:"fixed",display:"flex",justifyContent:"center",alignItems:"center",top:0,bottom:0,left:0,right:0,background:"rgba(0, 0, 0, .7)",overflow:"auto"}})(ce),le=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={modalOpen:!1},a.handleToggleButton=function(e){a.setState(function(e){return{modalOpen:!e.modalOpen}})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.modalOpen;return n.a.createElement(P.DragDropContextProvider,{backend:F.a},n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement(W,{onClick:this.handleToggleButton},"Toggle modal"),n.a.createElement(se,{open:e,onOuterClick:this.handleToggleButton},n.a.createElement(oe,{title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"})))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},72:function(e,t,a){e.exports=a(177)},77:function(e,t,a){},78:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.cc5d58d1.chunk.js.map