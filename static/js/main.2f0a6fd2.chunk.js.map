{"version":3,"sources":["components/paper/index.js","img/rotate_left.svg","img/rotate_right.svg","img/close.svg","components/button/index.js","helpers/index.js","components/imageCrop/tags/tag/index.js","components/imageCrop/tags/index.js","components/imageCrop/selectionArea/index.js","components/imageCrop/cropper/resizeArea.js","components/imageCrop/cropper/index.js","components/imageCrop/cropper/moveArea.js","components/imageCrop/index.js","components/imageCrop/imageCrop.styles.js","App.js","serviceWorker.js","index.js","img/cats.jpg","img/empty.svg"],"names":["Paper","_this$props","this","props","children","classes","className","other","Object","objectWithoutProperties","react_default","a","createElement","assign","classNames","root","Fragment","Component","PaperStyled","withStyles","backgroundColor","borderRadius","color","boxShadow","_extends","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","rotate_left_ref2","d","fill","rotate_left_ref3","rotate_left_SvgRotateLeft","_ref","svgRef","width","height","viewBox","ref","ForwardRef","forwardRef","__webpack_require__","p","rotate_right_extends","rotate_right_objectWithoutProperties","rotate_right_objectWithoutPropertiesLoose","rotate_right_ref2","rotate_right_ref3","rotate_right_SvgRotateRight","rotate_right_ForwardRef","close_extends","close_objectWithoutProperties","close_objectWithoutPropertiesLoose","close_ref2","close_ref3","close_SvgClose","close_ForwardRef","Button","ButtonStyled","outline","padding","minWidth","fontSize","display","justifyContent","border","cursor","userSelect","&:hover","&:active","paddingTop","paddingBottom","TagTypes","types","NW","N","NE","W","E","SW","S","SE","isEdge","type","isPole","isSide","getCurrentEdge","currentType","areaTop","areaLeft","areaWidth","areaHeight","clientX","clientY","areaMiddleX","areaMiddleY","additionalOffsetX","additionalOffsetY","getCurrentPole","getCurrentSide","ErrorTypes","WRONG_IMAGE_ASPECT_RATIO","IMAGE_TOO_SMALL","MAX_RESIZE_RATIO","MIN_RESIZE_RATIO","MAX_IMAGE_DIMENSION_LENGHT","MIN_IMAGE_DIMENSION_LENGHT","MIN_IMAGE_CROP_DIMENSION_LENGHT","FULL_IMAGE_SELECTION_THRESHOLD","Image","src","movePreviewImage","styles","opacity","position","transition","nw","top","left","n","concat","TAG_WIDTH","ne","e","se","s","sw","w","Tag","state","tagName","item","initClientOffset","componentDidMount","_this","setState","handleMouseDown","preventDefault","x","y","onDragStart","document","addEventListener","_onMouseMove","_onMouseUp","removeEventListener","onDragEnd","currentClientOffset","onDrag","hightlightStyle","isHighlighted","style","draggable","onMouseDown","onMouseUp","handleMouseUp","TagStyled","Tags","shouldComponentUpdate","nextProps","isDragging","handleTagDrag","onTagDrag","handleTagDragEnd","onTagDragEnd","handleTagDragStart","onTagDragStart","_this2","tags","map","TagsStyled","SelectionArea","right","bottom","areaRef","React","createRef","rect","current","getBoundingClientRect","onHover","connectDragPreview","connectDragSource","imgWidth","imgHeight","areaStyles","imgStyles","marginTop","marginLeft","imgWrap","alt","SelectionAreaStyled","overflow","getFixedBottomDelta","cursorAbsoluteOffset","bottomAbsoluteOffsetInterval","max","Math","min","fixedBottomOffset","getFixedRightDelta","rightAbsoluteOffsetInterval","fixedRightOffset","getFixedLeftDelta","leftAbsoluteOffsetInterval","fixedLeftOffset","getFixedTopDelta","topAbsoluteOffsetInterval","fixedTopOffset","getFixedNW","allowedWidth","allowedHeight","ceil","getFixedNE","containerWidth","getFixedSE","containerHeight","getFixedSW","CropperStyled","img","imgFade","rotationDegree","imgSrc","onRectUpdate","onFadedSpaceClick","onAreaUpdate","imgRef","useRef","handleFadeClick","useCallback","handleHover","_ref2","fixedOffset","containerRect","areaRect","initOffset","currentOffset","areaAbsoluteOffset","fixedAreaLeftOffset","fixedAreaTopOffset","fixedMoveAreaOffset","_ref3","tagType","objectSpread","resizeArea","useEffect","innerImageContainerStyle","transform","imgStyle","onClick","area","getDefaultState","isImgSelected","imgRotationDegree","resizedImageWidth","resizedImageHeight","ImageCrop","fileInputRef","reader","FileReader","image","result","onload","originalWidth","originalHeight","onErrorLoadingImage","aspectRatio","initialAreaTop","initialAreaLeft","calculatedWidth","calculatedHeight","update","$set","handleClose","onClose","handleGoBackClick","defaultState","handleSelectedImageChange","file","files","readAsDataURL","handleSelectFileClick","click","handleCat","CatsImg","handleRotateClick","deltaDegree","oldState","updateArea","$merge","handleFadedSpaceClick","_this$state","fixedTop","fixedLeft","handleCropperRectUpdate","title","_this$state2","imgWidthHeightDelta","Boolean","abs","clientWidth","clientHeight","outerImageContainerStyle","margin","titleText","close","cropWrap","descriptionWrap","outerImage","rotationButtons","rotateClockwise","rotateAntiClockwise","bottomLine","footer","btn","input","onChange","ImageCropStyled","flexFlow","minHeight","paddingLeft","alignItems","borderBottom","borderTopLeftRadius","borderTopRightRadius","marginBottom","extend","previewImage","flexGrow","marginRight","App","cjs","backend","HTML5Backend","handleToggleButton","handleErrorLoading","window","location","hostname","match","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.2f0a6fd2.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport classNames from 'classnames'\r\n\r\nconst styles = {\r\n  root: {\r\n    backgroundColor: '#fff',\r\n    borderRadius: 4,\r\n    color: '#000',\r\n    boxShadow: '0px 1px 3px 0px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 2px 1px -1px rgba(0,0,0,0.12)'\r\n  }\r\n}\r\n\r\nclass Paper extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      children,\r\n      classes,\r\n      className,\r\n      ...other\r\n    } = this.props\r\n    \r\n    return (\r\n      <div className={classNames([classes.root, className])} {...other}>\r\n        <React.Fragment>\r\n          {children}\r\n        </React.Fragment>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst PaperStyled = withStyles(styles)(Paper)\r\n\r\nexport { PaperStyled as Paper }","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z\"\n});\n\nvar SvgRotateLeft = function SvgRotateLeft(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgRotateLeft, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/rotate_left.92a114e8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z\"\n});\n\nvar SvgRotateRight = function SvgRotateRight(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgRotateRight, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/rotate_right.bd9c45d6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.777b93c6.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport classNames from 'classnames'\r\n\r\nconst styles = {\r\n  root: {\r\n    outline: 'none',\r\n    padding: '7px 16px 8px',\r\n    backgroundColor: '#5181b8',\r\n    color: '#fff',\r\n    minWidth: 170,\r\n    borderRadius: 4,\r\n    fontSize: 12.5,\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    border: 'none',\r\n    cursor: 'pointer',\r\n    userSelect: 'none',\r\n    '&:hover': {\r\n      backgroundColor: '#5b88bd'\r\n    },\r\n    '&:active': {\r\n      backgroundColor: '#4872a3',\r\n      paddingTop: 8,\r\n      paddingBottom: 7\r\n    }\r\n  }\r\n}\r\n\r\nclass Button extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      classes,\r\n      children,\r\n      className,\r\n      ...other\r\n     } = this.props\r\n\r\n    return (\r\n      <button\r\n        className={classNames([classes.root, className])} \r\n        {...other}\r\n      >\r\n        {children}\r\n      </button>\r\n    )\r\n  }\r\n}\r\n\r\nconst ButtonStyled = withStyles(styles)(Button)\r\n\r\nexport { ButtonStyled as Button }","import movePreviewImage from '../img/empty.svg'\r\n\r\nexport const ItemTypes = {\r\n  BOX: 'BOX',\r\n  TAG: 'TAG'\r\n}\r\n\r\nexport const TagTypes = {\r\n  types: {\r\n    NW: 'NW',\r\n    N: 'N',\r\n    NE: 'NE',\r\n    W: 'W',\r\n    E: 'E',\r\n    SW: 'SW',\r\n    S: 'S',\r\n    SE: 'SE'\r\n  },\r\n  /** Check whether given type is edge */\r\n  isEdge(type) {\r\n    return [this.types.NW, this.types.NE, this.types.SW, this.types.SE].indexOf(type) > -1\r\n  },\r\n  /** Check whether given type is pole */\r\n  isPole(type) {\r\n    return [this.types.N, this.types.S].indexOf(type) > -1\r\n  },\r\n  /** Check whether given type is side of world */\r\n  isSide(type) {\r\n    return [this.types.E, this.types.W].indexOf(type) > -1\r\n  },\r\n  /** Get current selected edge region */\r\n  getCurrentEdge(currentType, areaTop, areaLeft, areaWidth, areaHeight, clientX, clientY) {\r\n    let areaMiddleX = areaLeft + areaWidth / 2\r\n    let areaMiddleY = areaTop + areaHeight / 2\r\n    let additionalOffsetX = areaWidth / 4\r\n    let additionalOffsetY = areaHeight / 4\r\n    // Don't ask W.T.F. is this.\r\n    // We just need this to happened.\r\n    switch (currentType) {\r\n      case TagTypes.types.NW:\r\n        areaMiddleX += additionalOffsetX\r\n        areaMiddleY += additionalOffsetY\r\n        break\r\n      case TagTypes.types.NE: \r\n        areaMiddleX -= additionalOffsetX\r\n        areaMiddleY += additionalOffsetY\r\n        break\r\n      case TagTypes.types.SE:\r\n        areaMiddleX -= additionalOffsetX\r\n        areaMiddleY -= additionalOffsetY\r\n        break\r\n      case TagTypes.types.SW:\r\n        areaMiddleX += additionalOffsetX\r\n        areaMiddleY -= additionalOffsetY\r\n    }\r\n    // Determine which tag we actually need to drag..\r\n    if (clientX > areaMiddleX)\r\n      if (clientY > areaMiddleY)\r\n        return this.types.SE\r\n      else\r\n        return this.types.NE\r\n    else \r\n      if (clientY > areaMiddleY)\r\n        return this.types.SW\r\n      else\r\n        return this.types.NW\r\n  },\r\n  getCurrentPole(areaTop, areaHeight, clientY) {\r\n    let areaMiddleY = areaTop + areaHeight / 2\r\n    if (clientY > areaMiddleY)\r\n      return this.types.S\r\n    return this.types.N\r\n  },\r\n  getCurrentSide(areaLeft, areaWidth, clientX) {\r\n    let areaMiddleX = areaLeft + areaWidth / 2\r\n    if (clientX > areaMiddleX)\r\n      return this.types.E\r\n    return this.types.W\r\n  }\r\n}\r\n\r\nexport const ErrorTypes = {\r\n  WRONG_IMAGE_ASPECT_RATIO: 'WRONG_IMAGE_ASPECT_RATIO',\r\n  IMAGE_TOO_SMALL: 'IMAGE_TOO_SMALL'\r\n}\r\n\r\n/** MaxPossibleWidth/currentHegiht */\r\nexport const MAX_RESIZE_RATIO = 1\r\n/** MinPossibleWidth/currentHeight */\r\nexport const MIN_RESIZE_RATIO = 1/1.5\r\n/** Maximum image markup width or height */\r\nexport const MAX_IMAGE_DIMENSION_LENGHT = 604\r\n/** Minimum image markup width or height */\r\nexport const MIN_IMAGE_DIMENSION_LENGHT = 200\r\n/** Minimum crop area width or height */\r\nexport const MIN_IMAGE_CROP_DIMENSION_LENGHT = 100\r\n/** If given image width is less than this value, we select an entire image on load */\r\nexport const FULL_IMAGE_SELECTION_THRESHOLD = 300\r\n\r\nexport const movePreview = new Image()\r\nmovePreview.src = movePreviewImage\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { TagTypes, movePreview } from '../../../../helpers';\r\nimport withStyles from 'react-jss'\r\nimport classNames from 'classnames'\r\n\r\nexport const TAG_WIDTH = 10\r\n\r\nconst styles = {\r\n  root: {\r\n    width: TAG_WIDTH,\r\n    height: TAG_WIDTH,\r\n    backgroundColor: '#f2f2f2',\r\n    opacity: 0.3,\r\n    position: 'absolute',\r\n    transition: '.1s'\r\n  },\r\n  nw: {\r\n    top: -TAG_WIDTH / 2,\r\n    left: -TAG_WIDTH / 2,\r\n    cursor: 'nw-resize'\r\n  },\r\n  n: {\r\n    top: - TAG_WIDTH / 2,\r\n    left: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'n-resize'\r\n  },\r\n  ne: {\r\n    top: -TAG_WIDTH / 2,\r\n    left: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'ne-resize'\r\n  },\r\n  e: {\r\n    top: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    left: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'e-resize'\r\n  },\r\n  se: {\r\n    top: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    left: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'se-resize'\r\n  },\r\n  s: {\r\n    top: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    left: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 's-resize'\r\n  },\r\n  sw: {\r\n    top: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    left: -TAG_WIDTH / 2,\r\n    cursor: 'sw-resize'\r\n  },\r\n  w: {\r\n    top: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    left: -TAG_WIDTH / 2,\r\n    cursor: 'w-resize'\r\n  }\r\n}\r\n\r\nclass Tag extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object,\r\n    /** Defines tag type */\r\n    type: PropTypes.string.isRequired,\r\n    /** Highlight square */\r\n    isHighlighted: PropTypes.bool,\r\n    /** Drag callback */\r\n    onDrag: PropTypes.func,\r\n    onDragStart: PropTypes.func,\r\n    onDragEnd: PropTypes.func\r\n  }\r\n\r\n  state = {\r\n    tagName: '',\r\n    item: null,\r\n    initClientOffset: null\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    switch (this.props.type){\r\n      case TagTypes.types.NW:\r\n        this.setState({\r\n          tagName: this.props.classes.nw\r\n        })\r\n        break\r\n      case TagTypes.types.N:\r\n        this.setState({\r\n          tagName: this.props.classes.n\r\n        })\r\n        break\r\n      case TagTypes.types.NE:\r\n        this.setState({\r\n          tagName: this.props.classes.ne\r\n        })\r\n        break\r\n      case TagTypes.types.E:\r\n        this.setState({\r\n          tagName: this.props.classes.e\r\n        })\r\n        break\r\n      case TagTypes.types.SE:\r\n        this.setState({\r\n          tagName: this.props.classes.se\r\n        })\r\n        break\r\n      case TagTypes.types.S:\r\n        this.setState({\r\n          tagName: this.props.classes.s\r\n        })\r\n        break\r\n      case TagTypes.types.SW:\r\n        this.setState({\r\n          tagName: this.props.classes.sw\r\n        })\r\n        break\r\n      case TagTypes.types.W:\r\n        this.setState({\r\n          tagName: this.props.classes.w\r\n        })\r\n        break\r\n      default: \r\n        break\r\n    }\r\n  }\r\n\r\n  handleMouseDown = e => {\r\n    e.preventDefault()\r\n    let item = {\r\n      type: this.props.type\r\n    }\r\n    this.setState({\r\n      initClientOffset: {\r\n        x: e.clientX,\r\n        y: e.clientY\r\n      },\r\n      item\r\n    })\r\n    this.props.onDragStart &&\r\n      this.props.onDragStart(e)\r\n\r\n    document.addEventListener('mousemove', this._onMouseMove)\r\n    document.addEventListener('mouseup', this._onMouseUp)\r\n  }\r\n\r\n  _onMouseUp = e => {\r\n    document.removeEventListener('mousemove', this._onMouseMove)\r\n    document.removeEventListener('mouseup', this._onMouseUp)\r\n    this.props.onDragEnd &&\r\n      this.props.onDragEnd(e)\r\n  }\r\n\r\n  _onMouseMove = e => {\r\n    const currentClientOffset = {\r\n      x: e.clientX,\r\n      y: e.clientY\r\n    }\r\n\r\n    this.props.onDrag &&\r\n      this.props.onDrag({\r\n        initClientOffset: this.state.initClientOffset,\r\n        currentClientOffset,\r\n        item: this.state.item\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      classes,\r\n      isHighlighted,\r\n    } = this.props\r\n    // Replace default stab with empty image\r\n    let hightlightStyle\r\n    if (isHighlighted)\r\n      hightlightStyle = {\r\n        opacity: .7\r\n      }\r\n    \r\n    return (\r\n      <div\r\n        className={classNames([classes.root, this.state.tagName])}\r\n        style={hightlightStyle}\r\n        draggable={false}\r\n        onMouseDown={this.handleMouseDown}\r\n        onMouseUp={this.handleMouseUp}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nconst TagStyled = withStyles(styles)(Tag)\r\n\r\nexport { TagStyled as Tag }\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport { TagTypes } from '../../../helpers';\r\nimport { Tag } from './tag';\r\n\r\nconst styles = {\r\n\r\n}\r\n\r\nclass Tags extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    /** Selected area width */\r\n    width: PropTypes.number.isRequired,\r\n    /** Selected area height */\r\n    height: PropTypes.number.isRequired,\r\n    /** Tag dragging callback */\r\n    onTagDrag: PropTypes.func,\r\n    onTagDragStart: PropTypes.func,\r\n    onTagDragEnd: PropTypes.func\r\n  }\r\n\r\n  shouldComponentUpdate = nextProps => {\r\n    // Huge performance improvement\r\n    if (\r\n      this.props.width === nextProps.width &&\r\n      this.props.height === nextProps.height &&\r\n      this.props.isDragging === nextProps.isDragging\r\n    ) return false\r\n    return true\r\n  }\r\n\r\n  handleTagDrag = e => {\r\n    this.props.onTagDrag &&\r\n      this.props.onTagDrag(e)\r\n  }\r\n\r\n  handleTagDragEnd = () => {\r\n    this.props.onTagDragEnd &&\r\n      this.props.onTagDragEnd()\r\n  }\r\n\r\n  handleTagDragStart = () => {\r\n    this.props.onTagDragStart &&\r\n      this.props.onTagDragStart()\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      isDragging\r\n    } = this.props\r\n    let tags = Object.keys(TagTypes.types).map(type => TagTypes.types[type])\r\n  \r\n    return (\r\n      <div>\r\n        {\r\n          tags.map(type => (\r\n            <Tag \r\n              key={type}\r\n              type={type}\r\n              isHighlighted={isDragging}\r\n              onDrag={this.handleTagDrag}\r\n              onDragStart={this.handleTagDragStart}\r\n              onDragEnd={this.handleTagDragEnd}\r\n            />\r\n          ))\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst TagsStyled = withStyles(styles)(Tags)\r\n\r\nexport { TagsStyled as Tags }\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport { movePreview } from '../../../helpers';\r\nimport classNames from 'classnames'\r\nimport { Tags } from '../tags';\r\n\r\nconst styles = {\r\n  root: {\r\n    position: 'absolute',\r\n    cursor: 'move'\r\n  },\r\n  imgWrap: {\r\n    overflow: 'hidden',\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    userSelect: 'none'\r\n  }\r\n}\r\n\r\nclass SelectionArea extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    /** Describes absolute top offset */\r\n    top: PropTypes.number.isRequired,\r\n    /** Describes absolute left offset */\r\n    left: PropTypes.number.isRequired,\r\n    /** Area width */\r\n    width: PropTypes.number.isRequired,\r\n    /** Area height */\r\n    height: PropTypes.number.isRequired,\r\n    /** Classes to be merged */\r\n    className: PropTypes.string,\r\n    /** Image source */\r\n    src: PropTypes.string.isRequired,\r\n    /** Image width */\r\n    imgWidth: PropTypes.number.isRequired,\r\n    /** Image height */\r\n    imgHeight: PropTypes.number.isRequired,\r\n    onHover: PropTypes.func,\r\n    handleTagDrag: PropTypes.func,\r\n  }\r\n\r\n  state = {\r\n    initClientOffset: {\r\n      x: null,\r\n      y: null\r\n    },\r\n    item: {\r\n      top: null,\r\n      right: null,\r\n      bottom: null,\r\n      left: null,\r\n      height: null,\r\n      width: null\r\n    },\r\n    isDragging: false\r\n  }\r\n\r\n  areaRef = React.createRef()\r\n\r\n  handleMouseDown = e => {\r\n    e.preventDefault()\r\n    let rect = this.areaRef.current.getBoundingClientRect()\r\n\r\n    let item = {\r\n      top: rect.top,\r\n      right: rect.right,\r\n      left: rect.left,\r\n      bottom: rect.bottom,\r\n      width: this.props.width,\r\n      height: this.props.height\r\n    }\r\n    \r\n\r\n    this.setState({\r\n      initClientOffset: {\r\n        x: e.clientX,\r\n        y: e.clientY\r\n      },\r\n      item,\r\n      isDragging: true\r\n    })\r\n\r\n    document.addEventListener('mousemove', this._onMouseMove)\r\n    document.addEventListener('mouseup', this._onMouseUp)\r\n  }\r\n\r\n  _onMouseMove = e => {\r\n    const currentClientOffset = {\r\n      x: e.clientX,\r\n      y: e.clientY\r\n    }\r\n\r\n    this.props.onHover &&\r\n      this.props.onHover({\r\n        initClientOffset: this.state.initClientOffset,\r\n        currentClientOffset,\r\n        item: this.state.item\r\n      })\r\n  }\r\n\r\n  _onMouseUp = e => {\r\n    document.removeEventListener('mousemove', this._onMouseMove)\r\n    document.removeEventListener('mouseup', this._onMouseUp)\r\n    this.setState({\r\n      isDragging: false\r\n    })\r\n  }\r\n\r\n  handleTagDragStart = () => {\r\n    this.setState({\r\n      isDragging: true\r\n    })\r\n  }\r\n\r\n  handleTagDragEnd = () => {\r\n    this.setState({\r\n      isDragging: false\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      top,\r\n      left,\r\n      width,\r\n      height,\r\n      classes,\r\n      connectDragPreview,\r\n      connectDragSource,\r\n      className,\r\n      src,\r\n      imgWidth,\r\n      imgHeight,\r\n      onHover,\r\n      handleTagDrag,\r\n      ...other\r\n    } = this.props\r\n\r\n    const { \r\n      isDragging\r\n     } = this.state\r\n\r\n    const areaStyles = {\r\n      top,\r\n      left,\r\n      width,\r\n      height\r\n    }\r\n    const imgStyles = {\r\n      width: imgWidth,\r\n      height: imgHeight,\r\n      marginTop: -top,\r\n      marginLeft: -left,\r\n    }\r\n\r\n    return (\r\n      <div \r\n        style={areaStyles}\r\n        className={classNames([classes.root, className])}\r\n        ref={this.areaRef}\r\n        draggable={false}\r\n        {...other}\r\n      >\r\n        <div className={classes.imgWrap}>\r\n          <img \r\n            style={imgStyles}\r\n            src={src}\r\n            draggable={false}\r\n            onMouseDown={this.handleMouseDown}\r\n            alt=''\r\n          />\r\n        </div>\r\n        <Tags\r\n          width={width}\r\n          height={height}\r\n          isDragging={isDragging}\r\n          onTagDrag={handleTagDrag}\r\n          onTagDragStart={this.handleTagDragStart}\r\n          onTagDragEnd={this.handleTagDragEnd}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst SelectionAreaStyled = withStyles(styles)(SelectionArea)\r\n\r\nexport { SelectionAreaStyled as SelectionArea }","import { TagTypes, MIN_IMAGE_CROP_DIMENSION_LENGHT, MIN_RESIZE_RATIO, MAX_RESIZE_RATIO } from \"../../../helpers\";\r\n\r\nexport const resizeArea = ({\r\n  areaTop,\r\n  areaLeft,\r\n  areaHeight,\r\n  areaWidth,\r\n  width,\r\n  height,\r\n  imgRef,\r\n  item,\r\n  currentClientOffset,\r\n  onAreaUpdate\r\n}) => {\r\n  let rect = imgRef.current.getBoundingClientRect()\r\n  /** Currently dragged tag type */\r\n  let tagType = item.type\r\n  /** Current offset */\r\n  let currentOffset = currentClientOffset\r\n  /** Cursor absolute offset*/\r\n  let cursorAbsoluteOffset = {\r\n    x: currentOffset.x - rect.left,\r\n    y: currentOffset.y - rect.top,\r\n  }\r\n  // Fix tagType depending on current location\r\n  if (TagTypes.isEdge(tagType))\r\n    tagType = TagTypes.getCurrentEdge(\r\n      tagType,\r\n      areaTop,\r\n      areaLeft,\r\n      areaWidth,\r\n      areaHeight,\r\n      cursorAbsoluteOffset.x,\r\n      cursorAbsoluteOffset.y\r\n    )\r\n  else if (TagTypes.isPole(tagType))\r\n    tagType = TagTypes.getCurrentPole(\r\n      areaTop,\r\n      areaHeight,\r\n      cursorAbsoluteOffset.y\r\n    )\r\n  else \r\n    tagType = TagTypes.getCurrentSide(\r\n      areaLeft,\r\n      areaWidth,\r\n      cursorAbsoluteOffset.x\r\n    )\r\n  \r\n  // Move around with respect to actually selected tag\r\n  switch (tagType) {\r\n    case TagTypes.types.NW: {\r\n      onAreaUpdate({...getFixedNW(\r\n        areaTop,\r\n        areaLeft,\r\n        areaWidth,\r\n        areaHeight,\r\n        cursorAbsoluteOffset\r\n      )})\r\n      break\r\n    }      \r\n    case TagTypes.types.N: {\r\n      onAreaUpdate({\r\n        top: areaTop - getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        height: areaHeight + getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.types.NE: {\r\n      onAreaUpdate({...getFixedNE(\r\n        areaTop,\r\n        areaLeft,\r\n        areaWidth,\r\n        areaHeight,\r\n        width,\r\n        cursorAbsoluteOffset\r\n      )})\r\n      break\r\n    }\r\n    case TagTypes.types.E: {\r\n      onAreaUpdate({\r\n        width: areaWidth - getFixedRightDelta(width, areaLeft, areaHeight, areaWidth, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.types.SE: {\r\n      onAreaUpdate({...getFixedSE(\r\n        areaTop,\r\n        areaLeft,\r\n        areaWidth,\r\n        areaHeight,\r\n        width,\r\n        height,\r\n        cursorAbsoluteOffset\r\n      )})\r\n      break\r\n    }\r\n    case TagTypes.types.S: {\r\n      onAreaUpdate({\r\n        height: areaHeight - getFixedBottomDelta(height, areaTop, areaWidth, areaHeight, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.types.SW: {\r\n      onAreaUpdate({...getFixedSW(\r\n        areaTop,\r\n        areaLeft,\r\n        areaWidth,\r\n        areaHeight,\r\n        height,\r\n        cursorAbsoluteOffset\r\n      )})\r\n      break\r\n    }\r\n    case TagTypes.types.W: {\r\n      onAreaUpdate({\r\n        left: areaLeft - getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        width: areaWidth + getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    default:\r\n      break\r\n  }\r\n}\r\n\r\nconst getFixedBottomDelta = (height, areaTop, areaWidth, areaHeight, cursorAbsoluteOffset) => {\r\n  // Get possible interval for bottom side\r\n  let bottomAbsoluteOffsetInterval = {\r\n    max: Math.min(\r\n      height,\r\n      areaTop + areaWidth / MIN_RESIZE_RATIO\r\n    ),\r\n    min: Math.max(\r\n      areaTop + areaWidth / MAX_RESIZE_RATIO,\r\n      areaTop + MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset\r\n  let fixedBottomOffset = cursorAbsoluteOffset.y\r\n  if (cursorAbsoluteOffset.y > bottomAbsoluteOffsetInterval.max)\r\n    fixedBottomOffset = bottomAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.y < bottomAbsoluteOffsetInterval.min)\r\n    fixedBottomOffset = bottomAbsoluteOffsetInterval.min\r\n  return areaTop + areaHeight - fixedBottomOffset\r\n}\r\n\r\nconst getFixedRightDelta = (width, areaLeft, areaHeight, areaWidth, cursorAbsoluteOffset) => {\r\n  // Get possible interval for right side\r\n  let rightAbsoluteOffsetInterval = {\r\n    max: Math.min(\r\n      width,\r\n      areaLeft + areaHeight * MAX_RESIZE_RATIO\r\n    ),\r\n    min: Math.max(\r\n      areaLeft + areaHeight * MIN_RESIZE_RATIO,\r\n      areaLeft + MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset\r\n  let fixedRightOffset = cursorAbsoluteOffset.x\r\n  if (cursorAbsoluteOffset.x > rightAbsoluteOffsetInterval.max)\r\n    fixedRightOffset = rightAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.x < rightAbsoluteOffsetInterval.min)\r\n    fixedRightOffset = rightAbsoluteOffsetInterval.min\r\n  return areaLeft + areaWidth - fixedRightOffset\r\n}\r\n\r\nconst getFixedLeftDelta = (areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset) => {\r\n  // Get possible interval for left side\r\n  let leftAbsoluteOffsetInterval = {\r\n    max: Math.max(\r\n      0, \r\n      areaLeft + areaWidth - areaHeight * MAX_RESIZE_RATIO\r\n    ),\r\n    min: Math.min(\r\n      areaLeft + areaWidth - areaHeight * MIN_RESIZE_RATIO,\r\n      areaLeft + areaWidth - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset based on interval\r\n  let fixedLeftOffset = cursorAbsoluteOffset.x\r\n  if (cursorAbsoluteOffset.x < leftAbsoluteOffsetInterval.max)\r\n    fixedLeftOffset = leftAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.x > leftAbsoluteOffsetInterval.min)\r\n    fixedLeftOffset = leftAbsoluteOffsetInterval.min\r\n  return areaLeft - fixedLeftOffset\r\n}\r\n\r\nconst getFixedTopDelta = (areaTop, areaHeight, areaWidth, cursorAbsoluteOffset) => {\r\n  // Get possible absolute interval for top side\r\n  let topAbsoluteOffsetInterval = {\r\n    max: Math.max(\r\n      0,\r\n      areaTop + areaHeight - areaWidth / MIN_RESIZE_RATIO\r\n    ),\r\n    min: Math.min(\r\n      areaTop + areaHeight - areaWidth / MAX_RESIZE_RATIO,\r\n      areaTop + areaHeight - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset based on interval\r\n  let fixedTopOffset = cursorAbsoluteOffset.y\r\n  if (cursorAbsoluteOffset.y < topAbsoluteOffsetInterval.max)\r\n    fixedTopOffset = topAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.y > topAbsoluteOffsetInterval.min)\r\n    fixedTopOffset = topAbsoluteOffsetInterval.min\r\n  return areaTop - fixedTopOffset\r\n}\r\n\r\nconst getFixedNW = (areaTop, areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset) => {\r\n  let allowedWidth = areaLeft + areaWidth\r\n  let topAbsoluteOffsetInterval = {\r\n    max: Math.max(\r\n      0,\r\n      areaTop + areaHeight - allowedWidth / MIN_RESIZE_RATIO\r\n    ),\r\n    min: Math.min(\r\n      areaTop + areaHeight - areaWidth / MAX_RESIZE_RATIO,\r\n      areaTop + areaHeight - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset based on interval\r\n  let fixedTopOffset = cursorAbsoluteOffset.y\r\n  if (cursorAbsoluteOffset.y < topAbsoluteOffsetInterval.max)\r\n    fixedTopOffset = topAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.y > topAbsoluteOffsetInterval.min)\r\n    fixedTopOffset = topAbsoluteOffsetInterval.min\r\n  \r\n  let allowedHeight = areaTop + areaHeight\r\n  let leftAbsoluteOffsetInterval = {\r\n    max: Math.max(\r\n      0, \r\n      areaLeft + areaWidth - Math.ceil(allowedHeight * MAX_RESIZE_RATIO)\r\n    ),\r\n    min: Math.min(\r\n      areaLeft + areaWidth - areaHeight * MIN_RESIZE_RATIO,\r\n      areaLeft + areaWidth - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset based on interval\r\n  let fixedLeftOffset = cursorAbsoluteOffset.x\r\n  if (cursorAbsoluteOffset.x < leftAbsoluteOffsetInterval.max)\r\n    fixedLeftOffset = leftAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.x > leftAbsoluteOffsetInterval.min)\r\n    fixedLeftOffset = leftAbsoluteOffsetInterval.min\r\n  return {\r\n    top: fixedTopOffset,\r\n    left: fixedLeftOffset,\r\n    width: areaWidth + areaLeft - fixedLeftOffset,\r\n    height: areaHeight + areaTop - fixedTopOffset\r\n  }\r\n}\r\n\r\nconst getFixedNE = (areaTop, areaLeft, areaWidth, areaHeight, containerWidth, cursorAbsoluteOffset) => {\r\n  let allowedWidth = containerWidth - areaLeft\r\n  let topAbsoluteOffsetInterval = {\r\n    max: Math.max(\r\n      0,\r\n      areaTop + areaHeight - allowedWidth / MIN_RESIZE_RATIO\r\n    ),\r\n    min: Math.min(\r\n      areaTop + areaHeight - areaWidth / MAX_RESIZE_RATIO,\r\n      areaTop + areaHeight - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset based on interval\r\n  let fixedTopOffset = cursorAbsoluteOffset.y\r\n  if (cursorAbsoluteOffset.y < topAbsoluteOffsetInterval.max)\r\n    fixedTopOffset = topAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.y > topAbsoluteOffsetInterval.min)\r\n    fixedTopOffset = topAbsoluteOffsetInterval.min\r\n  \r\n  let allowedHeight = areaTop + areaHeight\r\n  let rightAbsoluteOffsetInterval = {\r\n    max: Math.min(\r\n      containerWidth, \r\n      areaLeft + Math.ceil(allowedHeight * MAX_RESIZE_RATIO)\r\n    ),\r\n    min: Math.max(\r\n      areaLeft + areaHeight * MIN_RESIZE_RATIO,\r\n      areaLeft + MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset\r\n  let fixedRightOffset = cursorAbsoluteOffset.x\r\n  if (cursorAbsoluteOffset.x > rightAbsoluteOffsetInterval.max)\r\n    fixedRightOffset = rightAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.x < rightAbsoluteOffsetInterval.min)\r\n    fixedRightOffset = rightAbsoluteOffsetInterval.min\r\n\r\n  return {\r\n    top: fixedTopOffset,\r\n    width: areaWidth - (areaLeft + areaWidth - fixedRightOffset),\r\n    height: areaHeight + areaTop - fixedTopOffset\r\n  }\r\n}\r\n\r\nconst getFixedSE = (areaTop, areaLeft, areaWidth, areaHeight, containerWidth, containerHeight, cursorAbsoluteOffset) => {\r\n  let allowedWidth = containerWidth - areaLeft\r\n  let bottomAbsoluteOffsetInterval = {\r\n    max: Math.min(\r\n      containerHeight,\r\n      areaTop + allowedWidth / MIN_RESIZE_RATIO\r\n    ),\r\n    min: Math.max(\r\n      areaTop + areaWidth / MAX_RESIZE_RATIO,\r\n      areaTop + MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset based on interval\r\n  let fixedBottomOffset = cursorAbsoluteOffset.y\r\n  if (cursorAbsoluteOffset.y > bottomAbsoluteOffsetInterval.max)\r\n    fixedBottomOffset = bottomAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.y < bottomAbsoluteOffsetInterval.min)\r\n    fixedBottomOffset = bottomAbsoluteOffsetInterval.min\r\n  \r\n  let allowedHeight = containerHeight - areaTop\r\n  let rightAbsoluteOffsetInterval = {\r\n    max: Math.min(\r\n      containerWidth, \r\n      areaLeft + Math.ceil(allowedHeight * MAX_RESIZE_RATIO)\r\n    ),\r\n    min: Math.max(\r\n      areaLeft + areaHeight * MIN_RESIZE_RATIO,\r\n      areaLeft + MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset\r\n  let fixedRightOffset = cursorAbsoluteOffset.x\r\n  if (cursorAbsoluteOffset.x > rightAbsoluteOffsetInterval.max)\r\n    fixedRightOffset = rightAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.x < rightAbsoluteOffsetInterval.min)\r\n    fixedRightOffset = rightAbsoluteOffsetInterval.min\r\n\r\n  return {\r\n    width: areaWidth - (areaLeft + areaWidth - fixedRightOffset),\r\n    height: areaHeight - (areaTop + areaHeight - fixedBottomOffset)\r\n  }\r\n}\r\n\r\nconst getFixedSW = (areaTop, areaLeft, areaWidth, areaHeight, containerHeight, cursorAbsoluteOffset) => {\r\n  let allowedWidth = areaLeft + areaWidth\r\n  let bottomAbsoluteOffsetInterval = {\r\n    max: Math.min(\r\n      containerHeight,\r\n      areaTop + allowedWidth / MIN_RESIZE_RATIO\r\n    ),\r\n    min: Math.max(\r\n      areaTop + areaWidth / MAX_RESIZE_RATIO,\r\n      areaTop + MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset based on interval\r\n  let fixedBottomOffset = cursorAbsoluteOffset.y\r\n  if (cursorAbsoluteOffset.y > bottomAbsoluteOffsetInterval.max)\r\n    fixedBottomOffset = bottomAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.y < bottomAbsoluteOffsetInterval.min)\r\n    fixedBottomOffset = bottomAbsoluteOffsetInterval.min\r\n  \r\n  let allowedHeight = containerHeight - areaTop\r\n  let leftAbsoluteOffsetInterval = {\r\n    max: Math.max(\r\n      0, \r\n      areaLeft + areaWidth - Math.ceil(allowedHeight * MAX_RESIZE_RATIO)\r\n    ),\r\n    min: Math.min(\r\n      areaLeft + areaWidth - areaHeight * MIN_RESIZE_RATIO,\r\n      areaLeft + areaWidth - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset based on interval\r\n  let fixedLeftOffset = cursorAbsoluteOffset.x\r\n  if (cursorAbsoluteOffset.x < leftAbsoluteOffsetInterval.max)\r\n    fixedLeftOffset = leftAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.x > leftAbsoluteOffsetInterval.min)\r\n    fixedLeftOffset = leftAbsoluteOffsetInterval.min\r\n\r\n  return {\r\n    left: fixedLeftOffset,\r\n    width: areaWidth + areaLeft - fixedLeftOffset,\r\n    height: areaHeight - (areaTop + areaHeight - fixedBottomOffset)\r\n  }\r\n}","import React, { useRef, useEffect, useCallback } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport { SelectionArea } from '../selectionArea';\r\nimport { Tags } from '../tags';\r\nimport { fixedMoveAreaOffset } from './moveArea';\r\nimport { resizeArea } from './resizeArea';\r\n\r\nconst styles = {\r\n  img: {\r\n    userSelect: 'none'\r\n  },\r\n  imgFade: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: '#000',\r\n    opacity: 0.7,\r\n    cursor: 'crosshair'\r\n  }\r\n}\r\n\r\nconst Cropper = ({\r\n  classes,\r\n  width,\r\n  height,\r\n  rotationDegree,\r\n  imgSrc,\r\n  areaTop,\r\n  areaLeft,\r\n  areaWidth,\r\n  areaHeight,\r\n  onRectUpdate,\r\n  onFadedSpaceClick,\r\n  onAreaUpdate\r\n}) => {\r\n  // image ref\r\n  const imgRef = useRef(null)\r\n\r\n  /**Occurs on faded cropper part clicked */\r\n  const handleFadeClick = useCallback(\r\n    (e) => {\r\n      let rect = imgRef.current.getBoundingClientRect()\r\n      onFadedSpaceClick &&\r\n        onFadedSpaceClick({\r\n          x: e.clientX - rect.left,\r\n          y: e.clientY - rect.top\r\n        })\r\n    }\r\n  )\r\n\r\n  const handleHover = useCallback(\r\n    ({\r\n      item,\r\n      initClientOffset,\r\n      currentClientOffset\r\n    }) => {\r\n      let fixedOffset = fixedMoveAreaOffset({\r\n        width,\r\n        height,\r\n        item,\r\n        initClientOffset,\r\n        currentClientOffset,\r\n        imgRef\r\n      })\r\n      onAreaUpdate({\r\n        top: fixedOffset.top,\r\n        left: fixedOffset.left\r\n      })\r\n    }\r\n  )\r\n\r\n  const handleTagDrag = useCallback(\r\n    ({\r\n      item,\r\n      currentClientOffset\r\n    }) => {\r\n      resizeArea({\r\n        areaTop,\r\n        areaLeft,\r\n        areaHeight,\r\n        areaWidth,\r\n        width,\r\n        height,\r\n        imgRef,\r\n        item,\r\n        currentClientOffset,\r\n        onAreaUpdate\r\n      })\r\n    }\r\n  )\r\n  // Update image ref on every new image\r\n  useEffect(() => {\r\n    return () => {\r\n      if (imgRef.current) {\r\n        onRectUpdate &&\r\n          onRectUpdate(imgRef)\r\n      }\r\n    };\r\n  }, [imgRef.current])\r\n  // Custom styles\r\n  const innerImageContainerStyle = {\r\n    transform: `rotate(${rotationDegree}deg)`,\r\n    width,\r\n    height\r\n  }\r\n  const imgStyle = {\r\n    width,\r\n    height\r\n  }\r\n  \r\n  return (\r\n    <div style={innerImageContainerStyle}>\r\n      <img\r\n        style={imgStyle}\r\n        className={classes.img}\r\n        src={imgSrc}\r\n        ref={imgRef} \r\n        alt='Preview' \r\n        draggable={false}\r\n      />\r\n      <div \r\n        className={classes.imgFade} \r\n        onClick={handleFadeClick}\r\n        draggable={false}\r\n      />\r\n      <SelectionArea\r\n        className={classes.area}\r\n        top={areaTop}\r\n        left={areaLeft}\r\n        width={areaWidth}\r\n        height={areaHeight}\r\n        imgWidth={width}\r\n        imgHeight={height}\r\n        src={imgSrc}\r\n        onHover={handleHover}\r\n        handleTagDrag={handleTagDrag}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst CropperStyled = withStyles(styles)(Cropper)\r\n\r\nexport { CropperStyled as Cropper }\r\n\r\nCropper.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  rotationDegree: PropTypes.number.isRequired,\r\n  imgSrc: PropTypes.string.isRequired,\r\n  onImageClick: PropTypes.func,\r\n  areaTop: PropTypes.number.isRequired,\r\n  areaLeft: PropTypes.number.isRequired,\r\n  areaWidth: PropTypes.number.isRequired,\r\n  areaHeight: PropTypes.number.isRequired,\r\n  /** Image reference */\r\n  imgRef: PropTypes.object.isRequired,\r\n  onRectUpdate: PropTypes.func,\r\n  /** Called each time area is updated */\r\n  onAreaUpdate: PropTypes.func.isRequired,\r\n  /** Called when empty faded point is clicked. Returns {x, y} absolute coordinates */\r\n  onFadedSpaceClick: PropTypes.func\r\n}","/** Get fixed allowed offset */\r\nexport const fixedMoveAreaOffset = ({\r\n  width,\r\n  height,\r\n  item,\r\n  initClientOffset,\r\n  currentClientOffset,\r\n  imgRef\r\n}) => {\r\n  // Get container data\r\n  let containerRect = imgRef.current.getBoundingClientRect()\r\n  /** Inintial area rect */\r\n  let areaRect = item\r\n  // Container dimensions\r\n  let containerWidth = width\r\n  let containerHeight = height\r\n  /** Initial cursor location */\r\n  let initOffset = initClientOffset\r\n  /** Current offset */\r\n  let currentOffset = currentClientOffset\r\n  /** Cursor absolute offset */\r\n  let cursorAbsoluteOffset = {\r\n    x: currentOffset.x - containerRect.left,\r\n    y: currentOffset.y - containerRect.top,\r\n  }\r\n  /** Area box absolute offset */\r\n  let areaAbsoluteOffset = {\r\n    left: cursorAbsoluteOffset.x - (initOffset.x - areaRect.left),\r\n    right: cursorAbsoluteOffset.x + (areaRect.right - initOffset.x),\r\n    top: cursorAbsoluteOffset.y - (initOffset.y - areaRect.top),\r\n    bottom: cursorAbsoluteOffset.y + (areaRect.bottom - initOffset.y)\r\n  }\r\n  /** Fixed left offset to be rendered */\r\n  let fixedAreaLeftOffset = areaAbsoluteOffset.left\r\n  if (areaAbsoluteOffset.left < 0)\r\n    fixedAreaLeftOffset = 0\r\n  else if (areaAbsoluteOffset.right > containerWidth)\r\n    fixedAreaLeftOffset = containerWidth - areaRect.width\r\n  /** Fixed top offset to be rendered */\r\n  let fixedAreaTopOffset = areaAbsoluteOffset.top\r\n  if (areaAbsoluteOffset.top < 0)\r\n    fixedAreaTopOffset = 0\r\n  else if (areaAbsoluteOffset.bottom > containerHeight + 1)\r\n    fixedAreaTopOffset = containerHeight - areaRect.height\r\n  // Move actual area\r\n  return {\r\n    top: fixedAreaTopOffset,\r\n    left: fixedAreaLeftOffset\r\n  }\r\n}","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport { Paper } from '../paper';\r\nimport { ReactComponent as RotateAntiClockwiseIcon } from '../../img/rotate_left.svg'\r\nimport { ReactComponent as RotateClockwiseIcon } from '../../img/rotate_right.svg'\r\nimport { ReactComponent as CloseIcon } from '../../img/close.svg'\r\nimport CatsImg from '../../img/cats.jpg'\r\nimport { Button } from '../button';\r\nimport styles from './imageCrop.styles'\r\nimport { Cropper } from './cropper';\r\nimport update from 'immutability-helper'\r\nimport { MAX_IMAGE_DIMENSION_LENGHT, MIN_IMAGE_DIMENSION_LENGHT, MIN_IMAGE_CROP_DIMENSION_LENGHT, ErrorTypes, MAX_RESIZE_RATIO, MIN_RESIZE_RATIO, FULL_IMAGE_SELECTION_THRESHOLD } from '../../helpers';\r\n\r\nconst getDefaultState = () => ({\r\n  /** Defines whether image was loaded and processed */\r\n  isImgSelected: false,\r\n  /** Reference to image DOM */\r\n  imgSrc: null,\r\n  /** Current rotation level */\r\n  imgRotationDegree: 0,\r\n  /** Image rectangle */\r\n  imgRef: React.createRef(),\r\n  /** Calculated width */\r\n  resizedImageWidth: null,\r\n  /** Calculated height */\r\n  resizedImageHeight: null,\r\n  area: {\r\n    top: 0,\r\n    left: 0,\r\n    width: MIN_IMAGE_DIMENSION_LENGHT,\r\n    height: MIN_IMAGE_DIMENSION_LENGHT,\r\n  }\r\n})\r\n\r\nclass ImageCrop extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    open: PropTypes.bool,\r\n    /** Callback on close button clicked */\r\n    onClose: PropTypes.func,\r\n    /** Callback on loading error provided with message */\r\n    onErrorLoadingImage: PropTypes.func\r\n  }\r\n\r\n  state = getDefaultState()\r\n  // Component refs\r\n  fileInputRef = React.createRef()\r\n  // Other props\r\n  reader = new FileReader()\r\n  image = new Image()\r\n\r\n  componentDidMount = () => {\r\n    // Process each next file loaded to reader\r\n    this.reader.addEventListener('load', () => {\r\n      // Load and preprocess image\r\n      this.image.src = this.reader.result\r\n    }, false)\r\n\r\n    // Process given image on load\r\n    this.image.onload = (e) => {\r\n      let originalWidth = this.image.width\r\n      let originalHeight = this.image.height\r\n      \r\n      // Check image aspect ration rules on load\r\n      if (\r\n        originalWidth / originalHeight <= 0.25 ||\r\n        originalWidth / originalHeight >= 3\r\n      ) {\r\n        this.props.onErrorLoadingImage &&\r\n          this.props.onErrorLoadingImage(ErrorTypes.WRONG_IMAGE_ASPECT_RATIO)\r\n        return\r\n      }\r\n      if (\r\n        originalWidth < MIN_IMAGE_DIMENSION_LENGHT ||\r\n        originalHeight < MIN_IMAGE_DIMENSION_LENGHT\r\n      ) {\r\n        this.props.onErrorLoadingImage &&\r\n          this.props.onErrorLoadingImage(ErrorTypes.IMAGE_TOO_SMALL)\r\n        return\r\n      }\r\n      // Resize exaggerated image\r\n      let aspectRatio\r\n      let resizedImageWidth = originalWidth\r\n      let resizedImageHeight = originalHeight\r\n      if (originalHeight > MAX_IMAGE_DIMENSION_LENGHT) {\r\n        aspectRatio = originalHeight / MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageHeight = MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageWidth = originalWidth / aspectRatio\r\n      }\r\n      if (resizedImageWidth > MAX_IMAGE_DIMENSION_LENGHT) {\r\n        aspectRatio = resizedImageWidth / MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageWidth = MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageHeight = resizedImageHeight / aspectRatio\r\n      }\r\n      // Set default image center\r\n      let initialAreaTop = resizedImageHeight / 2 - MIN_IMAGE_DIMENSION_LENGHT / 2\r\n      let initialAreaLeft = resizedImageWidth / 2 - MIN_IMAGE_DIMENSION_LENGHT / 2\r\n      let calculatedWidth = Math.min(MIN_IMAGE_DIMENSION_LENGHT, resizedImageWidth)\r\n      let calculatedHeight = Math.min(MIN_IMAGE_DIMENSION_LENGHT, resizedImageHeight)\r\n\r\n      // Select entire image if it is small enough\r\n      if (\r\n        resizedImageHeight / resizedImageWidth <= MAX_RESIZE_RATIO &&\r\n        resizedImageHeight / resizedImageWidth >= MIN_RESIZE_RATIO &&\r\n        resizedImageHeight <= MAX_IMAGE_DIMENSION_LENGHT &&\r\n        resizedImageWidth <= FULL_IMAGE_SELECTION_THRESHOLD\r\n      ) {\r\n        initialAreaTop = 0\r\n        initialAreaLeft = 0\r\n        calculatedWidth = resizedImageWidth\r\n        calculatedHeight = resizedImageHeight\r\n      }\r\n\r\n      this.setState({\r\n        area: update(this.state.area, {\r\n          top: { $set: initialAreaTop },\r\n          left: { $set: initialAreaLeft },\r\n          width: { $set: calculatedWidth },\r\n          height: { $set: calculatedHeight }\r\n        }),\r\n        resizedImageWidth,\r\n        resizedImageHeight,\r\n        imgSrc: this.image.src,\r\n        isImgSelected: true\r\n      })\r\n    }\r\n  }\r\n\r\n  /** Callback on close click */\r\n  handleClose = () => {\r\n    this.props.onClose &&\r\n      this.props.onClose()\r\n  }\r\n\r\n  /** Resets selected image */\r\n  handleGoBackClick = () => {\r\n    let defaultState = getDefaultState()\r\n    this.setState({\r\n      ...defaultState\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Converts loaded image to url and saves to state\r\n   */\r\n  handleSelectedImageChange = e => {\r\n    let file = this.fileInputRef.current.files[0]\r\n\r\n    if (file) {\r\n      this.reader.readAsDataURL(file)\r\n    }\r\n  }\r\n\r\n  /** Fires event on input[type='file'] when related button is clicked */\r\n  handleSelectFileClick = e => {\r\n    if (this.fileInputRef.current) {\r\n      this.fileInputRef.current.click()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Just.\r\n   * Handle.\r\n   * A cat.\r\n   */\r\n  handleCat = () => {\r\n    this.image.src = CatsImg\r\n  }\r\n\r\n  /** Transforms image for given degree diff */\r\n  handleRotateClick = deltaDegree => () => {\r\n    this.setState(oldState => ({\r\n      imgRotationDegree: oldState.imgRotationDegree + deltaDegree\r\n    }))\r\n  }\r\n\r\n  /** Update selected area properties*/\r\n  updateArea = (area) => {\r\n    this.setState({\r\n      area: update(this.state.area, { $merge: area })\r\n    })\r\n  }\r\n  \r\n  /** Replace current area with new one */\r\n  handleFadedSpaceClick = ({x, y}) => {\r\n    const { \r\n      resizedImageHeight,\r\n      resizedImageWidth\r\n     } = this.state\r\n    // Fix top offset\r\n    let fixedTop = y - MIN_IMAGE_CROP_DIMENSION_LENGHT / 2\r\n    if (fixedTop < 0)\r\n      fixedTop = 0\r\n    else if (fixedTop > resizedImageHeight - MIN_IMAGE_CROP_DIMENSION_LENGHT)\r\n      fixedTop = resizedImageHeight - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    // Fixed left offset\r\n    let fixedLeft = x - MIN_IMAGE_CROP_DIMENSION_LENGHT / 2\r\n    if (fixedLeft < 0)\r\n     fixedLeft = 0\r\n    else if (fixedLeft > resizedImageWidth - MIN_IMAGE_CROP_DIMENSION_LENGHT)\r\n      fixedLeft = resizedImageWidth - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    \r\n    this.updateArea({\r\n      top: fixedTop,\r\n      left: fixedLeft,\r\n      width: MIN_IMAGE_CROP_DIMENSION_LENGHT,\r\n      height: MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    })\r\n  }\r\n  \r\n  /** Update image reference */\r\n  handleCropperRectUpdate = ref => {\r\n    this.setState({\r\n      imgRef: ref\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      classes,\r\n      title,\r\n    } = this.props\r\n\r\n    const { \r\n      isImgSelected,\r\n      imgSrc,\r\n      imgRotationDegree,\r\n      area,\r\n      resizedImageHeight,\r\n      resizedImageWidth,\r\n      imgRef\r\n    } = this.state\r\n\r\n    // Next code block ensures that image is being rotated \r\n    // and, if it is, adjusts margin of wrapper\r\n    let imgWidthHeightDelta = 0\r\n    if (imgRef.current) {\r\n      let isRotated = Boolean((imgRotationDegree / 90) % 2)\r\n      \r\n      if (isRotated) {\r\n        imgWidthHeightDelta = Math.abs(\r\n          imgRef.current.clientWidth - \r\n          imgRef.current.clientHeight\r\n        )\r\n      }\r\n    }\r\n\r\n    let outerImageContainerStyle = {\r\n      margin: `${imgWidthHeightDelta / 2 + 35}px auto`,\r\n      width: resizedImageWidth,\r\n      height: resizedImageHeight\r\n    }\r\n    return (\r\n      <Paper className={classes.root}>\r\n        <div className={classes.title}>\r\n          <span className={classes.titleText}>\r\n            {title}\r\n          </span>\r\n          <div className={classes.close}>\r\n            <CloseIcon onClick={this.handleClose}/>\r\n          </div>\r\n        </div>\r\n        <div className={classes.cropWrap}>\r\n          {\r\n            isImgSelected ? (\r\n            <div>\r\n              <div className={classes.descriptionWrap}>\r\n                Выберите область изображения\r\n              </div>\r\n              <div \r\n                className={classes.outerImage}\r\n                style={outerImageContainerStyle}\r\n                draggable={false}\r\n              >\r\n                <Cropper\r\n                  height={resizedImageHeight}\r\n                  width={resizedImageWidth}\r\n                  areaTop={area.top}\r\n                  areaLeft={area.left}\r\n                  areaHeight={area.height}\r\n                  areaWidth={area.width}\r\n                  imgSrc={imgSrc}\r\n                  imgRef={imgRef}\r\n                  rotationDegree={imgRotationDegree}\r\n                  onRectUpdate={this.handleCropperRectUpdate}\r\n                  onAreaUpdate={this.updateArea}\r\n                  onFadedSpaceClick={this.handleFadedSpaceClick}\r\n                />\r\n                <div className={classes.rotationButtons} draggable={false}>\r\n                  <RotateAntiClockwiseIcon\r\n                    className={classes.rotateClockwise}\r\n                    onClick={this.handleRotateClick(-90)}\r\n                  />\r\n                  <RotateClockwiseIcon\r\n                    className={classes.rotateAntiClockwise}\r\n                    onClick={this.handleRotateClick(90)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className={classes.bottomLine} />\r\n              <div className={classes.footer}>\r\n                <Button className={classes.btn}>Сохранить</Button>\r\n                <Button onClick={this.handleGoBackClick}>Назад</Button>\r\n              </div>\r\n            </div>\r\n            ) : (\r\n              <div className={classes.footer}>\r\n                <Button \r\n                  onClick={this.handleSelectFileClick}\r\n                  className={classes.btn}\r\n                >\r\n                  Выбрать фото\r\n                </Button>\r\n                <Button onClick={this.handleCat}>\r\n                  Выбрать кота\r\n                </Button>\r\n                <input \r\n                  ref={this.fileInputRef} \r\n                  className={classes.input}\r\n                  type='file' \r\n                  onChange={this.handleSelectedImageChange} \r\n                />\r\n              </div>\r\n            )\r\n          }\r\n        </div>\r\n      </Paper>\r\n    )\r\n  }\r\n}\r\n\r\nconst ImageCropStyled = withStyles(styles)(ImageCrop)\r\n\r\nexport { ImageCropStyled as ImageCrop }","export default {\r\n  root: {\r\n    width: 654,\r\n    display: 'flex',\r\n    flexFlow: 'column'\r\n  },\r\n  title: {\r\n    minHeight: 54,\r\n    paddingLeft: 25,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    borderBottom: '1px solid #86838357',\r\n    backgroundColor: '#f2f5f7',\r\n    borderTopLeftRadius: 4,\r\n    borderTopRightRadius: 4\r\n  },\r\n  descriptionWrap: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginBottom: 35,\r\n    userSelect: 'none'\r\n  },\r\n  cropWrap: {\r\n    padding: '32px 20px 20px',\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n  outerImage: {\r\n    position: 'relative'\r\n  },\r\n  rotateClockwise: {\r\n    fill: '#ffffff99',\r\n    position: 'absolute',\r\n    bottom: 5,\r\n    right: 24,\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      fill: '#fff'\r\n    }\r\n  },\r\n  rotateAntiClockwise: {\r\n    extend: 'rotateClockwise',\r\n    right: 0\r\n  },\r\n  rotationButtons: {\r\n    position: 'absolute',\r\n    right: 0,\r\n    bottom: 0\r\n  },\r\n  previewImage: {\r\n    userSelect: 'none',\r\n  },\r\n  input: {\r\n    display: 'none'\r\n  },\r\n  bottomLine: {\r\n    borderBottom: '1px solid #86838357',\r\n    marginBottom: 25\r\n  },\r\n  imgFade: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: '#000',\r\n    opacity: 0.7\r\n  },\r\n  titleText: {\r\n    flexGrow: 1\r\n  },\r\n  close: {\r\n    padding: '21px 25px 21px 12px',\r\n    fill: '#7b95b5',\r\n    cursor: 'pointer',\r\n    opacity: .75,\r\n    '&:hover': {\r\n      opacity: 1\r\n    }\r\n  },\r\n  footer: {\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n  btn: {\r\n    marginRight: 25\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport { ImageCrop } from './components/imageCrop';\r\nimport { DragDropContextProvider } from 'react-dnd';\r\nimport HTML5Backend from 'react-dnd-html5-backend';\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <DragDropContextProvider backend={HTML5Backend}>\r\n        <div className=\"App\">\r\n          <header className=\"App-header\">\r\n            <ImageCrop \r\n              title='Выберите фотографию'\r\n              onClose={this.handleToggleButton}\r\n              onErrorLoadingImage={this.handleErrorLoading}\r\n            />\r\n          </header>\r\n        </div>\r\n      </DragDropContextProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/cats.46b11cf1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/empty.b6229967.svg\";"],"sourceRoot":""}