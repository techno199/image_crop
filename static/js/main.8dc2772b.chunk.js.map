{"version":3,"sources":["components/paper/index.js","img/rotate_left.svg","img/rotate_right.svg","img/close.svg","components/button/index.js","helpers/index.js","components/imageCrop/selectionArea/index.js","components/imageCrop/tags/tag/index.js","components/imageCrop/tags/index.js","components/imageCrop/cropper/resizeArea.js","components/imageCrop/cropper/index.js","components/imageCrop/cropper/moveArea.js","components/imageCrop/index.js","components/imageCrop/imageCrop.styles.js","components/modal/index.js","App.js","serviceWorker.js","index.js","img/cats.jpg"],"names":["Paper","_this$props","this","props","children","classes","className","other","Object","objectWithoutProperties","react_default","a","createElement","assign","classNames","root","Fragment","Component","PaperStyled","withStyles","backgroundColor","borderRadius","color","boxShadow","_extends","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","d","fill","_ref3","rotate_left_SvgRotateLeft","_ref","svgRef","width","height","viewBox","ref","ForwardRef","forwardRef","__webpack_require__","p","rotate_right_extends","rotate_right_objectWithoutProperties","rotate_right_objectWithoutPropertiesLoose","rotate_right_ref2","rotate_right_ref3","rotate_right_SvgRotateRight","rotate_right_ForwardRef","close_extends","close_objectWithoutProperties","close_objectWithoutPropertiesLoose","close_ref2","close_ref3","close_SvgClose","close_ForwardRef","Button","ButtonStyled","outline","padding","minWidth","fontSize","display","justifyContent","border","cursor","&:hover","&:active","paddingTop","paddingBottom","ItemTypes","TagTypes","NW","N","NE","W","E","SW","S","SE","ErrorTypes","WRONG_IMAGE_ASPECT_RATIO","IMAGE_TOO_SMALL","MAX_IMAGE_DIMENSION_LENGHT","MIN_IMAGE_DIMENSION_LENGHT","MIN_IMAGE_CROP_DIMENSION_LENGHT","SelectionArea","areaRef","React","createRef","top","left","connectDragPreview","connectDragSource","src","imgWidth","imgHeight","areaStyles","imgStyles","marginTop","marginLeft","getEmptyImage","style","imgWrap","SelectionAreaHOC","DragSource","beginDrag","monitor","component","rect","current","getBoundingClientRect","right","bottom","connect","dragSource","dragPreview","SelectionAreaStyled","position","overflow","styles","opacity","transition","nw","n","concat","TAG_WIDTH","ne","e","se","s","sw","w","Tag","state","tagName","componentDidMount","_this","type","setState","hightlightStyle","isHighlighted","TagHOC","TagStyled","Tags","shouldComponentUpdate","nextProps","isDragging","tags","map","TagsStyled","getFixedBottomDelta","areaTop","areaWidth","areaHeight","cursorAbsoluteOffset","bottomAbsoluteOffsetInterval","max","Math","min","fixedBottomOffset","y","getFixedRightDelta","areaLeft","rightAbsoluteOffsetInterval","fixedRightOffset","x","getFixedLeftDelta","leftAbsoluteOffsetInterval","fixedLeftOffset","getFixedTopDelta","topAbsoluteOffsetInterval","fixedTopOffset","CropperHOC","DropTarget","hover","imgRef","getItemType","containerRect","areaRect","getItem","containerWidth","containerHeight","initOffset","getInitialClientOffset","currentOffset","getClientOffset","areaAbsoluteOffset","fixedAreaLeftOffset","fixedAreaTopOffset","onAreaUpdate","moveArea","tagType","console","log","resizeArea","connectDropTarget","dropTarget","isOver","rotationDegree","imgSrc","onRectUpdate","onFadedSpaceClick","useRef","handleFadeClick","useCallback","clientX","clientY","useEffect","innerImageContainerStyle","transform","imgStyle","img","alt","imgFade","onClick","area","CropperStyled","userSelect","ImageCrop","isImgSelected","imgRotationDegree","resizedImageWidth","resizedImageHeight","fileInputRef","reader","FileReader","image","Image","addEventListener","result","onload","originalWidth","originalHeight","onErrorLoadingImage","aspectRatio","initialAreaTop","initialAreaLeft","update","$set","handleClose","onClose","handleGoBackClick","handleSelectedImageChange","file","files","readAsDataURL","handleSelectFileClick","click","handleCat","CatsImg","handleRotateClick","deltaDegree","oldState","updateArea","$merge","handleFadedSpaceClick","_this$state","fixedTop","fixedLeft","handleCropperRectUpdate","title","_this$state2","imgWidthHeightDelta","Boolean","abs","clientWidth","clientHeight","outerImageContainerStyle","margin","titleText","close","cropWrap","descriptionWrap","outerImage","rotationButtons","rotateClockwise","rotateAntiClockwise","bottomLine","footer","btn","input","onChange","ImageCropStyled","flexFlow","minHeight","paddingLeft","alignItems","borderBottom","borderTopLeftRadius","borderTopRightRadius","marginBottom","extend","previewImage","flexGrow","marginRight","Modal","backgroundRef","handleOuterClick","onOuterClick","open","onMouseDown","App","background","cjs","backend","HTML5Backend","handleToggleButton","handleErrorLoading","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.8dc2772b.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport classNames from 'classnames'\r\n\r\nconst styles = {\r\n  root: {\r\n    backgroundColor: '#fff',\r\n    borderRadius: 4,\r\n    color: '#000',\r\n    boxShadow: '0px 1px 3px 0px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 2px 1px -1px rgba(0,0,0,0.12)'\r\n  }\r\n}\r\n\r\nclass Paper extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      children,\r\n      classes,\r\n      className,\r\n      ...other\r\n    } = this.props\r\n    \r\n    return (\r\n      <div className={classNames([classes.root, className])} {...other}>\r\n        <React.Fragment>\r\n          {children}\r\n        </React.Fragment>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst PaperStyled = withStyles(styles)(Paper)\r\n\r\nexport { PaperStyled as Paper }","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z\"\n});\n\nvar SvgRotateLeft = function SvgRotateLeft(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgRotateLeft, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/rotate_left.92a114e8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z\"\n});\n\nvar SvgRotateRight = function SvgRotateRight(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgRotateRight, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/rotate_right.bd9c45d6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.777b93c6.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport classNames from 'classnames'\r\n\r\nconst styles = {\r\n  root: {\r\n    outline: 'none',\r\n    padding: '7px 16px 8px',\r\n    backgroundColor: '#5181b8',\r\n    color: '#fff',\r\n    minWidth: 170,\r\n    borderRadius: 4,\r\n    fontSize: 12.5,\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    border: 'none',\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      backgroundColor: '#5b88bd'\r\n    },\r\n    '&:active': {\r\n      backgroundColor: '#4872a3',\r\n      paddingTop: 8,\r\n      paddingBottom: 7\r\n    }\r\n  }\r\n}\r\n\r\nclass Button extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      classes,\r\n      children,\r\n      className,\r\n      ...other\r\n     } = this.props\r\n\r\n    return (\r\n      <button\r\n        className={classNames([classes.root, className])} \r\n        {...other}\r\n      >\r\n        {children}\r\n      </button>\r\n    )\r\n  }\r\n}\r\n\r\nconst ButtonStyled = withStyles(styles)(Button)\r\n\r\nexport { ButtonStyled as Button }","export const ItemTypes = {\r\n  BOX: 'BOX',\r\n  TAG: 'TAG'\r\n}\r\n\r\nexport const TagTypes = {\r\n  NW: 'NW',\r\n  N: 'N',\r\n  NE: 'NE',\r\n  W: 'W',\r\n  E: 'E',\r\n  SW: 'SW',\r\n  S: 'S',\r\n  SE: 'SE'\r\n}\r\n\r\nexport const ErrorTypes = {\r\n  WRONG_IMAGE_ASPECT_RATIO: 'WRONG_IMAGE_ASPECT_RATIO',\r\n  IMAGE_TOO_SMALL: 'IMAGE_TOO_SMALL'\r\n}\r\n\r\n/** How many height's can maximum width contain */\r\nexport const MAX_RESIZE_RATIO = 1\r\n/** How many height's can minimum width contain */\r\nexport const MIN_RESIZE_RATIO = 1/1.5\r\n/** Maximum image markup width or height */\r\nexport const MAX_IMAGE_DIMENSION_LENGHT = 604\r\n/** Minimum image markup width or height */\r\nexport const MIN_IMAGE_DIMENSION_LENGHT = 200\r\n/** Minimum crop area width or height */\r\nexport const MIN_IMAGE_CROP_DIMENSION_LENGHT = 100","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport { ItemTypes } from '../../../helpers';\r\nimport { DragSource } from 'react-dnd';\r\nimport { getEmptyImage } from 'react-dnd-html5-backend';\r\nimport classNames from 'classnames'\r\n\r\nconst styles = {\r\n  root: {\r\n    position: 'absolute',\r\n    cursor: 'move'\r\n  },\r\n  imgWrap: {\r\n    overflow: 'hidden',\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0\r\n  }\r\n}\r\n\r\nclass SelectionArea extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    /** Describes absolute top offset */\r\n    top: PropTypes.number.isRequired,\r\n    /** Describes absolute left offset */\r\n    left: PropTypes.number.isRequired,\r\n    /** Area width */\r\n    width: PropTypes.number.isRequired,\r\n    /** Area height */\r\n    height: PropTypes.number.isRequired,\r\n    /** Classes to be merged */\r\n    className: PropTypes.string,\r\n    /** Image source */\r\n    src: PropTypes.string.isRequired,\r\n    /** Image width */\r\n    imgWidth: PropTypes.number.isRequired,\r\n    /** Image height */\r\n    imgHeight: PropTypes.number.isRequired\r\n  }\r\n\r\n  areaRef = React.createRef()\r\n\r\n  render() {\r\n    const { \r\n      top,\r\n      left,\r\n      width,\r\n      height,\r\n      classes,\r\n      connectDragPreview,\r\n      connectDragSource,\r\n      className,\r\n      src,\r\n      imgWidth,\r\n      imgHeight,\r\n      ...other\r\n     } = this.props\r\n\r\n    const areaStyles = {\r\n      top,\r\n      left,\r\n      width,\r\n      height\r\n    }\r\n    const imgStyles = {\r\n      width: imgWidth,\r\n      height: imgHeight,\r\n      marginTop: -top,\r\n      marginLeft: -left,\r\n    }\r\n\r\n    connectDragPreview(getEmptyImage())\r\n\r\n    return connectDragSource(\r\n      <div \r\n        style={areaStyles}\r\n        className={classNames([classes.root, className])}\r\n        ref={this.areaRef}\r\n        {...other}\r\n      >\r\n        <div className={classes.imgWrap}>\r\n          <img \r\n            style={imgStyles}\r\n            src={src}\r\n          />\r\n        </div>\r\n        {this.props.children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst SelectionAreaHOC = DragSource(\r\n  ItemTypes.BOX,\r\n  {\r\n    beginDrag: (props, monitor, component) => {\r\n      let rect = component.areaRef.current.getBoundingClientRect()\r\n      return {\r\n        top: rect.top,\r\n        right: rect.right,\r\n        left: rect.left,\r\n        bottom: rect.bottom,\r\n        width: props.width,\r\n        height: props.height\r\n      }\r\n    }\r\n  },\r\n  (connect, monitor) => ({\r\n    connectDragSource: connect.dragSource(),\r\n    connectDragPreview: connect.dragPreview()\r\n  })\r\n)(SelectionArea)\r\n\r\nconst SelectionAreaStyled = withStyles(styles)(SelectionAreaHOC)\r\n\r\nexport { SelectionAreaStyled as SelectionArea }","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { DragSource } from 'react-dnd';\r\nimport { ItemTypes, TagTypes } from '../../../../helpers';\r\nimport withStyles from 'react-jss'\r\nimport classNames from 'classnames'\r\nimport { getEmptyImage } from 'react-dnd-html5-backend'\r\n\r\nexport const TAG_WIDTH = 10\r\n\r\nconst styles = {\r\n  root: {\r\n    width: TAG_WIDTH,\r\n    height: TAG_WIDTH,\r\n    backgroundColor: '#f2f2f2',\r\n    opacity: 0.3,\r\n    position: 'absolute',\r\n    transition: '.1s'\r\n  },\r\n  nw: {\r\n    top: -TAG_WIDTH / 2,\r\n    left: -TAG_WIDTH / 2,\r\n    cursor: 'nw-resize'\r\n  },\r\n  n: {\r\n    top: - TAG_WIDTH / 2,\r\n    left: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'n-resize'\r\n  },\r\n  ne: {\r\n    top: -TAG_WIDTH / 2,\r\n    left: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'ne-resize'\r\n  },\r\n  e: {\r\n    top: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    left: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'e-resize'\r\n  },\r\n  se: {\r\n    top: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    left: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'se-resize'\r\n  },\r\n  s: {\r\n    top: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    left: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 's-resize'\r\n  },\r\n  sw: {\r\n    top: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    left: -TAG_WIDTH / 2,\r\n    cursor: 'sw-resize'\r\n  },\r\n  w: {\r\n    top: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    left: -TAG_WIDTH / 2,\r\n    cursor: 'w-resize'\r\n  }\r\n}\r\n\r\nclass Tag extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object,\r\n    connectDragSource: PropTypes.func.isRequired,\r\n    connectDragPreview: PropTypes.func.isRequired,\r\n    /** Defines tag type */\r\n    type: PropTypes.string.isRequired,\r\n    /** Highlight square */\r\n    isHighlighted: PropTypes.bool\r\n  }\r\n\r\n  state = {\r\n    tagName: ''\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    switch (this.props.type){\r\n      case TagTypes.NW:\r\n        this.setState({\r\n          tagName: this.props.classes.nw\r\n        })\r\n        break\r\n      case TagTypes.N:\r\n        this.setState({\r\n          tagName: this.props.classes.n\r\n        })\r\n        break\r\n      case TagTypes.NE:\r\n        this.setState({\r\n          tagName: this.props.classes.ne\r\n        })\r\n        break\r\n      case TagTypes.E:\r\n        this.setState({\r\n          tagName: this.props.classes.e\r\n        })\r\n        break\r\n      case TagTypes.SE:\r\n        this.setState({\r\n          tagName: this.props.classes.se\r\n        })\r\n        break\r\n      case TagTypes.S:\r\n        this.setState({\r\n          tagName: this.props.classes.s\r\n        })\r\n        break\r\n      case TagTypes.SW:\r\n        this.setState({\r\n          tagName: this.props.classes.sw\r\n        })\r\n        break\r\n      case TagTypes.W:\r\n        this.setState({\r\n          tagName: this.props.classes.w\r\n        })\r\n        break\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      connectDragSource,\r\n      connectDragPreview,\r\n      classes,\r\n      isHighlighted,\r\n    } = this.props\r\n    // Replace default stab with empty image\r\n    connectDragPreview(getEmptyImage())\r\n    let hightlightStyle\r\n    if (isHighlighted)\r\n      hightlightStyle = {\r\n        opacity: .7\r\n      }\r\n    \r\n    return connectDragSource(\r\n      <div\r\n        className={classNames([classes.root, this.state.tagName])}\r\n        style={hightlightStyle}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nconst TagHOC = DragSource(\r\n  ItemTypes.TAG,\r\n  {\r\n    beginDrag: props => {\r\n      return {\r\n        type: props.type\r\n      }\r\n    }\r\n  },\r\n  connect => ({\r\n    connectDragSource: connect.dragSource(),\r\n    connectDragPreview: connect.dragPreview()\r\n  })\r\n)(Tag)\r\n\r\nconst TagStyled = withStyles(styles)(TagHOC)\r\n\r\nexport { TagStyled as Tag }\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\nimport withStyles from 'react-jss'\r\nimport { DragSource } from 'react-dnd';\r\nimport { ItemTypes, TagTypes } from '../../../helpers';\r\nimport { Tag, TAG_WIDTH } from './tag';\r\n\r\nconst styles = {\r\n\r\n}\r\n\r\nclass Tags extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    /** Selected area width */\r\n    width: PropTypes.number.isRequired,\r\n    /** Selected area height */\r\n    height: PropTypes.number.isRequired,\r\n    /** Hightlight squares when area is being dragged */\r\n    isDragging: PropTypes.bool\r\n  }\r\n\r\n  shouldComponentUpdate = (nextProps) => {\r\n    // Huge performance improvement\r\n    if (\r\n      this.props.width === nextProps.width &&\r\n      this.props.height === nextProps.height &&\r\n      this.props.isDragging === nextProps.isDragging\r\n    ) return false\r\n    return true\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      classes,\r\n      className,\r\n      width,\r\n      height,\r\n      connectDragSource,\r\n      isDragging,\r\n      ...other\r\n    } = this.props\r\n    let tags = Object.keys(TagTypes).map(type => TagTypes[type])\r\n    \r\n    return (\r\n      <div {...other}>\r\n        {\r\n          tags.map(type => (\r\n            <Tag \r\n              key={type}\r\n              type={type}\r\n              isHighlighted={isDragging}\r\n            />\r\n          ))\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst TagsStyled = withStyles(styles)(Tags)\r\n\r\nexport { TagsStyled as Tags }\r\n","import { TagTypes, MIN_IMAGE_CROP_DIMENSION_LENGHT, MIN_RESIZE_RATIO, MAX_RESIZE_RATIO } from \"../../../helpers\";\r\n\r\nexport const resizeArea = (props, monitor) => {\r\n  let {\r\n    areaTop,\r\n    areaLeft,\r\n    areaHeight,\r\n    areaWidth,\r\n    width,\r\n    onAreaUpdate,\r\n    height,\r\n    imgRef\r\n  } = props\r\n\r\n  let rect = imgRef.current.getBoundingClientRect()\r\n  /** Currently dragged tag type */\r\n  let tagType = monitor.getItem().type\r\n  /** Current offset */\r\n  let currentOffset = monitor.getClientOffset()\r\n  /** Cursor absolute offset*/\r\n  let cursorAbsoluteOffset = {\r\n    x: currentOffset.x - rect.left,\r\n    y: currentOffset.y - rect.top,\r\n  }\r\n  console.log(`{x: ${rect.left};y: ${rect.top}}`)\r\n\r\n  // Move around respecting currenlty selected tag\r\n  switch (tagType) {\r\n    case TagTypes.NW: {\r\n      onAreaUpdate({\r\n        top: areaTop - getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        left: areaLeft - getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        width: areaWidth + getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        height: areaHeight + getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }      \r\n    case TagTypes.N: {\r\n      onAreaUpdate({\r\n        top: areaTop - getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        height: areaHeight + getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.NE: {\r\n      onAreaUpdate({\r\n        top: areaTop - getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        width: areaWidth - getFixedRightDelta(width, areaLeft, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        height: areaHeight + getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.E: {\r\n      onAreaUpdate({\r\n        width: areaWidth - getFixedRightDelta(width, areaLeft, areaHeight, areaWidth, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.SE: {\r\n      onAreaUpdate({\r\n        width: areaWidth - getFixedRightDelta(width, areaLeft, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        height: areaHeight - getFixedBottomDelta(height, areaTop, areaWidth, areaHeight, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.S: {\r\n      onAreaUpdate({\r\n        height: areaHeight - getFixedBottomDelta(height, areaTop, areaWidth, areaHeight, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.SW: {\r\n      onAreaUpdate({\r\n        left: areaLeft - getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        height: areaHeight - getFixedBottomDelta(height, areaTop, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        width: areaWidth + getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset)\r\n      })\r\n    }\r\n    case TagTypes.W: {\r\n      onAreaUpdate({\r\n        left: areaLeft - getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        width: areaWidth + getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset)\r\n      })\r\n    }\r\n    default:\r\n      break\r\n  }\r\n}\r\n\r\nconst getFixedBottomDelta = (height, areaTop, areaWidth, areaHeight, cursorAbsoluteOffset) => {\r\n  // Get possible interval for bottom side\r\n  let bottomAbsoluteOffsetInterval = {\r\n    max: Math.min(\r\n      height,\r\n      areaTop + areaWidth / MIN_RESIZE_RATIO\r\n    ),\r\n    min: Math.max(\r\n      areaTop + areaWidth / MAX_RESIZE_RATIO,\r\n      areaTop + MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset\r\n  let fixedBottomOffset = cursorAbsoluteOffset.y\r\n  if (cursorAbsoluteOffset.y > bottomAbsoluteOffsetInterval.max)\r\n    fixedBottomOffset = bottomAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.y < bottomAbsoluteOffsetInterval.min)\r\n    fixedBottomOffset = bottomAbsoluteOffsetInterval.min\r\n  return areaTop + areaHeight - fixedBottomOffset\r\n}\r\n\r\nconst getFixedRightDelta = (width, areaLeft, areaHeight, areaWidth, cursorAbsoluteOffset) => {\r\n  // Get possible interval for right side\r\n  let rightAbsoluteOffsetInterval = {\r\n    max: Math.min(\r\n      width,\r\n      areaLeft + areaHeight * MAX_RESIZE_RATIO\r\n    ),\r\n    min: Math.max(\r\n      areaLeft + areaHeight * MIN_RESIZE_RATIO,\r\n      areaLeft + MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset\r\n  let fixedRightOffset = cursorAbsoluteOffset.x\r\n  if (cursorAbsoluteOffset.x > rightAbsoluteOffsetInterval.max)\r\n    fixedRightOffset = rightAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.x < rightAbsoluteOffsetInterval.min)\r\n    fixedRightOffset = rightAbsoluteOffsetInterval.min\r\n  return areaLeft + areaWidth - fixedRightOffset\r\n}\r\n\r\nconst getFixedLeftDelta = (areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset) => {\r\n  // Get possible interval for left side\r\n  let leftAbsoluteOffsetInterval = {\r\n    max: Math.max(\r\n      0, \r\n      areaLeft + areaWidth - areaHeight * MAX_RESIZE_RATIO\r\n    ),\r\n    min: Math.min(\r\n      areaLeft + areaWidth - areaHeight * MIN_RESIZE_RATIO,\r\n      areaLeft + areaWidth - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset based on interval\r\n  let fixedLeftOffset = cursorAbsoluteOffset.x\r\n  if (cursorAbsoluteOffset.x < leftAbsoluteOffsetInterval.max)\r\n    fixedLeftOffset = leftAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.x > leftAbsoluteOffsetInterval.min)\r\n    fixedLeftOffset = leftAbsoluteOffsetInterval.min\r\n  return areaLeft - fixedLeftOffset\r\n}\r\n\r\nconst getFixedTopDelta = (areaTop, areaHeight, areaWidth, cursorAbsoluteOffset) => {\r\n  // Get possible absolute interval for top side\r\n  let topAbsoluteOffsetInterval = {\r\n    max: Math.max(\r\n      0,\r\n      areaTop + areaHeight - areaWidth / MIN_RESIZE_RATIO\r\n    ),\r\n    min: Math.min(\r\n      areaTop + areaHeight - areaWidth / MAX_RESIZE_RATIO,\r\n      areaTop + areaHeight - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset based on interval\r\n  let fixedTopOffset = cursorAbsoluteOffset.y\r\n  if (cursorAbsoluteOffset.y < topAbsoluteOffsetInterval.max)\r\n    fixedTopOffset = topAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.y > topAbsoluteOffsetInterval.min)\r\n    fixedTopOffset = topAbsoluteOffsetInterval.min\r\n  return areaTop - fixedTopOffset\r\n}","import React, { useRef, useEffect, useCallback } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport { SelectionArea } from '../selectionArea';\r\nimport { Tags } from '../tags';\r\nimport { DropTarget } from 'react-dnd';\r\nimport { ItemTypes } from '../../../helpers';\r\nimport { moveArea } from './moveArea';\r\nimport { resizeArea } from './resizeArea';\r\n\r\nconst styles = {\r\n  img: {\r\n    userSelect: 'none'\r\n  },\r\n  imgFade: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: '#000',\r\n    opacity: 0.7,\r\n    cursor: 'crosshair'\r\n  }\r\n}\r\n\r\nconst Cropper = ({\r\n  classes,\r\n  width,\r\n  height,\r\n  rotationDegree,\r\n  imgSrc,\r\n  areaTop,\r\n  areaLeft,\r\n  areaWidth,\r\n  areaHeight,\r\n  onRectUpdate,\r\n  connectDropTarget,\r\n  isOver,\r\n  onFadedSpaceClick\r\n}) => {\r\n  // image ref\r\n  const imgRef = useRef(null)\r\n\r\n  /**Occurs on faded cropper part clicked */\r\n  const handleFadeClick = useCallback(\r\n    (e) => {\r\n      let rect = imgRef.current.getBoundingClientRect()\r\n      onFadedSpaceClick &&\r\n        onFadedSpaceClick({\r\n          x: e.clientX - rect.left,\r\n          y: e.clientY - rect.top\r\n        })\r\n    }\r\n  )\r\n  // Update image ref on every new image\r\n  useEffect(() => {\r\n    return () => {\r\n      if (imgRef.current) {\r\n        onRectUpdate &&\r\n          onRectUpdate(imgRef)\r\n      }\r\n    };\r\n  }, [imgRef.current])\r\n  // Custom styles\r\n  const innerImageContainerStyle = {\r\n    transform: `rotate(${rotationDegree}deg)`,\r\n    width,\r\n    height\r\n  }\r\n  const imgStyle = {\r\n    width,\r\n    height\r\n  }\r\n  \r\n  return connectDropTarget(\r\n    <div style={innerImageContainerStyle}>\r\n      <img\r\n        style={imgStyle}\r\n        className={classes.img}\r\n        src={imgSrc}\r\n        ref={imgRef} \r\n        alt='Preview' \r\n      />\r\n      <div \r\n        className={classes.imgFade} \r\n        onClick={handleFadeClick}\r\n      />\r\n      <SelectionArea\r\n        className={classes.area}\r\n        top={areaTop}\r\n        left={areaLeft}\r\n        width={areaWidth}\r\n        height={areaHeight}\r\n        imgWidth={width}\r\n        imgHeight={height}\r\n        src={imgSrc}\r\n      >\r\n        <Tags \r\n          width={areaWidth}\r\n          height={areaHeight}\r\n          isDragging={isOver}\r\n        />\r\n      </SelectionArea>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst CropperHOC = DropTarget(\r\n  [\r\n    ItemTypes.BOX,\r\n    ItemTypes.TAG\r\n  ],\r\n  {\r\n    hover: (props, monitor) => {\r\n      if (!props.imgRef) return\r\n      switch (monitor.getItemType()) {\r\n        case ItemTypes.BOX:\r\n            moveArea(props, monitor)\r\n          break;\r\n        case ItemTypes.TAG: {\r\n          resizeArea(props, monitor)\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n  },\r\n  (connect, monitor) => ({\r\n    connectDropTarget: connect.dropTarget(),\r\n    isOver: monitor.isOver()\r\n  })\r\n)(Cropper)\r\n\r\nconst CropperStyled = withStyles(styles)(CropperHOC)\r\n\r\nexport { CropperStyled as Cropper }\r\n\r\nCropper.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  rotationDegree: PropTypes.number.isRequired,\r\n  imgSrc: PropTypes.string.isRequired,\r\n  onImageClick: PropTypes.func,\r\n  areaTop: PropTypes.number.isRequired,\r\n  areaLeft: PropTypes.number.isRequired,\r\n  areaWidth: PropTypes.number.isRequired,\r\n  areaHeight: PropTypes.number.isRequired,\r\n  rect: PropTypes.object,\r\n  onRectUpdate: PropTypes.func,\r\n  /** Called each time area is updated */\r\n  onAreaUpdate: PropTypes.func.isRequired,\r\n  /** Called when empty faded point is clicked. Returns {x, y} absolute coordinates */\r\n  onFadedSpaceClick: PropTypes.func\r\n}","/** Describes the rules for area movement */\r\nexport const moveArea = (props, monitor) => {\r\n  // Get container data\r\n  let containerRect = props.imgRef.current.getBoundingClientRect()\r\n  /** Inintial area rect */\r\n  let areaRect = monitor.getItem()\r\n  // Container dimensions\r\n  let containerWidth = props.width\r\n  let containerHeight = props.height\r\n  /** Initial cursor location */\r\n  let initOffset = monitor.getInitialClientOffset()\r\n  /** Current offset */\r\n  let currentOffset = monitor.getClientOffset()\r\n  /** Cursor absolute offset */\r\n  let cursorAbsoluteOffset = {\r\n    x: currentOffset.x - containerRect.left,\r\n    y: currentOffset.y - containerRect.top,\r\n  }\r\n  /** Area box absolute offset */\r\n  let areaAbsoluteOffset = {\r\n    left: cursorAbsoluteOffset.x - (initOffset.x - areaRect.left),\r\n    right: cursorAbsoluteOffset.x + (areaRect.right - initOffset.x),\r\n    top: cursorAbsoluteOffset.y - (initOffset.y - areaRect.top),\r\n    bottom: cursorAbsoluteOffset.y + (areaRect.bottom - initOffset.y)\r\n  }\r\n  /** Fixed left offset to be rendered */\r\n  let fixedAreaLeftOffset = areaAbsoluteOffset.left\r\n  if (areaAbsoluteOffset.left < 0)\r\n    fixedAreaLeftOffset = 0\r\n  else if (areaAbsoluteOffset.right > containerWidth)\r\n    fixedAreaLeftOffset = containerWidth - areaRect.width\r\n  /** Fixed top offset to be rendered */\r\n  let fixedAreaTopOffset = areaAbsoluteOffset.top\r\n  if (areaAbsoluteOffset.top < 0)\r\n    fixedAreaTopOffset = 0\r\n  else if (areaAbsoluteOffset.bottom > containerHeight)\r\n    fixedAreaTopOffset = containerHeight - areaRect.height\r\n  // Move actual area\r\n  props.onAreaUpdate({\r\n    top: fixedAreaTopOffset,\r\n    left: fixedAreaLeftOffset\r\n  })\r\n}","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport { Paper } from '../paper';\r\nimport { ReactComponent as RotateAntiClockwiseIcon } from '../../img/rotate_left.svg'\r\nimport { ReactComponent as RotateClockwiseIcon } from '../../img/rotate_right.svg'\r\nimport { ReactComponent as CloseIcon } from '../../img/close.svg'\r\nimport CatsImg from '../../img/cats.jpg'\r\nimport { Button } from '../button';\r\nimport styles from './imageCrop.styles'\r\nimport { Cropper } from './cropper';\r\nimport update from 'immutability-helper'\r\nimport { MAX_IMAGE_DIMENSION_LENGHT, MIN_IMAGE_DIMENSION_LENGHT, MIN_IMAGE_CROP_DIMENSION_LENGHT, ErrorTypes } from '../../helpers';\r\n\r\nclass ImageCrop extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    open: PropTypes.bool,\r\n    /** Callback on close button clicked */\r\n    onClose: PropTypes.func,\r\n    /** Callback on loading error provided with message */\r\n    onErrorLoadingImage: PropTypes.func\r\n  }\r\n\r\n  state = {\r\n    /** Defines whether image was loaded and processed */\r\n    isImgSelected: false,\r\n    /** Reference to image DOM */\r\n    imgSrc: null,\r\n    /** Current rotation level */\r\n    imgRotationDegree: 0,\r\n    /** Image rectangle */\r\n    imgRef: React.createRef(),\r\n    /** Calculated width */\r\n    resizedImageWidth: null,\r\n    /** Calculated height */\r\n    resizedImageHeight: null,\r\n    area: {\r\n      top: 0,\r\n      left: 0,\r\n      width: MIN_IMAGE_DIMENSION_LENGHT,\r\n      height: MIN_IMAGE_DIMENSION_LENGHT,\r\n    }\r\n  }\r\n  // Component refs\r\n  fileInputRef = React.createRef()\r\n  // Other props\r\n  reader = new FileReader()\r\n  image = new Image()\r\n\r\n  componentDidMount = () => {\r\n    // Process each next file loaded to reader\r\n    this.reader.addEventListener('load', () => {\r\n      // Load and preprocess image\r\n      this.image.src = this.reader.result\r\n    }, false)\r\n\r\n    // Process given image on load\r\n    this.image.onload = (e) => {\r\n      let originalWidth = this.image.width\r\n      let originalHeight = this.image.height\r\n      \r\n      // Check image aspect ration rules on load\r\n      if (\r\n        originalWidth / originalHeight <= 0.25 ||\r\n        originalWidth / originalHeight >= 3\r\n      ) {\r\n        this.props.onErrorLoadingImage &&\r\n          this.props.onErrorLoadingImage(ErrorTypes.WRONG_IMAGE_ASPECT_RATIO)\r\n        return\r\n      }\r\n      if (\r\n        originalWidth < MIN_IMAGE_DIMENSION_LENGHT ||\r\n        originalHeight < MIN_IMAGE_DIMENSION_LENGHT\r\n      ) {\r\n        this.props.onErrorLoadingImage &&\r\n          this.props.onErrorLoadingImage(ErrorTypes.IMAGE_TOO_SMALL)\r\n        return\r\n      }\r\n      // Resize exaggerated image\r\n      let aspectRatio\r\n      let resizedImageWidth = originalWidth\r\n      let resizedImageHeight = originalHeight\r\n      if (originalHeight > MAX_IMAGE_DIMENSION_LENGHT) {\r\n        aspectRatio = originalHeight / MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageHeight = MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageWidth = originalWidth / aspectRatio\r\n      }\r\n      if (resizedImageWidth > MAX_IMAGE_DIMENSION_LENGHT) {\r\n        aspectRatio = resizedImageWidth / MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageWidth = MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageHeight = resizedImageHeight / aspectRatio\r\n      }\r\n      // Set default image center\r\n      let initialAreaTop = resizedImageHeight / 2 - MIN_IMAGE_DIMENSION_LENGHT / 2\r\n      let initialAreaLeft = resizedImageWidth / 2 - MIN_IMAGE_DIMENSION_LENGHT / 2\r\n\r\n      this.setState({\r\n        area: update(this.state.area, {\r\n          top: { $set: initialAreaTop },\r\n          left: { $set: initialAreaLeft },\r\n          width: { $set: Math.min(MIN_IMAGE_DIMENSION_LENGHT, resizedImageWidth) },\r\n          height: { $set: Math.min(MIN_IMAGE_DIMENSION_LENGHT, resizedImageHeight) }\r\n        }),\r\n        resizedImageWidth,\r\n        resizedImageHeight,\r\n        imgSrc: this.image.src,\r\n        isImgSelected: true\r\n      })\r\n    }\r\n  }\r\n\r\n  /** Callback on close click */\r\n  handleClose = () => {\r\n    this.props.onClose &&\r\n      this.props.onClose()\r\n  }\r\n\r\n  /** Resets selected image */\r\n  handleGoBackClick = () => {\r\n    this.setState({\r\n      isImgSelected: false\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Converts loaded image to url and saves to state\r\n   */\r\n  handleSelectedImageChange = e => {\r\n    let file = this.fileInputRef.current.files[0]\r\n\r\n    if (file) {\r\n      this.reader.readAsDataURL(file)\r\n    }\r\n  }\r\n\r\n  /** Fires event on input[type='file'] when related button is clicked */\r\n  handleSelectFileClick = e => {\r\n    if (this.fileInputRef.current) {\r\n      this.fileInputRef.current.click()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Just.\r\n   * Handle.\r\n   * A cat.\r\n   */\r\n  handleCat = () => {\r\n    this.image.src = CatsImg\r\n  }\r\n\r\n  /** Transforms image for given degree diff */\r\n  handleRotateClick = deltaDegree => () => {\r\n    this.setState(oldState => ({\r\n      imgRotationDegree: oldState.imgRotationDegree + deltaDegree\r\n    }))\r\n  }\r\n\r\n  /** Update selected area properties*/\r\n  updateArea = (area) => {\r\n    this.setState({\r\n      area: update(this.state.area, { $merge: area })\r\n    })\r\n  }\r\n  \r\n  /** Replace current area with new one */\r\n  handleFadedSpaceClick = ({x, y}) => {\r\n    const { \r\n      resizedImageHeight,\r\n      resizedImageWidth\r\n     } = this.state\r\n    // Fix top offset\r\n    let fixedTop = y - MIN_IMAGE_CROP_DIMENSION_LENGHT / 2\r\n    if (fixedTop < 0)\r\n      fixedTop = 0\r\n    else if (fixedTop > resizedImageHeight - MIN_IMAGE_CROP_DIMENSION_LENGHT)\r\n      fixedTop = resizedImageHeight - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    // Fixed left offset\r\n    let fixedLeft = x - MIN_IMAGE_CROP_DIMENSION_LENGHT / 2\r\n    if (fixedLeft < 0)\r\n     fixedLeft = 0\r\n    else if (fixedLeft > resizedImageWidth - MIN_IMAGE_CROP_DIMENSION_LENGHT)\r\n      fixedLeft = resizedImageWidth - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    \r\n    this.updateArea({\r\n      top: fixedTop,\r\n      left: fixedLeft,\r\n      width: MIN_IMAGE_CROP_DIMENSION_LENGHT,\r\n      height: MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    })\r\n  }\r\n  \r\n  /** Update image reference */\r\n  handleCropperRectUpdate = ref => {\r\n    this.setState({\r\n      imgRef: ref\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      classes,\r\n      title,\r\n    } = this.props\r\n\r\n    const { \r\n      isImgSelected,\r\n      imgSrc,\r\n      imgRotationDegree,\r\n      area,\r\n      resizedImageHeight,\r\n      resizedImageWidth,\r\n      imgRef\r\n    } = this.state\r\n\r\n    // Next code block ensures that image is being rotated \r\n    // and, if it is, adjusts margin of wrapper\r\n    let imgWidthHeightDelta = 0\r\n    if (imgRef.current) {\r\n      let isRotated = Boolean((imgRotationDegree / 90) % 2)\r\n      \r\n      if (isRotated) {\r\n        imgWidthHeightDelta = Math.abs(\r\n          imgRef.current.clientWidth - \r\n          imgRef.current.clientHeight\r\n        )\r\n      }\r\n    }\r\n\r\n    let outerImageContainerStyle = {\r\n      margin: `${imgWidthHeightDelta / 2 + 35}px auto`,\r\n      width: resizedImageWidth,\r\n      height: resizedImageHeight\r\n    }\r\n    return (\r\n      <Paper className={classes.root}>\r\n        <div className={classes.title}>\r\n          <span className={classes.titleText}>\r\n            {title}\r\n          </span>\r\n          <div className={classes.close}>\r\n            <CloseIcon onClick={this.handleClose}/>\r\n          </div>\r\n        </div>\r\n        <div className={classes.cropWrap}>\r\n          {\r\n            isImgSelected ? (\r\n            <div>\r\n              <div className={classes.descriptionWrap}>\r\n                Выберите область изображения\r\n              </div>\r\n              <div \r\n                className={classes.outerImage}\r\n                style={outerImageContainerStyle}\r\n              >\r\n                <Cropper\r\n                  height={resizedImageHeight}\r\n                  width={resizedImageWidth}\r\n                  areaTop={area.top}\r\n                  areaLeft={area.left}\r\n                  areaHeight={area.height}\r\n                  areaWidth={area.width}\r\n                  imgSrc={imgSrc}\r\n                  imgRef={imgRef}\r\n                  rotationDegree={imgRotationDegree}\r\n                  onRectUpdate={this.handleCropperRectUpdate}\r\n                  onAreaUpdate={this.updateArea}\r\n                  onFadedSpaceClick={this.handleFadedSpaceClick}\r\n                />\r\n                <div className={classes.rotationButtons}>\r\n                  <RotateAntiClockwiseIcon\r\n                    className={classes.rotateClockwise}\r\n                    onClick={this.handleRotateClick(-90)}\r\n                  />\r\n                  <RotateClockwiseIcon\r\n                    className={classes.rotateAntiClockwise}\r\n                    onClick={this.handleRotateClick(90)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className={classes.bottomLine} />\r\n              <div className={classes.footer}>\r\n                <Button className={classes.btn}>Сохранить</Button>\r\n                <Button onClick={this.handleGoBackClick}>Назад</Button>\r\n              </div>\r\n            </div>\r\n            ) : (\r\n              <div className={classes.footer}>\r\n                <Button \r\n                  onClick={this.handleSelectFileClick}\r\n                  className={classes.btn}\r\n                >\r\n                  Выбрать фото\r\n                </Button>\r\n                <Button onClick={this.handleCat}>\r\n                  Выбрать кота\r\n                </Button>\r\n                <input \r\n                  ref={this.fileInputRef} \r\n                  className={classes.input}\r\n                  type='file' \r\n                  onChange={this.handleSelectedImageChange} \r\n                />\r\n              </div>\r\n            )\r\n          }\r\n        </div>\r\n      </Paper>\r\n    )\r\n  }\r\n}\r\n\r\nconst ImageCropStyled = withStyles(styles)(ImageCrop)\r\n\r\nexport { ImageCropStyled as ImageCrop }","export default {\r\n  root: {\r\n    width: 654,\r\n    display: 'flex',\r\n    flexFlow: 'column'\r\n  },\r\n  title: {\r\n    minHeight: 54,\r\n    paddingLeft: 25,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    borderBottom: '1px solid #86838357',\r\n    backgroundColor: '#f2f5f7',\r\n    borderTopLeftRadius: 4,\r\n    borderTopRightRadius: 4\r\n  },\r\n  descriptionWrap: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginBottom: 35\r\n  },\r\n  cropWrap: {\r\n    padding: '32px 20px 20px',\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n  outerImage: {\r\n    position: 'relative'\r\n  },\r\n  rotateClockwise: {\r\n    fill: '#ffffff99',\r\n    position: 'absolute',\r\n    bottom: 5,\r\n    right: 24,\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      fill: '#fff'\r\n    }\r\n  },\r\n  rotateAntiClockwise: {\r\n    extend: 'rotateClockwise',\r\n    right: 0\r\n  },\r\n  rotationButtons: {\r\n    position: 'absolute',\r\n    right: 0,\r\n    bottom: 0\r\n  },\r\n  previewImage: {\r\n    userSelect: 'none',\r\n  },\r\n  input: {\r\n    display: 'none'\r\n  },\r\n  bottomLine: {\r\n    borderBottom: '1px solid #86838357',\r\n    marginBottom: 25\r\n  },\r\n  imgFade: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: '#000',\r\n    opacity: 0.7\r\n  },\r\n  titleText: {\r\n    flexGrow: 1\r\n  },\r\n  close: {\r\n    padding: '21px 25px 21px 12px',\r\n    fill: '#7b95b5',\r\n    cursor: 'pointer',\r\n    opacity: .75,\r\n    '&:hover': {\r\n      opacity: 1\r\n    }\r\n  },\r\n  footer: {\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n  btn: {\r\n    marginRight: 25\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\n\r\nconst styles = {\r\n  root: {\r\n    position: 'fixed',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    background: 'rgba(0, 0, 0, .7)',\r\n    overflow: 'auto'\r\n  }\r\n}\r\n\r\nclass Modal extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    open: PropTypes.bool,\r\n    /**Occurs when modal background is clicked */\r\n    onOuterClick: PropTypes.func\r\n  }\r\n\r\n  backgroundRef = React.createRef()\r\n\r\n  handleOuterClick = e => {\r\n    if (e.target === this.backgroundRef.current) {\r\n      this.props.onOuterClick &&\r\n        this.props.onOuterClick(e)\r\n    } \r\n  }\r\n\r\n  render() {\r\n    const { \r\n      classes, \r\n      children, \r\n      open \r\n    } = this.props\r\n\r\n    return open && (\r\n      <div \r\n        ref={this.backgroundRef}\r\n        className={classes.root} \r\n        onMouseDown={this.handleOuterClick}\r\n      >\r\n        {children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst ModalStyled = withStyles(styles)(Modal)\r\n\r\nexport { ModalStyled as Modal }","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport { ImageCrop } from './components/imageCrop';\r\nimport { Button } from './components/button';\r\nimport { Modal } from './components/modal';\r\nimport { DragDropContextProvider } from 'react-dnd';\r\nimport HTML5Backend from 'react-dnd-html5-backend';\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <DragDropContextProvider backend={HTML5Backend}>\r\n        <div className=\"App\">\r\n          <header className=\"App-header\">\r\n            <ImageCrop \r\n              title='Выберите фотографию'\r\n              onClose={this.handleToggleButton}\r\n              onErrorLoadingImage={this.handleErrorLoading}\r\n            />\r\n          </header>\r\n        </div>\r\n      </DragDropContextProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/cats.46b11cf1.jpg\";"],"sourceRoot":""}