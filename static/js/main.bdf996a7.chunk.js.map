{"version":3,"sources":["components/paper/index.js","img/rotate_left.svg","img/rotate_right.svg","img/close.svg","components/button/index.js","helpers/index.js","components/imageCrop/selectionArea/index.js","components/imageCrop/tags/tag/index.js","components/imageCrop/tags/index.js","components/imageCrop/cropper/resizeArea.js","components/imageCrop/cropper/index.js","components/imageCrop/cropper/moveArea.js","components/imageCrop/index.js","components/imageCrop/imageCrop.styles.js","App.js","serviceWorker.js","index.js","img/cats.jpg","img/empty.svg"],"names":["Paper","_this$props","this","props","children","classes","className","other","Object","objectWithoutProperties","react_default","a","createElement","assign","classNames","root","Fragment","Component","PaperStyled","withStyles","backgroundColor","borderRadius","color","boxShadow","_extends","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","rotate_left_ref2","d","fill","rotate_left_ref3","rotate_left_SvgRotateLeft","_ref","svgRef","width","height","viewBox","ref","ForwardRef","forwardRef","__webpack_require__","p","rotate_right_extends","rotate_right_objectWithoutProperties","rotate_right_objectWithoutPropertiesLoose","rotate_right_ref2","rotate_right_ref3","rotate_right_SvgRotateRight","rotate_right_ForwardRef","close_extends","close_objectWithoutProperties","close_objectWithoutPropertiesLoose","close_ref2","close_ref3","close_SvgClose","close_ForwardRef","Button","ButtonStyled","outline","padding","minWidth","fontSize","display","justifyContent","border","cursor","userSelect","&:hover","&:active","paddingTop","paddingBottom","TagTypes","NW","N","NE","W","E","SW","S","SE","ErrorTypes","WRONG_IMAGE_ASPECT_RATIO","IMAGE_TOO_SMALL","MAX_RESIZE_RATIO","MIN_RESIZE_RATIO","MAX_IMAGE_DIMENSION_LENGHT","MIN_IMAGE_DIMENSION_LENGHT","MIN_IMAGE_CROP_DIMENSION_LENGHT","FULL_IMAGE_SELECTION_THRESHOLD","Image","src","movePreviewImage","getDefaultState","initClientOffset","x","y","item","top","right","bottom","left","SelectionArea","state","areaRef","React","createRef","handleMouseDown","e","preventDefault","rect","_this","current","getBoundingClientRect","setState","clientX","clientY","document","addEventListener","_onMouseMove","_onMouseUp","currentClientOffset","onHover","removeEventListener","connectDragPreview","connectDragSource","imgWidth","imgHeight","areaStyles","imgStyles","marginTop","marginLeft","style","draggable","imgWrap","onMouseDown","alt","SelectionAreaStyled","position","overflow","styles","opacity","transition","nw","n","concat","TAG_WIDTH","ne","se","s","sw","w","Tag","tagName","componentDidMount","type","onDragStart","onDragEnd","onDrag","hightlightStyle","isHighlighted","onMouseUp","handleMouseUp","TagStyled","Tags","isDragging","shouldComponentUpdate","nextProps","nextState","handleTagDrag","onTagDrag","handleTagDragEnd","handleTagDragStart","_this2","tags","map","TagsStyled","getFixedBottomDelta","areaTop","areaWidth","areaHeight","cursorAbsoluteOffset","bottomAbsoluteOffsetInterval","max","Math","min","fixedBottomOffset","getFixedRightDelta","areaLeft","rightAbsoluteOffsetInterval","fixedRightOffset","getFixedLeftDelta","leftAbsoluteOffsetInterval","fixedLeftOffset","getFixedTopDelta","topAbsoluteOffsetInterval","fixedTopOffset","CropperStyled","img","imgFade","rotationDegree","imgSrc","onRectUpdate","isOver","onFadedSpaceClick","onAreaUpdate","imgRef","useRef","handleFadeClick","useCallback","handleHover","_ref2","fixedOffset","containerRect","areaRect","containerWidth","containerHeight","initOffset","currentOffset","areaAbsoluteOffset","fixedAreaLeftOffset","fixedAreaTopOffset","fixedMoveAreaOffset","_ref3","tagType","resizeArea","useEffect","innerImageContainerStyle","transform","imgStyle","onClick","area","isImgSelected","imgRotationDegree","resizedImageWidth","resizedImageHeight","ImageCrop","fileInputRef","reader","FileReader","image","result","onload","originalWidth","originalHeight","onErrorLoadingImage","aspectRatio","initialAreaTop","initialAreaLeft","calculatedWidth","calculatedHeight","update","$set","handleClose","onClose","handleGoBackClick","defaultState","objectSpread","handleSelectedImageChange","file","files","readAsDataURL","handleSelectFileClick","click","handleCat","CatsImg","handleRotateClick","deltaDegree","oldState","updateArea","$merge","handleFadedSpaceClick","_this$state","fixedTop","fixedLeft","handleCropperRectUpdate","title","_this$state2","imgWidthHeightDelta","Boolean","abs","clientWidth","clientHeight","outerImageContainerStyle","margin","titleText","close","cropWrap","descriptionWrap","outerImage","rotationButtons","rotateClockwise","rotateAntiClockwise","bottomLine","footer","btn","input","onChange","ImageCropStyled","flexFlow","minHeight","paddingLeft","alignItems","borderBottom","borderTopLeftRadius","borderTopRightRadius","marginBottom","extend","previewImage","flexGrow","marginRight","App","cjs","backend","HTML5Backend","handleToggleButton","handleErrorLoading","window","location","hostname","match","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.bdf996a7.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport classNames from 'classnames'\r\n\r\nconst styles = {\r\n  root: {\r\n    backgroundColor: '#fff',\r\n    borderRadius: 4,\r\n    color: '#000',\r\n    boxShadow: '0px 1px 3px 0px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 2px 1px -1px rgba(0,0,0,0.12)'\r\n  }\r\n}\r\n\r\nclass Paper extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      children,\r\n      classes,\r\n      className,\r\n      ...other\r\n    } = this.props\r\n    \r\n    return (\r\n      <div className={classNames([classes.root, className])} {...other}>\r\n        <React.Fragment>\r\n          {children}\r\n        </React.Fragment>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst PaperStyled = withStyles(styles)(Paper)\r\n\r\nexport { PaperStyled as Paper }","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z\"\n});\n\nvar SvgRotateLeft = function SvgRotateLeft(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgRotateLeft, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/rotate_left.92a114e8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z\"\n});\n\nvar SvgRotateRight = function SvgRotateRight(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgRotateRight, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/rotate_right.bd9c45d6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.777b93c6.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport classNames from 'classnames'\r\n\r\nconst styles = {\r\n  root: {\r\n    outline: 'none',\r\n    padding: '7px 16px 8px',\r\n    backgroundColor: '#5181b8',\r\n    color: '#fff',\r\n    minWidth: 170,\r\n    borderRadius: 4,\r\n    fontSize: 12.5,\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    border: 'none',\r\n    cursor: 'pointer',\r\n    userSelect: 'none',\r\n    '&:hover': {\r\n      backgroundColor: '#5b88bd'\r\n    },\r\n    '&:active': {\r\n      backgroundColor: '#4872a3',\r\n      paddingTop: 8,\r\n      paddingBottom: 7\r\n    }\r\n  }\r\n}\r\n\r\nclass Button extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      classes,\r\n      children,\r\n      className,\r\n      ...other\r\n     } = this.props\r\n\r\n    return (\r\n      <button\r\n        className={classNames([classes.root, className])} \r\n        {...other}\r\n      >\r\n        {children}\r\n      </button>\r\n    )\r\n  }\r\n}\r\n\r\nconst ButtonStyled = withStyles(styles)(Button)\r\n\r\nexport { ButtonStyled as Button }","import movePreviewImage from '../img/empty.svg'\r\n\r\nexport const ItemTypes = {\r\n  BOX: 'BOX',\r\n  TAG: 'TAG'\r\n}\r\n\r\nexport const TagTypes = {\r\n  NW: 'NW',\r\n  N: 'N',\r\n  NE: 'NE',\r\n  W: 'W',\r\n  E: 'E',\r\n  SW: 'SW',\r\n  S: 'S',\r\n  SE: 'SE'\r\n}\r\n\r\nexport const ErrorTypes = {\r\n  WRONG_IMAGE_ASPECT_RATIO: 'WRONG_IMAGE_ASPECT_RATIO',\r\n  IMAGE_TOO_SMALL: 'IMAGE_TOO_SMALL'\r\n}\r\n\r\n/** MaxPossibleWidth/currentHegiht */\r\nexport const MAX_RESIZE_RATIO = 1\r\n/** MinPossibleWidth/currentHeight */\r\nexport const MIN_RESIZE_RATIO = 1/1.5\r\n/** Maximum image markup width or height */\r\nexport const MAX_IMAGE_DIMENSION_LENGHT = 604\r\n/** Minimum image markup width or height */\r\nexport const MIN_IMAGE_DIMENSION_LENGHT = 200\r\n/** Minimum crop area width or height */\r\nexport const MIN_IMAGE_CROP_DIMENSION_LENGHT = 100\r\n/** If given image width is less than this value, we select an entire image on load */\r\nexport const FULL_IMAGE_SELECTION_THRESHOLD = 300\r\n\r\nexport const movePreview = new Image()\r\nmovePreview.src = movePreviewImage\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport { movePreview } from '../../../helpers';\r\nimport classNames from 'classnames'\r\n\r\nconst styles = {\r\n  root: {\r\n    position: 'absolute',\r\n    cursor: 'move'\r\n  },\r\n  imgWrap: {\r\n    overflow: 'hidden',\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    userSelect: 'none'\r\n  }\r\n}\r\n\r\nconst getDefaultState = () => ({\r\n  initClientOffset: {\r\n    x: null,\r\n    y: null\r\n  },\r\n  item: {\r\n    top: null,\r\n    right: null,\r\n    bottom: null,\r\n    left: null,\r\n    height: null,\r\n    width: null\r\n  }\r\n})\r\n\r\nclass SelectionArea extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    /** Describes absolute top offset */\r\n    top: PropTypes.number.isRequired,\r\n    /** Describes absolute left offset */\r\n    left: PropTypes.number.isRequired,\r\n    /** Area width */\r\n    width: PropTypes.number.isRequired,\r\n    /** Area height */\r\n    height: PropTypes.number.isRequired,\r\n    /** Classes to be merged */\r\n    className: PropTypes.string,\r\n    /** Image source */\r\n    src: PropTypes.string.isRequired,\r\n    /** Image width */\r\n    imgWidth: PropTypes.number.isRequired,\r\n    /** Image height */\r\n    imgHeight: PropTypes.number.isRequired,\r\n    onHover: PropTypes.func\r\n  }\r\n\r\n  state = getDefaultState()\r\n  areaRef = React.createRef()\r\n\r\n  handleMouseDown = e => {\r\n    e.preventDefault()\r\n    let rect = this.areaRef.current.getBoundingClientRect()\r\n\r\n    let item = {\r\n      top: rect.top,\r\n      right: rect.right,\r\n      left: rect.left,\r\n      bottom: rect.bottom,\r\n      width: this.props.width,\r\n      height: this.props.height\r\n    }\r\n    \r\n\r\n    this.setState({\r\n      initClientOffset: {\r\n        x: e.clientX,\r\n        y: e.clientY\r\n      },\r\n      item\r\n    })\r\n\r\n    document.addEventListener('mousemove', this._onMouseMove)\r\n    document.addEventListener('mouseup', this._onMouseUp)\r\n  }\r\n\r\n  _onMouseMove = e => {\r\n    const currentClientOffset = {\r\n      x: e.clientX,\r\n      y: e.clientY\r\n    }\r\n\r\n    this.props.onHover &&\r\n      this.props.onHover({\r\n        initClientOffset: this.state.initClientOffset,\r\n        currentClientOffset,\r\n        item: this.state.item\r\n      })\r\n  }\r\n\r\n  _onMouseUp = e => {\r\n    document.removeEventListener('mousemove', this._onMouseMove)\r\n    document.removeEventListener('mouseup', this._onMouseUp)\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      top,\r\n      left,\r\n      width,\r\n      height,\r\n      classes,\r\n      connectDragPreview,\r\n      connectDragSource,\r\n      className,\r\n      src,\r\n      imgWidth,\r\n      imgHeight,\r\n      onHover,\r\n      ...other\r\n     } = this.props\r\n\r\n    const areaStyles = {\r\n      top,\r\n      left,\r\n      width,\r\n      height\r\n    }\r\n    const imgStyles = {\r\n      width: imgWidth,\r\n      height: imgHeight,\r\n      marginTop: -top,\r\n      marginLeft: -left,\r\n    }\r\n\r\n    return (\r\n      <div \r\n        style={areaStyles}\r\n        className={classNames([classes.root, className])}\r\n        ref={this.areaRef}\r\n        draggable={false}\r\n        {...other}\r\n      >\r\n        <div className={classes.imgWrap}>\r\n          <img \r\n            style={imgStyles}\r\n            src={src}\r\n            draggable={false}\r\n            onMouseDown={this.handleMouseDown}\r\n            alt=''\r\n          />\r\n        </div>\r\n        {this.props.children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst SelectionAreaStyled = withStyles(styles)(SelectionArea)\r\n\r\nexport { SelectionAreaStyled as SelectionArea }","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { TagTypes, movePreview } from '../../../../helpers';\r\nimport withStyles from 'react-jss'\r\nimport classNames from 'classnames'\r\n\r\nexport const TAG_WIDTH = 10\r\n\r\nconst styles = {\r\n  root: {\r\n    width: TAG_WIDTH,\r\n    height: TAG_WIDTH,\r\n    backgroundColor: '#f2f2f2',\r\n    opacity: 0.3,\r\n    position: 'absolute',\r\n    transition: '.1s'\r\n  },\r\n  nw: {\r\n    top: -TAG_WIDTH / 2,\r\n    left: -TAG_WIDTH / 2,\r\n    cursor: 'nw-resize'\r\n  },\r\n  n: {\r\n    top: - TAG_WIDTH / 2,\r\n    left: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'n-resize'\r\n  },\r\n  ne: {\r\n    top: -TAG_WIDTH / 2,\r\n    left: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'ne-resize'\r\n  },\r\n  e: {\r\n    top: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    left: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'e-resize'\r\n  },\r\n  se: {\r\n    top: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    left: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'se-resize'\r\n  },\r\n  s: {\r\n    top: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    left: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 's-resize'\r\n  },\r\n  sw: {\r\n    top: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    left: -TAG_WIDTH / 2,\r\n    cursor: 'sw-resize'\r\n  },\r\n  w: {\r\n    top: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    left: -TAG_WIDTH / 2,\r\n    cursor: 'w-resize'\r\n  }\r\n}\r\n\r\nclass Tag extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object,\r\n    /** Defines tag type */\r\n    type: PropTypes.string.isRequired,\r\n    /** Highlight square */\r\n    isHighlighted: PropTypes.bool,\r\n    /** Drag callback */\r\n    onDrag: PropTypes.func,\r\n    onDragStart: PropTypes.func,\r\n    onDragEnd: PropTypes.func\r\n  }\r\n\r\n  state = {\r\n    tagName: '',\r\n    item: null,\r\n    initClientOffset: null\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    switch (this.props.type){\r\n      case TagTypes.NW:\r\n        this.setState({\r\n          tagName: this.props.classes.nw\r\n        })\r\n        break\r\n      case TagTypes.N:\r\n        this.setState({\r\n          tagName: this.props.classes.n\r\n        })\r\n        break\r\n      case TagTypes.NE:\r\n        this.setState({\r\n          tagName: this.props.classes.ne\r\n        })\r\n        break\r\n      case TagTypes.E:\r\n        this.setState({\r\n          tagName: this.props.classes.e\r\n        })\r\n        break\r\n      case TagTypes.SE:\r\n        this.setState({\r\n          tagName: this.props.classes.se\r\n        })\r\n        break\r\n      case TagTypes.S:\r\n        this.setState({\r\n          tagName: this.props.classes.s\r\n        })\r\n        break\r\n      case TagTypes.SW:\r\n        this.setState({\r\n          tagName: this.props.classes.sw\r\n        })\r\n        break\r\n      case TagTypes.W:\r\n        this.setState({\r\n          tagName: this.props.classes.w\r\n        })\r\n        break\r\n      default: \r\n        break\r\n    }\r\n  }\r\n\r\n  handleMouseDown = e => {\r\n    e.preventDefault()\r\n    let item = {\r\n      type: this.props.type\r\n    }\r\n    this.setState({\r\n      initClientOffset: {\r\n        x: e.clientX,\r\n        y: e.clientY\r\n      },\r\n      item\r\n    })\r\n    this.props.onDragStart &&\r\n      this.props.onDragStart(e)\r\n\r\n    document.addEventListener('mousemove', this._onMouseMove)\r\n    document.addEventListener('mouseup', this._onMouseUp)\r\n  }\r\n\r\n  _onMouseUp = e => {\r\n    document.removeEventListener('mousemove', this._onMouseMove)\r\n    document.removeEventListener('mouseup', this._onMouseUp)\r\n    this.props.onDragEnd &&\r\n      this.props.onDragEnd(e)\r\n  }\r\n\r\n  _onMouseMove = e => {\r\n    const currentClientOffset = {\r\n      x: e.clientX,\r\n      y: e.clientY\r\n    }\r\n\r\n    this.props.onDrag &&\r\n      this.props.onDrag({\r\n        initClientOffset: this.state.initClientOffset,\r\n        currentClientOffset,\r\n        item: this.state.item\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      classes,\r\n      isHighlighted,\r\n    } = this.props\r\n    // Replace default stab with empty image\r\n    let hightlightStyle\r\n    if (isHighlighted)\r\n      hightlightStyle = {\r\n        opacity: .7\r\n      }\r\n    \r\n    return (\r\n      <div\r\n        className={classNames([classes.root, this.state.tagName])}\r\n        style={hightlightStyle}\r\n        draggable={false}\r\n        onMouseDown={this.handleMouseDown}\r\n        onMouseUp={this.handleMouseUp}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nconst TagStyled = withStyles(styles)(Tag)\r\n\r\nexport { TagStyled as Tag }\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport { TagTypes } from '../../../helpers';\r\nimport { Tag } from './tag';\r\n\r\nconst styles = {\r\n\r\n}\r\n\r\nclass Tags extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    /** Selected area width */\r\n    width: PropTypes.number.isRequired,\r\n    /** Selected area height */\r\n    height: PropTypes.number.isRequired,\r\n    /** Tag dragging callback */\r\n    onTagDrag: PropTypes.func\r\n  }\r\n\r\n  state = {\r\n    isDragging: false\r\n  }\r\n\r\n  shouldComponentUpdate = (nextProps, nextState) => {\r\n    // Huge performance improvement\r\n    if (\r\n      this.props.width === nextProps.width &&\r\n      this.props.height === nextProps.height &&\r\n      this.state.isDragging === nextState.isDragging\r\n    ) return false\r\n    return true\r\n  }\r\n\r\n  handleTagDrag = e => {\r\n    this.props.onTagDrag &&\r\n      this.props.onTagDrag(e)\r\n  }\r\n\r\n  handleTagDragEnd = e => {\r\n    this.setState({\r\n      isDragging: false\r\n    })\r\n  }\r\n\r\n  handleTagDragStart = e => {\r\n    this.setState({\r\n      isDragging: true\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      isDragging\r\n    } = this.state\r\n    let tags = Object.keys(TagTypes).map(type => TagTypes[type])\r\n    \r\n    return (\r\n      <div>\r\n        {\r\n          tags.map(type => (\r\n            <Tag \r\n              key={type}\r\n              type={type}\r\n              isHighlighted={isDragging}\r\n              onDrag={this.handleTagDrag}\r\n              onDragStart={this.handleTagDragStart}\r\n              onDragEnd={this.handleTagDragEnd}\r\n            />\r\n          ))\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst TagsStyled = withStyles(styles)(Tags)\r\n\r\nexport { TagsStyled as Tags }\r\n","import { TagTypes, MIN_IMAGE_CROP_DIMENSION_LENGHT, MIN_RESIZE_RATIO, MAX_RESIZE_RATIO } from \"../../../helpers\";\r\n\r\nexport const resizeArea = ({\r\n  areaTop,\r\n  areaLeft,\r\n  areaHeight,\r\n  areaWidth,\r\n  width,\r\n  height,\r\n  imgRef,\r\n  item,\r\n  currentClientOffset,\r\n  onAreaUpdate\r\n}) => {\r\n  let rect = imgRef.current.getBoundingClientRect()\r\n  /** Currently dragged tag type */\r\n  let tagType = item.type\r\n  /** Current offset */\r\n  let currentOffset = currentClientOffset\r\n  /** Cursor absolute offset*/\r\n  let cursorAbsoluteOffset = {\r\n    x: currentOffset.x - rect.left,\r\n    y: currentOffset.y - rect.top,\r\n  }\r\n\r\n  // Move around respecting currenlty selected tag\r\n  switch (tagType) {\r\n    case TagTypes.NW: {\r\n      onAreaUpdate({\r\n        top: areaTop - getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        left: areaLeft - getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        width: areaWidth + getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        height: areaHeight + getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }      \r\n    case TagTypes.N: {\r\n      onAreaUpdate({\r\n        top: areaTop - getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        height: areaHeight + getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.NE: {\r\n      onAreaUpdate({\r\n        top: areaTop - getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        width: areaWidth - getFixedRightDelta(width, areaLeft, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        height: areaHeight + getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.E: {\r\n      onAreaUpdate({\r\n        width: areaWidth - getFixedRightDelta(width, areaLeft, areaHeight, areaWidth, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.SE: {\r\n      onAreaUpdate({\r\n        width: areaWidth - getFixedRightDelta(width, areaLeft, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        height: areaHeight - getFixedBottomDelta(height, areaTop, areaWidth, areaHeight, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.S: {\r\n      onAreaUpdate({\r\n        height: areaHeight - getFixedBottomDelta(height, areaTop, areaWidth, areaHeight, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.SW: {\r\n      onAreaUpdate({\r\n        left: areaLeft - getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        height: areaHeight - getFixedBottomDelta(height, areaTop, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        width: areaWidth + getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.W: {\r\n      onAreaUpdate({\r\n        left: areaLeft - getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        width: areaWidth + getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    default:\r\n      break\r\n  }\r\n}\r\n\r\nconst getFixedBottomDelta = (height, areaTop, areaWidth, areaHeight, cursorAbsoluteOffset) => {\r\n  // Get possible interval for bottom side\r\n  let bottomAbsoluteOffsetInterval = {\r\n    max: Math.min(\r\n      height,\r\n      areaTop + areaWidth / MIN_RESIZE_RATIO\r\n    ),\r\n    min: Math.max(\r\n      areaTop + areaWidth / MAX_RESIZE_RATIO,\r\n      areaTop + MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset\r\n  let fixedBottomOffset = cursorAbsoluteOffset.y\r\n  if (cursorAbsoluteOffset.y > bottomAbsoluteOffsetInterval.max)\r\n    fixedBottomOffset = bottomAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.y < bottomAbsoluteOffsetInterval.min)\r\n    fixedBottomOffset = bottomAbsoluteOffsetInterval.min\r\n  return areaTop + areaHeight - fixedBottomOffset\r\n}\r\n\r\nconst getFixedRightDelta = (width, areaLeft, areaHeight, areaWidth, cursorAbsoluteOffset) => {\r\n  // Get possible interval for right side\r\n  let rightAbsoluteOffsetInterval = {\r\n    max: Math.min(\r\n      width,\r\n      areaLeft + areaHeight * MAX_RESIZE_RATIO\r\n    ),\r\n    min: Math.max(\r\n      areaLeft + areaHeight * MIN_RESIZE_RATIO,\r\n      areaLeft + MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset\r\n  let fixedRightOffset = cursorAbsoluteOffset.x\r\n  if (cursorAbsoluteOffset.x > rightAbsoluteOffsetInterval.max)\r\n    fixedRightOffset = rightAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.x < rightAbsoluteOffsetInterval.min)\r\n    fixedRightOffset = rightAbsoluteOffsetInterval.min\r\n  return areaLeft + areaWidth - fixedRightOffset\r\n}\r\n\r\nconst getFixedLeftDelta = (areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset) => {\r\n  // Get possible interval for left side\r\n  let leftAbsoluteOffsetInterval = {\r\n    max: Math.max(\r\n      0, \r\n      areaLeft + areaWidth - areaHeight * MAX_RESIZE_RATIO\r\n    ),\r\n    min: Math.min(\r\n      areaLeft + areaWidth - areaHeight * MIN_RESIZE_RATIO,\r\n      areaLeft + areaWidth - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset based on interval\r\n  let fixedLeftOffset = cursorAbsoluteOffset.x\r\n  if (cursorAbsoluteOffset.x < leftAbsoluteOffsetInterval.max)\r\n    fixedLeftOffset = leftAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.x > leftAbsoluteOffsetInterval.min)\r\n    fixedLeftOffset = leftAbsoluteOffsetInterval.min\r\n  return areaLeft - fixedLeftOffset\r\n}\r\n\r\nconst getFixedTopDelta = (areaTop, areaHeight, areaWidth, cursorAbsoluteOffset) => {\r\n  // Get possible absolute interval for top side\r\n  let topAbsoluteOffsetInterval = {\r\n    max: Math.max(\r\n      0,\r\n      areaTop + areaHeight - areaWidth / MIN_RESIZE_RATIO\r\n    ),\r\n    min: Math.min(\r\n      areaTop + areaHeight - areaWidth / MAX_RESIZE_RATIO,\r\n      areaTop + areaHeight - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset based on interval\r\n  let fixedTopOffset = cursorAbsoluteOffset.y\r\n  if (cursorAbsoluteOffset.y < topAbsoluteOffsetInterval.max)\r\n    fixedTopOffset = topAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.y > topAbsoluteOffsetInterval.min)\r\n    fixedTopOffset = topAbsoluteOffsetInterval.min\r\n  return areaTop - fixedTopOffset\r\n}","import React, { useRef, useEffect, useCallback } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport { SelectionArea } from '../selectionArea';\r\nimport { Tags } from '../tags';\r\nimport { fixedMoveAreaOffset } from './moveArea';\r\nimport { resizeArea } from './resizeArea';\r\n\r\nconst styles = {\r\n  img: {\r\n    userSelect: 'none'\r\n  },\r\n  imgFade: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: '#000',\r\n    opacity: 0.7,\r\n    cursor: 'crosshair'\r\n  }\r\n}\r\n\r\nconst Cropper = ({\r\n  classes,\r\n  width,\r\n  height,\r\n  rotationDegree,\r\n  imgSrc,\r\n  areaTop,\r\n  areaLeft,\r\n  areaWidth,\r\n  areaHeight,\r\n  onRectUpdate,\r\n  isOver,\r\n  onFadedSpaceClick,\r\n  onAreaUpdate\r\n}) => {\r\n  // image ref\r\n  const imgRef = useRef(null)\r\n\r\n  /**Occurs on faded cropper part clicked */\r\n  const handleFadeClick = useCallback(\r\n    (e) => {\r\n      let rect = imgRef.current.getBoundingClientRect()\r\n      onFadedSpaceClick &&\r\n        onFadedSpaceClick({\r\n          x: e.clientX - rect.left,\r\n          y: e.clientY - rect.top\r\n        })\r\n    }\r\n  )\r\n\r\n  const handleHover = useCallback(\r\n    ({\r\n      item,\r\n      initClientOffset,\r\n      currentClientOffset\r\n    }) => {\r\n      let fixedOffset = fixedMoveAreaOffset({\r\n        width,\r\n        height,\r\n        item,\r\n        initClientOffset,\r\n        currentClientOffset,\r\n        imgRef\r\n      })\r\n      onAreaUpdate({\r\n        top: fixedOffset.top,\r\n        left: fixedOffset.left\r\n      })\r\n    }\r\n  )\r\n\r\n  const handleTagDrag = useCallback(\r\n    ({\r\n      item,\r\n      currentClientOffset\r\n    }) => {\r\n      resizeArea({\r\n        areaTop,\r\n        areaLeft,\r\n        areaHeight,\r\n        areaWidth,\r\n        width,\r\n        height,\r\n        imgRef,\r\n        item,\r\n        currentClientOffset,\r\n        onAreaUpdate\r\n      })\r\n    }\r\n  )\r\n  // Update image ref on every new image\r\n  useEffect(() => {\r\n    return () => {\r\n      if (imgRef.current) {\r\n        onRectUpdate &&\r\n          onRectUpdate(imgRef)\r\n      }\r\n    };\r\n  }, [imgRef.current])\r\n  // Custom styles\r\n  const innerImageContainerStyle = {\r\n    transform: `rotate(${rotationDegree}deg)`,\r\n    width,\r\n    height\r\n  }\r\n  const imgStyle = {\r\n    width,\r\n    height\r\n  }\r\n  \r\n  return (\r\n    <div style={innerImageContainerStyle}>\r\n      <img\r\n        style={imgStyle}\r\n        className={classes.img}\r\n        src={imgSrc}\r\n        ref={imgRef} \r\n        alt='Preview' \r\n        draggable={false}\r\n      />\r\n      <div \r\n        className={classes.imgFade} \r\n        onClick={handleFadeClick}\r\n        draggable={false}\r\n      />\r\n      <SelectionArea\r\n        className={classes.area}\r\n        top={areaTop}\r\n        left={areaLeft}\r\n        width={areaWidth}\r\n        height={areaHeight}\r\n        imgWidth={width}\r\n        imgHeight={height}\r\n        src={imgSrc}\r\n        onHover={handleHover}\r\n      >\r\n        <Tags \r\n          width={areaWidth}\r\n          height={areaHeight}\r\n          isDragging={isOver}\r\n          onTagDrag={handleTagDrag}\r\n        />\r\n      </SelectionArea>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst CropperStyled = withStyles(styles)(Cropper)\r\n\r\nexport { CropperStyled as Cropper }\r\n\r\nCropper.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  rotationDegree: PropTypes.number.isRequired,\r\n  imgSrc: PropTypes.string.isRequired,\r\n  onImageClick: PropTypes.func,\r\n  areaTop: PropTypes.number.isRequired,\r\n  areaLeft: PropTypes.number.isRequired,\r\n  areaWidth: PropTypes.number.isRequired,\r\n  areaHeight: PropTypes.number.isRequired,\r\n  /** Image reference */\r\n  imgRef: PropTypes.object.isRequired,\r\n  onRectUpdate: PropTypes.func,\r\n  /** Called each time area is updated */\r\n  onAreaUpdate: PropTypes.func.isRequired,\r\n  /** Called when empty faded point is clicked. Returns {x, y} absolute coordinates */\r\n  onFadedSpaceClick: PropTypes.func\r\n}","/** Get fixed allowed offset */\r\nexport const fixedMoveAreaOffset = ({\r\n  width,\r\n  height,\r\n  item,\r\n  initClientOffset,\r\n  currentClientOffset,\r\n  imgRef\r\n}) => {\r\n  // Get container data\r\n  let containerRect = imgRef.current.getBoundingClientRect()\r\n  /** Inintial area rect */\r\n  let areaRect = item\r\n  // Container dimensions\r\n  let containerWidth = width\r\n  let containerHeight = height\r\n  /** Initial cursor location */\r\n  let initOffset = initClientOffset\r\n  /** Current offset */\r\n  let currentOffset = currentClientOffset\r\n  /** Cursor absolute offset */\r\n  let cursorAbsoluteOffset = {\r\n    x: currentOffset.x - containerRect.left,\r\n    y: currentOffset.y - containerRect.top,\r\n  }\r\n  /** Area box absolute offset */\r\n  let areaAbsoluteOffset = {\r\n    left: cursorAbsoluteOffset.x - (initOffset.x - areaRect.left),\r\n    right: cursorAbsoluteOffset.x + (areaRect.right - initOffset.x),\r\n    top: cursorAbsoluteOffset.y - (initOffset.y - areaRect.top),\r\n    bottom: cursorAbsoluteOffset.y + (areaRect.bottom - initOffset.y)\r\n  }\r\n  /** Fixed left offset to be rendered */\r\n  let fixedAreaLeftOffset = areaAbsoluteOffset.left\r\n  if (areaAbsoluteOffset.left < 0)\r\n    fixedAreaLeftOffset = 0\r\n  else if (areaAbsoluteOffset.right > containerWidth)\r\n    fixedAreaLeftOffset = containerWidth - areaRect.width\r\n  /** Fixed top offset to be rendered */\r\n  let fixedAreaTopOffset = areaAbsoluteOffset.top\r\n  if (areaAbsoluteOffset.top < 0)\r\n    fixedAreaTopOffset = 0\r\n  else if (areaAbsoluteOffset.bottom > containerHeight)\r\n    fixedAreaTopOffset = containerHeight - areaRect.height\r\n  // Move actual area\r\n  return {\r\n    top: fixedAreaTopOffset,\r\n    left: fixedAreaLeftOffset\r\n  }\r\n}","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport { Paper } from '../paper';\r\nimport { ReactComponent as RotateAntiClockwiseIcon } from '../../img/rotate_left.svg'\r\nimport { ReactComponent as RotateClockwiseIcon } from '../../img/rotate_right.svg'\r\nimport { ReactComponent as CloseIcon } from '../../img/close.svg'\r\nimport CatsImg from '../../img/cats.jpg'\r\nimport { Button } from '../button';\r\nimport styles from './imageCrop.styles'\r\nimport { Cropper } from './cropper';\r\nimport update from 'immutability-helper'\r\nimport { MAX_IMAGE_DIMENSION_LENGHT, MIN_IMAGE_DIMENSION_LENGHT, MIN_IMAGE_CROP_DIMENSION_LENGHT, ErrorTypes, MAX_RESIZE_RATIO, MIN_RESIZE_RATIO, FULL_IMAGE_SELECTION_THRESHOLD } from '../../helpers';\r\n\r\nconst getDefaultState = () => ({\r\n  /** Defines whether image was loaded and processed */\r\n  isImgSelected: false,\r\n  /** Reference to image DOM */\r\n  imgSrc: null,\r\n  /** Current rotation level */\r\n  imgRotationDegree: 0,\r\n  /** Image rectangle */\r\n  imgRef: React.createRef(),\r\n  /** Calculated width */\r\n  resizedImageWidth: null,\r\n  /** Calculated height */\r\n  resizedImageHeight: null,\r\n  area: {\r\n    top: 0,\r\n    left: 0,\r\n    width: MIN_IMAGE_DIMENSION_LENGHT,\r\n    height: MIN_IMAGE_DIMENSION_LENGHT,\r\n  }\r\n})\r\n\r\nclass ImageCrop extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    open: PropTypes.bool,\r\n    /** Callback on close button clicked */\r\n    onClose: PropTypes.func,\r\n    /** Callback on loading error provided with message */\r\n    onErrorLoadingImage: PropTypes.func\r\n  }\r\n\r\n  state = getDefaultState()\r\n  // Component refs\r\n  fileInputRef = React.createRef()\r\n  // Other props\r\n  reader = new FileReader()\r\n  image = new Image()\r\n\r\n  componentDidMount = () => {\r\n    // Process each next file loaded to reader\r\n    this.reader.addEventListener('load', () => {\r\n      // Load and preprocess image\r\n      this.image.src = this.reader.result\r\n    }, false)\r\n\r\n    // Process given image on load\r\n    this.image.onload = (e) => {\r\n      let originalWidth = this.image.width\r\n      let originalHeight = this.image.height\r\n      \r\n      // Check image aspect ration rules on load\r\n      if (\r\n        originalWidth / originalHeight <= 0.25 ||\r\n        originalWidth / originalHeight >= 3\r\n      ) {\r\n        this.props.onErrorLoadingImage &&\r\n          this.props.onErrorLoadingImage(ErrorTypes.WRONG_IMAGE_ASPECT_RATIO)\r\n        return\r\n      }\r\n      if (\r\n        originalWidth < MIN_IMAGE_DIMENSION_LENGHT ||\r\n        originalHeight < MIN_IMAGE_DIMENSION_LENGHT\r\n      ) {\r\n        this.props.onErrorLoadingImage &&\r\n          this.props.onErrorLoadingImage(ErrorTypes.IMAGE_TOO_SMALL)\r\n        return\r\n      }\r\n      // Resize exaggerated image\r\n      let aspectRatio\r\n      let resizedImageWidth = originalWidth\r\n      let resizedImageHeight = originalHeight\r\n      if (originalHeight > MAX_IMAGE_DIMENSION_LENGHT) {\r\n        aspectRatio = originalHeight / MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageHeight = MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageWidth = originalWidth / aspectRatio\r\n      }\r\n      if (resizedImageWidth > MAX_IMAGE_DIMENSION_LENGHT) {\r\n        aspectRatio = resizedImageWidth / MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageWidth = MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageHeight = resizedImageHeight / aspectRatio\r\n      }\r\n      // Set default image center\r\n      let initialAreaTop = resizedImageHeight / 2 - MIN_IMAGE_DIMENSION_LENGHT / 2\r\n      let initialAreaLeft = resizedImageWidth / 2 - MIN_IMAGE_DIMENSION_LENGHT / 2\r\n      let calculatedWidth = Math.min(MIN_IMAGE_DIMENSION_LENGHT, resizedImageWidth)\r\n      let calculatedHeight = Math.min(MIN_IMAGE_DIMENSION_LENGHT, resizedImageHeight)\r\n\r\n      // Select entire image if it is small enough\r\n      if (\r\n        resizedImageHeight / resizedImageWidth <= MAX_RESIZE_RATIO &&\r\n        resizedImageHeight / resizedImageWidth >= MIN_RESIZE_RATIO &&\r\n        resizedImageHeight <= MAX_IMAGE_DIMENSION_LENGHT &&\r\n        resizedImageWidth <= FULL_IMAGE_SELECTION_THRESHOLD\r\n      ) {\r\n        initialAreaTop = 0\r\n        initialAreaLeft = 0\r\n        calculatedWidth = resizedImageWidth\r\n        calculatedHeight = resizedImageHeight\r\n      }\r\n\r\n      this.setState({\r\n        area: update(this.state.area, {\r\n          top: { $set: initialAreaTop },\r\n          left: { $set: initialAreaLeft },\r\n          width: { $set: calculatedWidth },\r\n          height: { $set: calculatedHeight }\r\n        }),\r\n        resizedImageWidth,\r\n        resizedImageHeight,\r\n        imgSrc: this.image.src,\r\n        isImgSelected: true\r\n      })\r\n    }\r\n  }\r\n\r\n  /** Callback on close click */\r\n  handleClose = () => {\r\n    this.props.onClose &&\r\n      this.props.onClose()\r\n  }\r\n\r\n  /** Resets selected image */\r\n  handleGoBackClick = () => {\r\n    let defaultState = getDefaultState()\r\n    this.setState({\r\n      ...defaultState\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Converts loaded image to url and saves to state\r\n   */\r\n  handleSelectedImageChange = e => {\r\n    let file = this.fileInputRef.current.files[0]\r\n\r\n    if (file) {\r\n      this.reader.readAsDataURL(file)\r\n    }\r\n  }\r\n\r\n  /** Fires event on input[type='file'] when related button is clicked */\r\n  handleSelectFileClick = e => {\r\n    if (this.fileInputRef.current) {\r\n      this.fileInputRef.current.click()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Just.\r\n   * Handle.\r\n   * A cat.\r\n   */\r\n  handleCat = () => {\r\n    this.image.src = CatsImg\r\n  }\r\n\r\n  /** Transforms image for given degree diff */\r\n  handleRotateClick = deltaDegree => () => {\r\n    this.setState(oldState => ({\r\n      imgRotationDegree: oldState.imgRotationDegree + deltaDegree\r\n    }))\r\n  }\r\n\r\n  /** Update selected area properties*/\r\n  updateArea = (area) => {\r\n    this.setState({\r\n      area: update(this.state.area, { $merge: area })\r\n    })\r\n  }\r\n  \r\n  /** Replace current area with new one */\r\n  handleFadedSpaceClick = ({x, y}) => {\r\n    const { \r\n      resizedImageHeight,\r\n      resizedImageWidth\r\n     } = this.state\r\n    // Fix top offset\r\n    let fixedTop = y - MIN_IMAGE_CROP_DIMENSION_LENGHT / 2\r\n    if (fixedTop < 0)\r\n      fixedTop = 0\r\n    else if (fixedTop > resizedImageHeight - MIN_IMAGE_CROP_DIMENSION_LENGHT)\r\n      fixedTop = resizedImageHeight - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    // Fixed left offset\r\n    let fixedLeft = x - MIN_IMAGE_CROP_DIMENSION_LENGHT / 2\r\n    if (fixedLeft < 0)\r\n     fixedLeft = 0\r\n    else if (fixedLeft > resizedImageWidth - MIN_IMAGE_CROP_DIMENSION_LENGHT)\r\n      fixedLeft = resizedImageWidth - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    \r\n    this.updateArea({\r\n      top: fixedTop,\r\n      left: fixedLeft,\r\n      width: MIN_IMAGE_CROP_DIMENSION_LENGHT,\r\n      height: MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    })\r\n  }\r\n  \r\n  /** Update image reference */\r\n  handleCropperRectUpdate = ref => {\r\n    this.setState({\r\n      imgRef: ref\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      classes,\r\n      title,\r\n    } = this.props\r\n\r\n    const { \r\n      isImgSelected,\r\n      imgSrc,\r\n      imgRotationDegree,\r\n      area,\r\n      resizedImageHeight,\r\n      resizedImageWidth,\r\n      imgRef\r\n    } = this.state\r\n\r\n    // Next code block ensures that image is being rotated \r\n    // and, if it is, adjusts margin of wrapper\r\n    let imgWidthHeightDelta = 0\r\n    if (imgRef.current) {\r\n      let isRotated = Boolean((imgRotationDegree / 90) % 2)\r\n      \r\n      if (isRotated) {\r\n        imgWidthHeightDelta = Math.abs(\r\n          imgRef.current.clientWidth - \r\n          imgRef.current.clientHeight\r\n        )\r\n      }\r\n    }\r\n\r\n    let outerImageContainerStyle = {\r\n      margin: `${imgWidthHeightDelta / 2 + 35}px auto`,\r\n      width: resizedImageWidth,\r\n      height: resizedImageHeight\r\n    }\r\n    return (\r\n      <Paper className={classes.root}>\r\n        <div className={classes.title}>\r\n          <span className={classes.titleText}>\r\n            {title}\r\n          </span>\r\n          <div className={classes.close}>\r\n            <CloseIcon onClick={this.handleClose}/>\r\n          </div>\r\n        </div>\r\n        <div className={classes.cropWrap}>\r\n          {\r\n            isImgSelected ? (\r\n            <div>\r\n              <div className={classes.descriptionWrap}>\r\n                Выберите область изображения\r\n              </div>\r\n              <div \r\n                className={classes.outerImage}\r\n                style={outerImageContainerStyle}\r\n                draggable={false}\r\n              >\r\n                <Cropper\r\n                  height={resizedImageHeight}\r\n                  width={resizedImageWidth}\r\n                  areaTop={area.top}\r\n                  areaLeft={area.left}\r\n                  areaHeight={area.height}\r\n                  areaWidth={area.width}\r\n                  imgSrc={imgSrc}\r\n                  imgRef={imgRef}\r\n                  rotationDegree={imgRotationDegree}\r\n                  onRectUpdate={this.handleCropperRectUpdate}\r\n                  onAreaUpdate={this.updateArea}\r\n                  onFadedSpaceClick={this.handleFadedSpaceClick}\r\n                />\r\n                <div className={classes.rotationButtons} draggable={false}>\r\n                  <RotateAntiClockwiseIcon\r\n                    className={classes.rotateClockwise}\r\n                    onClick={this.handleRotateClick(-90)}\r\n                  />\r\n                  <RotateClockwiseIcon\r\n                    className={classes.rotateAntiClockwise}\r\n                    onClick={this.handleRotateClick(90)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className={classes.bottomLine} />\r\n              <div className={classes.footer}>\r\n                <Button className={classes.btn}>Сохранить</Button>\r\n                <Button onClick={this.handleGoBackClick}>Назад</Button>\r\n              </div>\r\n            </div>\r\n            ) : (\r\n              <div className={classes.footer}>\r\n                <Button \r\n                  onClick={this.handleSelectFileClick}\r\n                  className={classes.btn}\r\n                >\r\n                  Выбрать фото\r\n                </Button>\r\n                <Button onClick={this.handleCat}>\r\n                  Выбрать кота\r\n                </Button>\r\n                <input \r\n                  ref={this.fileInputRef} \r\n                  className={classes.input}\r\n                  type='file' \r\n                  onChange={this.handleSelectedImageChange} \r\n                />\r\n              </div>\r\n            )\r\n          }\r\n        </div>\r\n      </Paper>\r\n    )\r\n  }\r\n}\r\n\r\nconst ImageCropStyled = withStyles(styles)(ImageCrop)\r\n\r\nexport { ImageCropStyled as ImageCrop }","export default {\r\n  root: {\r\n    width: 654,\r\n    display: 'flex',\r\n    flexFlow: 'column'\r\n  },\r\n  title: {\r\n    minHeight: 54,\r\n    paddingLeft: 25,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    borderBottom: '1px solid #86838357',\r\n    backgroundColor: '#f2f5f7',\r\n    borderTopLeftRadius: 4,\r\n    borderTopRightRadius: 4\r\n  },\r\n  descriptionWrap: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginBottom: 35,\r\n    userSelect: 'none'\r\n  },\r\n  cropWrap: {\r\n    padding: '32px 20px 20px',\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n  outerImage: {\r\n    position: 'relative'\r\n  },\r\n  rotateClockwise: {\r\n    fill: '#ffffff99',\r\n    position: 'absolute',\r\n    bottom: 5,\r\n    right: 24,\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      fill: '#fff'\r\n    }\r\n  },\r\n  rotateAntiClockwise: {\r\n    extend: 'rotateClockwise',\r\n    right: 0\r\n  },\r\n  rotationButtons: {\r\n    position: 'absolute',\r\n    right: 0,\r\n    bottom: 0\r\n  },\r\n  previewImage: {\r\n    userSelect: 'none',\r\n  },\r\n  input: {\r\n    display: 'none'\r\n  },\r\n  bottomLine: {\r\n    borderBottom: '1px solid #86838357',\r\n    marginBottom: 25\r\n  },\r\n  imgFade: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: '#000',\r\n    opacity: 0.7\r\n  },\r\n  titleText: {\r\n    flexGrow: 1\r\n  },\r\n  close: {\r\n    padding: '21px 25px 21px 12px',\r\n    fill: '#7b95b5',\r\n    cursor: 'pointer',\r\n    opacity: .75,\r\n    '&:hover': {\r\n      opacity: 1\r\n    }\r\n  },\r\n  footer: {\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n  btn: {\r\n    marginRight: 25\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport { ImageCrop } from './components/imageCrop';\r\nimport { DragDropContextProvider } from 'react-dnd';\r\nimport HTML5Backend from 'react-dnd-html5-backend';\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <DragDropContextProvider backend={HTML5Backend}>\r\n        <div className=\"App\">\r\n          <header className=\"App-header\">\r\n            <ImageCrop \r\n              title='Выберите фотографию'\r\n              onClose={this.handleToggleButton}\r\n              onErrorLoadingImage={this.handleErrorLoading}\r\n            />\r\n          </header>\r\n        </div>\r\n      </DragDropContextProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/cats.46b11cf1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/empty.b6229967.svg\";"],"sourceRoot":""}