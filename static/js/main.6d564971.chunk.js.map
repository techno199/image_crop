{"version":3,"sources":["components/paper/index.js","img/rotate_left.svg","img/rotate_right.svg","img/close.svg","components/button/index.js","helpers/index.js","components/imageCrop/selectionArea/index.js","components/imageCrop/tags/tag/index.js","components/imageCrop/tags/index.js","components/imageCrop/cropper/resizeArea.js","components/imageCrop/cropper/index.js","components/imageCrop/cropper/moveArea.js","components/imageCrop/index.js","components/imageCrop/imageCrop.styles.js","components/modal/index.js","App.js","serviceWorker.js","index.js","img/cats.jpg","img/empty.svg"],"names":["Paper","_this$props","this","props","children","classes","className","other","Object","objectWithoutProperties","react_default","a","createElement","assign","classNames","root","Fragment","Component","PaperStyled","withStyles","backgroundColor","borderRadius","color","boxShadow","_extends","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","rotate_left_ref2","d","fill","_ref3","rotate_left_SvgRotateLeft","_ref","svgRef","width","height","viewBox","ref","ForwardRef","forwardRef","__webpack_require__","p","rotate_right_extends","rotate_right_objectWithoutProperties","rotate_right_objectWithoutPropertiesLoose","rotate_right_ref2","rotate_right_ref3","rotate_right_SvgRotateRight","rotate_right_ForwardRef","close_extends","close_objectWithoutProperties","close_objectWithoutPropertiesLoose","close_ref2","close_ref3","close_SvgClose","close_ForwardRef","Button","ButtonStyled","outline","padding","minWidth","fontSize","display","justifyContent","border","cursor","&:hover","&:active","paddingTop","paddingBottom","ItemTypes","TagTypes","NW","N","NE","W","E","SW","S","SE","ErrorTypes","WRONG_IMAGE_ASPECT_RATIO","IMAGE_TOO_SMALL","MAX_IMAGE_DIMENSION_LENGHT","MIN_IMAGE_DIMENSION_LENGHT","MIN_IMAGE_CROP_DIMENSION_LENGHT","movePreview","Image","src","movePreviewImage","getDefaultState","initClientOffset","x","y","item","top","right","bottom","left","SelectionArea","state","areaRef","React","createRef","handleDrag","e","_this","imgWidth","imgHeight","currentClientOffset","clientX","clientY","onHover","handleDragStart","rect","current","getBoundingClientRect","dataTransfer","setDragImage","setState","handleDragEnd","objectSpread","_this$props2","connectDragPreview","connectDragSource","areaStyles","imgStyles","marginTop","marginLeft","style","imgWrap","onDrag","onDragStart","onDragEnd","SelectionAreaStyled","position","overflow","styles","opacity","transition","nw","n","concat","TAG_WIDTH","ne","se","s","sw","w","Tag","tagName","componentDidMount","type","hightlightStyle","isHighlighted","getEmptyImage","TagHOC","DragSource","beginDrag","connect","dragSource","dragPreview","TagStyled","Tags","shouldComponentUpdate","nextProps","isDragging","tags","map","TagsStyled","getFixedBottomDelta","areaTop","areaWidth","areaHeight","cursorAbsoluteOffset","bottomAbsoluteOffsetInterval","max","Math","min","fixedBottomOffset","getFixedRightDelta","areaLeft","rightAbsoluteOffsetInterval","fixedRightOffset","getFixedLeftDelta","leftAbsoluteOffsetInterval","fixedLeftOffset","getFixedTopDelta","topAbsoluteOffsetInterval","fixedTopOffset","CropperHOC","DropTarget","hover","monitor","getItemType","onAreaUpdate","imgRef","tagType","getItem","currentOffset","getClientOffset","resizeArea","connectDropTarget","dropTarget","isOver","rotationDegree","imgSrc","onRectUpdate","onFadedSpaceClick","useRef","handleFadeClick","useCallback","handleHover","_ref2","fixedOffset","containerRect","areaRect","containerWidth","containerHeight","initOffset","areaAbsoluteOffset","fixedAreaLeftOffset","fixedAreaTopOffset","moveArea","useEffect","innerImageContainerStyle","transform","imgStyle","img","alt","imgFade","onClick","area","CropperStyled","userSelect","isImgSelected","imgRotationDegree","resizedImageWidth","resizedImageHeight","ImageCrop","fileInputRef","reader","FileReader","image","addEventListener","result","onload","originalWidth","originalHeight","onErrorLoadingImage","aspectRatio","initialAreaTop","initialAreaLeft","update","$set","handleClose","onClose","handleGoBackClick","defaultState","handleSelectedImageChange","file","files","readAsDataURL","handleSelectFileClick","click","handleCat","CatsImg","handleRotateClick","deltaDegree","oldState","updateArea","$merge","handleFadedSpaceClick","_this$state","fixedTop","fixedLeft","handleCropperRectUpdate","title","_this$state2","imgWidthHeightDelta","Boolean","abs","clientWidth","clientHeight","outerImageContainerStyle","margin","titleText","close","cropWrap","descriptionWrap","outerImage","rotationButtons","rotateClockwise","rotateAntiClockwise","bottomLine","footer","btn","input","onChange","ImageCropStyled","flexFlow","minHeight","paddingLeft","alignItems","borderBottom","borderTopLeftRadius","borderTopRightRadius","marginBottom","extend","previewImage","flexGrow","marginRight","Modal","backgroundRef","handleOuterClick","onOuterClick","open","onMouseDown","App","background","cjs","backend","HTML5Backend","handleToggleButton","handleErrorLoading","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.6d564971.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport classNames from 'classnames'\r\n\r\nconst styles = {\r\n  root: {\r\n    backgroundColor: '#fff',\r\n    borderRadius: 4,\r\n    color: '#000',\r\n    boxShadow: '0px 1px 3px 0px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 2px 1px -1px rgba(0,0,0,0.12)'\r\n  }\r\n}\r\n\r\nclass Paper extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      children,\r\n      classes,\r\n      className,\r\n      ...other\r\n    } = this.props\r\n    \r\n    return (\r\n      <div className={classNames([classes.root, className])} {...other}>\r\n        <React.Fragment>\r\n          {children}\r\n        </React.Fragment>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst PaperStyled = withStyles(styles)(Paper)\r\n\r\nexport { PaperStyled as Paper }","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z\"\n});\n\nvar SvgRotateLeft = function SvgRotateLeft(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgRotateLeft, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/rotate_left.92a114e8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z\"\n});\n\nvar SvgRotateRight = function SvgRotateRight(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgRotateRight, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/rotate_right.bd9c45d6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.777b93c6.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport classNames from 'classnames'\r\n\r\nconst styles = {\r\n  root: {\r\n    outline: 'none',\r\n    padding: '7px 16px 8px',\r\n    backgroundColor: '#5181b8',\r\n    color: '#fff',\r\n    minWidth: 170,\r\n    borderRadius: 4,\r\n    fontSize: 12.5,\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    border: 'none',\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      backgroundColor: '#5b88bd'\r\n    },\r\n    '&:active': {\r\n      backgroundColor: '#4872a3',\r\n      paddingTop: 8,\r\n      paddingBottom: 7\r\n    }\r\n  }\r\n}\r\n\r\nclass Button extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      classes,\r\n      children,\r\n      className,\r\n      ...other\r\n     } = this.props\r\n\r\n    return (\r\n      <button\r\n        className={classNames([classes.root, className])} \r\n        {...other}\r\n      >\r\n        {children}\r\n      </button>\r\n    )\r\n  }\r\n}\r\n\r\nconst ButtonStyled = withStyles(styles)(Button)\r\n\r\nexport { ButtonStyled as Button }","import movePreviewImage from '../img/empty.svg'\r\n\r\nexport const ItemTypes = {\r\n  BOX: 'BOX',\r\n  TAG: 'TAG'\r\n}\r\n\r\nexport const TagTypes = {\r\n  NW: 'NW',\r\n  N: 'N',\r\n  NE: 'NE',\r\n  W: 'W',\r\n  E: 'E',\r\n  SW: 'SW',\r\n  S: 'S',\r\n  SE: 'SE'\r\n}\r\n\r\nexport const ErrorTypes = {\r\n  WRONG_IMAGE_ASPECT_RATIO: 'WRONG_IMAGE_ASPECT_RATIO',\r\n  IMAGE_TOO_SMALL: 'IMAGE_TOO_SMALL'\r\n}\r\n\r\n/** How many height's can maximum width contain */\r\nexport const MAX_RESIZE_RATIO = 1\r\n/** How many height's can minimum width contain */\r\nexport const MIN_RESIZE_RATIO = 1/1.5\r\n/** Maximum image markup width or height */\r\nexport const MAX_IMAGE_DIMENSION_LENGHT = 604\r\n/** Minimum image markup width or height */\r\nexport const MIN_IMAGE_DIMENSION_LENGHT = 200\r\n/** Minimum crop area width or height */\r\nexport const MIN_IMAGE_CROP_DIMENSION_LENGHT = 100\r\n\r\nexport const movePreview = new Image()\r\nmovePreview.src = movePreviewImage\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport { ItemTypes, movePreview } from '../../../helpers';\r\nimport { DragSource } from 'react-dnd';\r\nimport classNames from 'classnames'\r\n\r\nconst styles = {\r\n  root: {\r\n    position: 'absolute',\r\n    cursor: 'move'\r\n  },\r\n  imgWrap: {\r\n    overflow: 'hidden',\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0\r\n  }\r\n}\r\n\r\nconst getDefaultState = () => ({\r\n  initClientOffset: {\r\n    x: null,\r\n    y: null\r\n  },\r\n  item: {\r\n    top: null,\r\n    right: null,\r\n    bottom: null,\r\n    left: null,\r\n    height: null,\r\n    width: null\r\n  }\r\n})\r\n\r\nclass SelectionArea extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    /** Describes absolute top offset */\r\n    top: PropTypes.number.isRequired,\r\n    /** Describes absolute left offset */\r\n    left: PropTypes.number.isRequired,\r\n    /** Area width */\r\n    width: PropTypes.number.isRequired,\r\n    /** Area height */\r\n    height: PropTypes.number.isRequired,\r\n    /** Classes to be merged */\r\n    className: PropTypes.string,\r\n    /** Image source */\r\n    src: PropTypes.string.isRequired,\r\n    /** Image width */\r\n    imgWidth: PropTypes.number.isRequired,\r\n    /** Image height */\r\n    imgHeight: PropTypes.number.isRequired,\r\n    onHover: PropTypes.func\r\n  }\r\n\r\n  state = getDefaultState()\r\n  areaRef = React.createRef()\r\n\r\n  handleDrag = e => {\r\n    const { \r\n      imgWidth,\r\n      imgHeight\r\n    } = this.props\r\n    const currentClientOffset = {\r\n      x: e.clientX,\r\n      y: e.clientY\r\n    }\r\n    // If droped outside droppable zone, it returns {0, 0} at last tick\r\n    // so we ignore it\r\n    if (\r\n      currentClientOffset.x === 0 &&\r\n      currentClientOffset.y === 0\r\n    ) return\r\n\r\n    this.props.onHover &&\r\n      this.props.onHover({\r\n        initClientOffset: this.state.initClientOffset,\r\n        currentClientOffset,\r\n        item: this.state.item,\r\n        width: imgWidth,\r\n        height: imgHeight\r\n      })\r\n  }\r\n\r\n  handleDragStart = e => {\r\n    let rect = this.areaRef.current.getBoundingClientRect()\r\n    // Set crosshair image on while moving\r\n    e.dataTransfer.setDragImage(movePreview, 0, 0)\r\n\r\n    let item = {\r\n      top: rect.top,\r\n      right: rect.right,\r\n      left: rect.left,\r\n      bottom: rect.bottom,\r\n      width: this.props.width,\r\n      height: this.props.height\r\n    }\r\n    \r\n\r\n    this.setState({\r\n      initClientOffset: {\r\n        x: e.clientX,\r\n        y: e.clientY\r\n      },\r\n      item\r\n    })\r\n  }\r\n\r\n  handleDragEnd = e => {\r\n    this.setState({ \r\n      ...getDefaultState()\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      top,\r\n      left,\r\n      width,\r\n      height,\r\n      classes,\r\n      connectDragPreview,\r\n      connectDragSource,\r\n      className,\r\n      src,\r\n      imgWidth,\r\n      imgHeight,\r\n      onHover,\r\n      ...other\r\n     } = this.props\r\n\r\n    const areaStyles = {\r\n      top,\r\n      left,\r\n      width,\r\n      height\r\n    }\r\n    const imgStyles = {\r\n      width: imgWidth,\r\n      height: imgHeight,\r\n      marginTop: -top,\r\n      marginLeft: -left,\r\n    }\r\n\r\n    return (\r\n      <div \r\n        style={areaStyles}\r\n        className={classNames([classes.root, className])}\r\n        ref={this.areaRef}\r\n        {...other}\r\n      >\r\n        <div className={classes.imgWrap}>\r\n          <img \r\n            style={imgStyles}\r\n            src={src}\r\n            onDrag={this.handleDrag}\r\n            onDragStart={this.handleDragStart}\r\n            onDragEnd={this.handleDragEnd}\r\n          />\r\n        </div>\r\n        {this.props.children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst SelectionAreaStyled = withStyles(styles)(SelectionArea)\r\n\r\nexport { SelectionAreaStyled as SelectionArea }","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { DragSource } from 'react-dnd';\r\nimport { ItemTypes, TagTypes } from '../../../../helpers';\r\nimport withStyles from 'react-jss'\r\nimport classNames from 'classnames'\r\nimport { getEmptyImage } from 'react-dnd-html5-backend'\r\n\r\nexport const TAG_WIDTH = 10\r\n\r\nconst styles = {\r\n  root: {\r\n    width: TAG_WIDTH,\r\n    height: TAG_WIDTH,\r\n    backgroundColor: '#f2f2f2',\r\n    opacity: 0.3,\r\n    position: 'absolute',\r\n    transition: '.1s'\r\n  },\r\n  nw: {\r\n    top: -TAG_WIDTH / 2,\r\n    left: -TAG_WIDTH / 2,\r\n    cursor: 'nw-resize'\r\n  },\r\n  n: {\r\n    top: - TAG_WIDTH / 2,\r\n    left: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'n-resize'\r\n  },\r\n  ne: {\r\n    top: -TAG_WIDTH / 2,\r\n    left: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'ne-resize'\r\n  },\r\n  e: {\r\n    top: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    left: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'e-resize'\r\n  },\r\n  se: {\r\n    top: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    left: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 'se-resize'\r\n  },\r\n  s: {\r\n    top: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    left: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    cursor: 's-resize'\r\n  },\r\n  sw: {\r\n    top: `calc(100% - ${TAG_WIDTH / 2}px)`,\r\n    left: -TAG_WIDTH / 2,\r\n    cursor: 'sw-resize'\r\n  },\r\n  w: {\r\n    top: `calc(50% - ${TAG_WIDTH / 2}px)`,\r\n    left: -TAG_WIDTH / 2,\r\n    cursor: 'w-resize'\r\n  }\r\n}\r\n\r\nclass Tag extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object,\r\n    connectDragSource: PropTypes.func.isRequired,\r\n    connectDragPreview: PropTypes.func.isRequired,\r\n    /** Defines tag type */\r\n    type: PropTypes.string.isRequired,\r\n    /** Highlight square */\r\n    isHighlighted: PropTypes.bool\r\n  }\r\n\r\n  state = {\r\n    tagName: ''\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    switch (this.props.type){\r\n      case TagTypes.NW:\r\n        this.setState({\r\n          tagName: this.props.classes.nw\r\n        })\r\n        break\r\n      case TagTypes.N:\r\n        this.setState({\r\n          tagName: this.props.classes.n\r\n        })\r\n        break\r\n      case TagTypes.NE:\r\n        this.setState({\r\n          tagName: this.props.classes.ne\r\n        })\r\n        break\r\n      case TagTypes.E:\r\n        this.setState({\r\n          tagName: this.props.classes.e\r\n        })\r\n        break\r\n      case TagTypes.SE:\r\n        this.setState({\r\n          tagName: this.props.classes.se\r\n        })\r\n        break\r\n      case TagTypes.S:\r\n        this.setState({\r\n          tagName: this.props.classes.s\r\n        })\r\n        break\r\n      case TagTypes.SW:\r\n        this.setState({\r\n          tagName: this.props.classes.sw\r\n        })\r\n        break\r\n      case TagTypes.W:\r\n        this.setState({\r\n          tagName: this.props.classes.w\r\n        })\r\n        break\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      connectDragSource,\r\n      connectDragPreview,\r\n      classes,\r\n      isHighlighted,\r\n    } = this.props\r\n    // Replace default stab with empty image\r\n    connectDragPreview(getEmptyImage())\r\n    let hightlightStyle\r\n    if (isHighlighted)\r\n      hightlightStyle = {\r\n        opacity: .7\r\n      }\r\n    \r\n    return connectDragSource(\r\n      <div\r\n        className={classNames([classes.root, this.state.tagName])}\r\n        style={hightlightStyle}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nconst TagHOC = DragSource(\r\n  ItemTypes.TAG,\r\n  {\r\n    beginDrag: props => {\r\n      return {\r\n        type: props.type\r\n      }\r\n    }\r\n  },\r\n  connect => ({\r\n    connectDragSource: connect.dragSource(),\r\n    connectDragPreview: connect.dragPreview()\r\n  })\r\n)(Tag)\r\n\r\nconst TagStyled = withStyles(styles)(TagHOC)\r\n\r\nexport { TagStyled as Tag }\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\nimport withStyles from 'react-jss'\r\nimport { DragSource } from 'react-dnd';\r\nimport { ItemTypes, TagTypes } from '../../../helpers';\r\nimport { Tag, TAG_WIDTH } from './tag';\r\n\r\nconst styles = {\r\n\r\n}\r\n\r\nclass Tags extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    /** Selected area width */\r\n    width: PropTypes.number.isRequired,\r\n    /** Selected area height */\r\n    height: PropTypes.number.isRequired,\r\n    /** Hightlight squares when area is being dragged */\r\n    isDragging: PropTypes.bool\r\n  }\r\n\r\n  shouldComponentUpdate = (nextProps) => {\r\n    // Huge performance improvement\r\n    if (\r\n      this.props.width === nextProps.width &&\r\n      this.props.height === nextProps.height &&\r\n      this.props.isDragging === nextProps.isDragging\r\n    ) return false\r\n    return true\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      classes,\r\n      className,\r\n      width,\r\n      height,\r\n      connectDragSource,\r\n      isDragging,\r\n      ...other\r\n    } = this.props\r\n    let tags = Object.keys(TagTypes).map(type => TagTypes[type])\r\n    \r\n    return (\r\n      <div {...other}>\r\n        {\r\n          tags.map(type => (\r\n            <Tag \r\n              key={type}\r\n              type={type}\r\n              isHighlighted={isDragging}\r\n            />\r\n          ))\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst TagsStyled = withStyles(styles)(Tags)\r\n\r\nexport { TagsStyled as Tags }\r\n","import { TagTypes, MIN_IMAGE_CROP_DIMENSION_LENGHT, MIN_RESIZE_RATIO, MAX_RESIZE_RATIO } from \"../../../helpers\";\r\n\r\nexport const resizeArea = (props, monitor) => {\r\n  let {\r\n    areaTop,\r\n    areaLeft,\r\n    areaHeight,\r\n    areaWidth,\r\n    width,\r\n    onAreaUpdate,\r\n    height,\r\n    imgRef\r\n  } = props\r\n\r\n  let rect = imgRef.current.getBoundingClientRect()\r\n  /** Currently dragged tag type */\r\n  let tagType = monitor.getItem().type\r\n  /** Current offset */\r\n  let currentOffset = monitor.getClientOffset()\r\n  /** Cursor absolute offset*/\r\n  let cursorAbsoluteOffset = {\r\n    x: currentOffset.x - rect.left,\r\n    y: currentOffset.y - rect.top,\r\n  }\r\n\r\n  // Move around respecting currenlty selected tag\r\n  switch (tagType) {\r\n    case TagTypes.NW: {\r\n      onAreaUpdate({\r\n        top: areaTop - getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        left: areaLeft - getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        width: areaWidth + getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        height: areaHeight + getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }      \r\n    case TagTypes.N: {\r\n      onAreaUpdate({\r\n        top: areaTop - getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        height: areaHeight + getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.NE: {\r\n      onAreaUpdate({\r\n        top: areaTop - getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        width: areaWidth - getFixedRightDelta(width, areaLeft, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        height: areaHeight + getFixedTopDelta(areaTop, areaHeight, areaWidth, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.E: {\r\n      onAreaUpdate({\r\n        width: areaWidth - getFixedRightDelta(width, areaLeft, areaHeight, areaWidth, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.SE: {\r\n      onAreaUpdate({\r\n        width: areaWidth - getFixedRightDelta(width, areaLeft, areaHeight, areaWidth, cursorAbsoluteOffset),\r\n        height: areaHeight - getFixedBottomDelta(height, areaTop, areaWidth, areaHeight, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.S: {\r\n      onAreaUpdate({\r\n        height: areaHeight - getFixedBottomDelta(height, areaTop, areaWidth, areaHeight, cursorAbsoluteOffset)\r\n      })\r\n      break\r\n    }\r\n    case TagTypes.SW: {\r\n      onAreaUpdate({\r\n        left: areaLeft - getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        height: areaHeight - getFixedBottomDelta(height, areaTop, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        width: areaWidth + getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset)\r\n      })\r\n    }\r\n    case TagTypes.W: {\r\n      onAreaUpdate({\r\n        left: areaLeft - getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset),\r\n        width: areaWidth + getFixedLeftDelta(areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset)\r\n      })\r\n    }\r\n    default:\r\n      break\r\n  }\r\n}\r\n\r\nconst getFixedBottomDelta = (height, areaTop, areaWidth, areaHeight, cursorAbsoluteOffset) => {\r\n  // Get possible interval for bottom side\r\n  let bottomAbsoluteOffsetInterval = {\r\n    max: Math.min(\r\n      height,\r\n      areaTop + areaWidth / MIN_RESIZE_RATIO\r\n    ),\r\n    min: Math.max(\r\n      areaTop + areaWidth / MAX_RESIZE_RATIO,\r\n      areaTop + MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset\r\n  let fixedBottomOffset = cursorAbsoluteOffset.y\r\n  if (cursorAbsoluteOffset.y > bottomAbsoluteOffsetInterval.max)\r\n    fixedBottomOffset = bottomAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.y < bottomAbsoluteOffsetInterval.min)\r\n    fixedBottomOffset = bottomAbsoluteOffsetInterval.min\r\n  return areaTop + areaHeight - fixedBottomOffset\r\n}\r\n\r\nconst getFixedRightDelta = (width, areaLeft, areaHeight, areaWidth, cursorAbsoluteOffset) => {\r\n  // Get possible interval for right side\r\n  let rightAbsoluteOffsetInterval = {\r\n    max: Math.min(\r\n      width,\r\n      areaLeft + areaHeight * MAX_RESIZE_RATIO\r\n    ),\r\n    min: Math.max(\r\n      areaLeft + areaHeight * MIN_RESIZE_RATIO,\r\n      areaLeft + MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset\r\n  let fixedRightOffset = cursorAbsoluteOffset.x\r\n  if (cursorAbsoluteOffset.x > rightAbsoluteOffsetInterval.max)\r\n    fixedRightOffset = rightAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.x < rightAbsoluteOffsetInterval.min)\r\n    fixedRightOffset = rightAbsoluteOffsetInterval.min\r\n  return areaLeft + areaWidth - fixedRightOffset\r\n}\r\n\r\nconst getFixedLeftDelta = (areaLeft, areaWidth, areaHeight, cursorAbsoluteOffset) => {\r\n  // Get possible interval for left side\r\n  let leftAbsoluteOffsetInterval = {\r\n    max: Math.max(\r\n      0, \r\n      areaLeft + areaWidth - areaHeight * MAX_RESIZE_RATIO\r\n    ),\r\n    min: Math.min(\r\n      areaLeft + areaWidth - areaHeight * MIN_RESIZE_RATIO,\r\n      areaLeft + areaWidth - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset based on interval\r\n  let fixedLeftOffset = cursorAbsoluteOffset.x\r\n  if (cursorAbsoluteOffset.x < leftAbsoluteOffsetInterval.max)\r\n    fixedLeftOffset = leftAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.x > leftAbsoluteOffsetInterval.min)\r\n    fixedLeftOffset = leftAbsoluteOffsetInterval.min\r\n  return areaLeft - fixedLeftOffset\r\n}\r\n\r\nconst getFixedTopDelta = (areaTop, areaHeight, areaWidth, cursorAbsoluteOffset) => {\r\n  // Get possible absolute interval for top side\r\n  let topAbsoluteOffsetInterval = {\r\n    max: Math.max(\r\n      0,\r\n      areaTop + areaHeight - areaWidth / MIN_RESIZE_RATIO\r\n    ),\r\n    min: Math.min(\r\n      areaTop + areaHeight - areaWidth / MAX_RESIZE_RATIO,\r\n      areaTop + areaHeight - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    )\r\n  }\r\n  // Get fixed offset based on interval\r\n  let fixedTopOffset = cursorAbsoluteOffset.y\r\n  if (cursorAbsoluteOffset.y < topAbsoluteOffsetInterval.max)\r\n    fixedTopOffset = topAbsoluteOffsetInterval.max\r\n  else if (cursorAbsoluteOffset.y > topAbsoluteOffsetInterval.min)\r\n    fixedTopOffset = topAbsoluteOffsetInterval.min\r\n  return areaTop - fixedTopOffset\r\n}","import React, { useRef, useEffect, useCallback } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport { SelectionArea } from '../selectionArea';\r\nimport { Tags } from '../tags';\r\nimport { DropTarget } from 'react-dnd';\r\nimport { ItemTypes } from '../../../helpers';\r\nimport { moveArea } from './moveArea';\r\nimport { resizeArea } from './resizeArea';\r\n\r\nconst styles = {\r\n  img: {\r\n    userSelect: 'none'\r\n  },\r\n  imgFade: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: '#000',\r\n    opacity: 0.7,\r\n    cursor: 'crosshair'\r\n  }\r\n}\r\n\r\nconst Cropper = ({\r\n  classes,\r\n  width,\r\n  height,\r\n  rotationDegree,\r\n  imgSrc,\r\n  areaTop,\r\n  areaLeft,\r\n  areaWidth,\r\n  areaHeight,\r\n  onRectUpdate,\r\n  connectDropTarget,\r\n  isOver,\r\n  onFadedSpaceClick,\r\n  onAreaUpdate\r\n}) => {\r\n  // image ref\r\n  const imgRef = useRef(null)\r\n\r\n  /**Occurs on faded cropper part clicked */\r\n  const handleFadeClick = useCallback(\r\n    (e) => {\r\n      let rect = imgRef.current.getBoundingClientRect()\r\n      onFadedSpaceClick &&\r\n        onFadedSpaceClick({\r\n          x: e.clientX - rect.left,\r\n          y: e.clientY - rect.top\r\n        })\r\n    }\r\n  )\r\n\r\n  const handleHover = useCallback(\r\n    ({\r\n      width,\r\n      height,\r\n      item,\r\n      initClientOffset,\r\n      currentClientOffset\r\n    }) => {\r\n      let fixedOffset = moveArea({\r\n        width,\r\n        height,\r\n        item,\r\n        initClientOffset,\r\n        currentClientOffset,\r\n        imgRef\r\n      })\r\n      onAreaUpdate({\r\n        top: fixedOffset.top,\r\n        left: fixedOffset.left\r\n      })\r\n    }\r\n  )\r\n  // Update image ref on every new image\r\n  useEffect(() => {\r\n    return () => {\r\n      if (imgRef.current) {\r\n        onRectUpdate &&\r\n          onRectUpdate(imgRef)\r\n      }\r\n    };\r\n  }, [imgRef.current])\r\n  // Custom styles\r\n  const innerImageContainerStyle = {\r\n    transform: `rotate(${rotationDegree}deg)`,\r\n    width,\r\n    height\r\n  }\r\n  const imgStyle = {\r\n    width,\r\n    height\r\n  }\r\n  \r\n  return connectDropTarget(\r\n    <div style={innerImageContainerStyle}>\r\n      <img\r\n        style={imgStyle}\r\n        className={classes.img}\r\n        src={imgSrc}\r\n        ref={imgRef} \r\n        alt='Preview' \r\n      />\r\n      <div \r\n        className={classes.imgFade} \r\n        onClick={handleFadeClick}\r\n      />\r\n      <SelectionArea\r\n        className={classes.area}\r\n        top={areaTop}\r\n        left={areaLeft}\r\n        width={areaWidth}\r\n        height={areaHeight}\r\n        imgWidth={width}\r\n        imgHeight={height}\r\n        src={imgSrc}\r\n        onHover={handleHover}\r\n      >\r\n        <Tags \r\n          width={areaWidth}\r\n          height={areaHeight}\r\n          isDragging={isOver}\r\n        />\r\n      </SelectionArea>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst CropperHOC = DropTarget(\r\n  [\r\n    ItemTypes.TAG\r\n  ],\r\n  {\r\n    hover: (props, monitor) => {\r\n      switch (monitor.getItemType()) {\r\n        case ItemTypes.TAG: {\r\n          resizeArea(props, monitor)\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n  },\r\n  (connect, monitor) => ({\r\n    connectDropTarget: connect.dropTarget(),\r\n    isOver: monitor.isOver()\r\n  })\r\n)(Cropper)\r\n\r\nconst CropperStyled = withStyles(styles)(CropperHOC)\r\n\r\nexport { CropperStyled as Cropper }\r\n\r\nCropper.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  rotationDegree: PropTypes.number.isRequired,\r\n  imgSrc: PropTypes.string.isRequired,\r\n  onImageClick: PropTypes.func,\r\n  areaTop: PropTypes.number.isRequired,\r\n  areaLeft: PropTypes.number.isRequired,\r\n  areaWidth: PropTypes.number.isRequired,\r\n  areaHeight: PropTypes.number.isRequired,\r\n  /** Image reference */\r\n  imgRef: PropTypes.object.isRequired,\r\n  onRectUpdate: PropTypes.func,\r\n  /** Called each time area is updated */\r\n  onAreaUpdate: PropTypes.func.isRequired,\r\n  /** Called when empty faded point is clicked. Returns {x, y} absolute coordinates */\r\n  onFadedSpaceClick: PropTypes.func\r\n}","/** Get fixed allowed offset */\r\nexport const moveArea = ({\r\n  width,\r\n  height,\r\n  item,\r\n  initClientOffset,\r\n  currentClientOffset,\r\n  imgRef\r\n}) => {\r\n  // Get container data\r\n  let containerRect = imgRef.current.getBoundingClientRect()\r\n  /** Inintial area rect */\r\n  let areaRect = item\r\n  // Container dimensions\r\n  let containerWidth = width\r\n  let containerHeight = height\r\n  /** Initial cursor location */\r\n  let initOffset = initClientOffset\r\n  /** Current offset */\r\n  let currentOffset = currentClientOffset\r\n  /** Cursor absolute offset */\r\n  let cursorAbsoluteOffset = {\r\n    x: currentOffset.x - containerRect.left,\r\n    y: currentOffset.y - containerRect.top,\r\n  }\r\n  /** Area box absolute offset */\r\n  let areaAbsoluteOffset = {\r\n    left: cursorAbsoluteOffset.x - (initOffset.x - areaRect.left),\r\n    right: cursorAbsoluteOffset.x + (areaRect.right - initOffset.x),\r\n    top: cursorAbsoluteOffset.y - (initOffset.y - areaRect.top),\r\n    bottom: cursorAbsoluteOffset.y + (areaRect.bottom - initOffset.y)\r\n  }\r\n  /** Fixed left offset to be rendered */\r\n  let fixedAreaLeftOffset = areaAbsoluteOffset.left\r\n  if (areaAbsoluteOffset.left < 0)\r\n    fixedAreaLeftOffset = 0\r\n  else if (areaAbsoluteOffset.right > containerWidth)\r\n    fixedAreaLeftOffset = containerWidth - areaRect.width\r\n  /** Fixed top offset to be rendered */\r\n  let fixedAreaTopOffset = areaAbsoluteOffset.top\r\n  if (areaAbsoluteOffset.top < 0)\r\n    fixedAreaTopOffset = 0\r\n  else if (areaAbsoluteOffset.bottom > containerHeight)\r\n    fixedAreaTopOffset = containerHeight - areaRect.height\r\n  // Move actual area\r\n  return {\r\n    top: fixedAreaTopOffset,\r\n    left: fixedAreaLeftOffset\r\n  }\r\n}","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\nimport { Paper } from '../paper';\r\nimport { ReactComponent as RotateAntiClockwiseIcon } from '../../img/rotate_left.svg'\r\nimport { ReactComponent as RotateClockwiseIcon } from '../../img/rotate_right.svg'\r\nimport { ReactComponent as CloseIcon } from '../../img/close.svg'\r\nimport CatsImg from '../../img/cats.jpg'\r\nimport { Button } from '../button';\r\nimport styles from './imageCrop.styles'\r\nimport { Cropper } from './cropper';\r\nimport update from 'immutability-helper'\r\nimport { MAX_IMAGE_DIMENSION_LENGHT, MIN_IMAGE_DIMENSION_LENGHT, MIN_IMAGE_CROP_DIMENSION_LENGHT, ErrorTypes } from '../../helpers';\r\n\r\nconst getDefaultState = () => ({\r\n  /** Defines whether image was loaded and processed */\r\n  isImgSelected: false,\r\n  /** Reference to image DOM */\r\n  imgSrc: null,\r\n  /** Current rotation level */\r\n  imgRotationDegree: 0,\r\n  /** Image rectangle */\r\n  imgRef: React.createRef(),\r\n  /** Calculated width */\r\n  resizedImageWidth: null,\r\n  /** Calculated height */\r\n  resizedImageHeight: null,\r\n  area: {\r\n    top: 0,\r\n    left: 0,\r\n    width: MIN_IMAGE_DIMENSION_LENGHT,\r\n    height: MIN_IMAGE_DIMENSION_LENGHT,\r\n  }\r\n})\r\n\r\nclass ImageCrop extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    open: PropTypes.bool,\r\n    /** Callback on close button clicked */\r\n    onClose: PropTypes.func,\r\n    /** Callback on loading error provided with message */\r\n    onErrorLoadingImage: PropTypes.func\r\n  }\r\n\r\n  state = getDefaultState()\r\n  // Component refs\r\n  fileInputRef = React.createRef()\r\n  // Other props\r\n  reader = new FileReader()\r\n  image = new Image()\r\n\r\n  componentDidMount = () => {\r\n    // Process each next file loaded to reader\r\n    this.reader.addEventListener('load', () => {\r\n      // Load and preprocess image\r\n      this.image.src = this.reader.result\r\n    }, false)\r\n\r\n    // Process given image on load\r\n    this.image.onload = (e) => {\r\n      let originalWidth = this.image.width\r\n      let originalHeight = this.image.height\r\n      \r\n      // Check image aspect ration rules on load\r\n      if (\r\n        originalWidth / originalHeight <= 0.25 ||\r\n        originalWidth / originalHeight >= 3\r\n      ) {\r\n        this.props.onErrorLoadingImage &&\r\n          this.props.onErrorLoadingImage(ErrorTypes.WRONG_IMAGE_ASPECT_RATIO)\r\n        return\r\n      }\r\n      if (\r\n        originalWidth < MIN_IMAGE_DIMENSION_LENGHT ||\r\n        originalHeight < MIN_IMAGE_DIMENSION_LENGHT\r\n      ) {\r\n        this.props.onErrorLoadingImage &&\r\n          this.props.onErrorLoadingImage(ErrorTypes.IMAGE_TOO_SMALL)\r\n        return\r\n      }\r\n      // Resize exaggerated image\r\n      let aspectRatio\r\n      let resizedImageWidth = originalWidth\r\n      let resizedImageHeight = originalHeight\r\n      if (originalHeight > MAX_IMAGE_DIMENSION_LENGHT) {\r\n        aspectRatio = originalHeight / MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageHeight = MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageWidth = originalWidth / aspectRatio\r\n      }\r\n      if (resizedImageWidth > MAX_IMAGE_DIMENSION_LENGHT) {\r\n        aspectRatio = resizedImageWidth / MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageWidth = MAX_IMAGE_DIMENSION_LENGHT\r\n        resizedImageHeight = resizedImageHeight / aspectRatio\r\n      }\r\n      // Set default image center\r\n      let initialAreaTop = resizedImageHeight / 2 - MIN_IMAGE_DIMENSION_LENGHT / 2\r\n      let initialAreaLeft = resizedImageWidth / 2 - MIN_IMAGE_DIMENSION_LENGHT / 2\r\n\r\n      this.setState({\r\n        area: update(this.state.area, {\r\n          top: { $set: initialAreaTop },\r\n          left: { $set: initialAreaLeft },\r\n          width: { $set: Math.min(MIN_IMAGE_DIMENSION_LENGHT, resizedImageWidth) },\r\n          height: { $set: Math.min(MIN_IMAGE_DIMENSION_LENGHT, resizedImageHeight) }\r\n        }),\r\n        resizedImageWidth,\r\n        resizedImageHeight,\r\n        imgSrc: this.image.src,\r\n        isImgSelected: true\r\n      })\r\n    }\r\n  }\r\n\r\n  /** Callback on close click */\r\n  handleClose = () => {\r\n    this.props.onClose &&\r\n      this.props.onClose()\r\n  }\r\n\r\n  /** Resets selected image */\r\n  handleGoBackClick = () => {\r\n    let defaultState = getDefaultState()\r\n    this.setState({\r\n      ...defaultState\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Converts loaded image to url and saves to state\r\n   */\r\n  handleSelectedImageChange = e => {\r\n    let file = this.fileInputRef.current.files[0]\r\n\r\n    if (file) {\r\n      this.reader.readAsDataURL(file)\r\n    }\r\n  }\r\n\r\n  /** Fires event on input[type='file'] when related button is clicked */\r\n  handleSelectFileClick = e => {\r\n    if (this.fileInputRef.current) {\r\n      this.fileInputRef.current.click()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Just.\r\n   * Handle.\r\n   * A cat.\r\n   */\r\n  handleCat = () => {\r\n    this.image.src = CatsImg\r\n  }\r\n\r\n  /** Transforms image for given degree diff */\r\n  handleRotateClick = deltaDegree => () => {\r\n    this.setState(oldState => ({\r\n      imgRotationDegree: oldState.imgRotationDegree + deltaDegree\r\n    }))\r\n  }\r\n\r\n  /** Update selected area properties*/\r\n  updateArea = (area) => {\r\n    this.setState({\r\n      area: update(this.state.area, { $merge: area })\r\n    })\r\n  }\r\n  \r\n  /** Replace current area with new one */\r\n  handleFadedSpaceClick = ({x, y}) => {\r\n    const { \r\n      resizedImageHeight,\r\n      resizedImageWidth\r\n     } = this.state\r\n    // Fix top offset\r\n    let fixedTop = y - MIN_IMAGE_CROP_DIMENSION_LENGHT / 2\r\n    if (fixedTop < 0)\r\n      fixedTop = 0\r\n    else if (fixedTop > resizedImageHeight - MIN_IMAGE_CROP_DIMENSION_LENGHT)\r\n      fixedTop = resizedImageHeight - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    // Fixed left offset\r\n    let fixedLeft = x - MIN_IMAGE_CROP_DIMENSION_LENGHT / 2\r\n    if (fixedLeft < 0)\r\n     fixedLeft = 0\r\n    else if (fixedLeft > resizedImageWidth - MIN_IMAGE_CROP_DIMENSION_LENGHT)\r\n      fixedLeft = resizedImageWidth - MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    \r\n    this.updateArea({\r\n      top: fixedTop,\r\n      left: fixedLeft,\r\n      width: MIN_IMAGE_CROP_DIMENSION_LENGHT,\r\n      height: MIN_IMAGE_CROP_DIMENSION_LENGHT\r\n    })\r\n  }\r\n  \r\n  /** Update image reference */\r\n  handleCropperRectUpdate = ref => {\r\n    this.setState({\r\n      imgRef: ref\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { \r\n      classes,\r\n      title,\r\n    } = this.props\r\n\r\n    const { \r\n      isImgSelected,\r\n      imgSrc,\r\n      imgRotationDegree,\r\n      area,\r\n      resizedImageHeight,\r\n      resizedImageWidth,\r\n      imgRef\r\n    } = this.state\r\n\r\n    // Next code block ensures that image is being rotated \r\n    // and, if it is, adjusts margin of wrapper\r\n    let imgWidthHeightDelta = 0\r\n    if (imgRef.current) {\r\n      let isRotated = Boolean((imgRotationDegree / 90) % 2)\r\n      \r\n      if (isRotated) {\r\n        imgWidthHeightDelta = Math.abs(\r\n          imgRef.current.clientWidth - \r\n          imgRef.current.clientHeight\r\n        )\r\n      }\r\n    }\r\n\r\n    let outerImageContainerStyle = {\r\n      margin: `${imgWidthHeightDelta / 2 + 35}px auto`,\r\n      width: resizedImageWidth,\r\n      height: resizedImageHeight\r\n    }\r\n    return (\r\n      <Paper className={classes.root}>\r\n        <div className={classes.title}>\r\n          <span className={classes.titleText}>\r\n            {title}\r\n          </span>\r\n          <div className={classes.close}>\r\n            <CloseIcon onClick={this.handleClose}/>\r\n          </div>\r\n        </div>\r\n        <div className={classes.cropWrap}>\r\n          {\r\n            isImgSelected ? (\r\n            <div>\r\n              <div className={classes.descriptionWrap}>\r\n                Выберите область изображения\r\n              </div>\r\n              <div \r\n                className={classes.outerImage}\r\n                style={outerImageContainerStyle}\r\n              >\r\n                <Cropper\r\n                  height={resizedImageHeight}\r\n                  width={resizedImageWidth}\r\n                  areaTop={area.top}\r\n                  areaLeft={area.left}\r\n                  areaHeight={area.height}\r\n                  areaWidth={area.width}\r\n                  imgSrc={imgSrc}\r\n                  imgRef={imgRef}\r\n                  rotationDegree={imgRotationDegree}\r\n                  onRectUpdate={this.handleCropperRectUpdate}\r\n                  onAreaUpdate={this.updateArea}\r\n                  onFadedSpaceClick={this.handleFadedSpaceClick}\r\n                />\r\n                <div className={classes.rotationButtons}>\r\n                  <RotateAntiClockwiseIcon\r\n                    className={classes.rotateClockwise}\r\n                    onClick={this.handleRotateClick(-90)}\r\n                  />\r\n                  <RotateClockwiseIcon\r\n                    className={classes.rotateAntiClockwise}\r\n                    onClick={this.handleRotateClick(90)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className={classes.bottomLine} />\r\n              <div className={classes.footer}>\r\n                <Button className={classes.btn}>Сохранить</Button>\r\n                <Button onClick={this.handleGoBackClick}>Назад</Button>\r\n              </div>\r\n            </div>\r\n            ) : (\r\n              <div className={classes.footer}>\r\n                <Button \r\n                  onClick={this.handleSelectFileClick}\r\n                  className={classes.btn}\r\n                >\r\n                  Выбрать фото\r\n                </Button>\r\n                <Button onClick={this.handleCat}>\r\n                  Выбрать кота\r\n                </Button>\r\n                <input \r\n                  ref={this.fileInputRef} \r\n                  className={classes.input}\r\n                  type='file' \r\n                  onChange={this.handleSelectedImageChange} \r\n                />\r\n              </div>\r\n            )\r\n          }\r\n        </div>\r\n      </Paper>\r\n    )\r\n  }\r\n}\r\n\r\nconst ImageCropStyled = withStyles(styles)(ImageCrop)\r\n\r\nexport { ImageCropStyled as ImageCrop }","export default {\r\n  root: {\r\n    width: 654,\r\n    display: 'flex',\r\n    flexFlow: 'column'\r\n  },\r\n  title: {\r\n    minHeight: 54,\r\n    paddingLeft: 25,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    borderBottom: '1px solid #86838357',\r\n    backgroundColor: '#f2f5f7',\r\n    borderTopLeftRadius: 4,\r\n    borderTopRightRadius: 4\r\n  },\r\n  descriptionWrap: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginBottom: 35\r\n  },\r\n  cropWrap: {\r\n    padding: '32px 20px 20px',\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n  outerImage: {\r\n    position: 'relative'\r\n  },\r\n  rotateClockwise: {\r\n    fill: '#ffffff99',\r\n    position: 'absolute',\r\n    bottom: 5,\r\n    right: 24,\r\n    cursor: 'pointer',\r\n    '&:hover': {\r\n      fill: '#fff'\r\n    }\r\n  },\r\n  rotateAntiClockwise: {\r\n    extend: 'rotateClockwise',\r\n    right: 0\r\n  },\r\n  rotationButtons: {\r\n    position: 'absolute',\r\n    right: 0,\r\n    bottom: 0\r\n  },\r\n  previewImage: {\r\n    userSelect: 'none',\r\n  },\r\n  input: {\r\n    display: 'none'\r\n  },\r\n  bottomLine: {\r\n    borderBottom: '1px solid #86838357',\r\n    marginBottom: 25\r\n  },\r\n  imgFade: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    backgroundColor: '#000',\r\n    opacity: 0.7\r\n  },\r\n  titleText: {\r\n    flexGrow: 1\r\n  },\r\n  close: {\r\n    padding: '21px 25px 21px 12px',\r\n    fill: '#7b95b5',\r\n    cursor: 'pointer',\r\n    opacity: .75,\r\n    '&:hover': {\r\n      opacity: 1\r\n    }\r\n  },\r\n  footer: {\r\n    display: 'flex',\r\n    justifyContent: 'center'\r\n  },\r\n  btn: {\r\n    marginRight: 25\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport withStyles from 'react-jss'\r\n\r\nconst styles = {\r\n  root: {\r\n    position: 'fixed',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    background: 'rgba(0, 0, 0, .7)',\r\n    overflow: 'auto'\r\n  }\r\n}\r\n\r\nclass Modal extends Component {\r\n  static propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    open: PropTypes.bool,\r\n    /**Occurs when modal background is clicked */\r\n    onOuterClick: PropTypes.func\r\n  }\r\n\r\n  backgroundRef = React.createRef()\r\n\r\n  handleOuterClick = e => {\r\n    if (e.target === this.backgroundRef.current) {\r\n      this.props.onOuterClick &&\r\n        this.props.onOuterClick(e)\r\n    } \r\n  }\r\n\r\n  render() {\r\n    const { \r\n      classes, \r\n      children, \r\n      open \r\n    } = this.props\r\n\r\n    return open && (\r\n      <div \r\n        ref={this.backgroundRef}\r\n        className={classes.root} \r\n        onMouseDown={this.handleOuterClick}\r\n      >\r\n        {children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst ModalStyled = withStyles(styles)(Modal)\r\n\r\nexport { ModalStyled as Modal }","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport { ImageCrop } from './components/imageCrop';\r\nimport { Button } from './components/button';\r\nimport { Modal } from './components/modal';\r\nimport { DragDropContextProvider } from 'react-dnd';\r\nimport HTML5Backend from 'react-dnd-html5-backend';\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <DragDropContextProvider backend={HTML5Backend}>\r\n        <div className=\"App\">\r\n          <header className=\"App-header\">\r\n            <ImageCrop \r\n              title='Выберите фотографию'\r\n              onClose={this.handleToggleButton}\r\n              onErrorLoadingImage={this.handleErrorLoading}\r\n            />\r\n          </header>\r\n        </div>\r\n      </DragDropContextProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/cats.46b11cf1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/empty.b6229967.svg\";"],"sourceRoot":""}